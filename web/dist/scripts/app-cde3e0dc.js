/******/!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}// webpackBootstrap
/******/
var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";var _interopRequire=function(obj){return obj&&obj.__esModule?obj["default"]:obj},AccountFactory=_interopRequire(__webpack_require__(1)),ApplicationCtrl=_interopRequire(__webpack_require__(2)),HomepageCtrl=_interopRequire(__webpack_require__(3)),UserbarCtrl=_interopRequire(__webpack_require__(48)),UserLoginCtrl=_interopRequire(__webpack_require__(4)),UserRegisterCtrl=_interopRequire(__webpack_require__(5)),HeaderCtrl=_interopRequire(__webpack_require__(49)),NewPageCtrl=_interopRequire(__webpack_require__(50)),FooterCtrl=_interopRequire(__webpack_require__(51)),DataCache=_interopRequire(__webpack_require__(6)),LayoutManagerService=_interopRequire(__webpack_require__(7)),ThemeManagerService=_interopRequire(__webpack_require__(8)),SocialManagerService=_interopRequire(__webpack_require__(9)),ScraperManagerService=_interopRequire(__webpack_require__(10)),SearchService=_interopRequire(__webpack_require__(11)),SearchPageCtrl=_interopRequire(__webpack_require__(12)),SearchResultsDirective=_interopRequire(__webpack_require__(13)),RealTimeService=_interopRequire(__webpack_require__(14)),ArticleService=_interopRequire(__webpack_require__(15)),CategoryFactory=_interopRequire(__webpack_require__(16)),CategoryCtrl=_interopRequire(__webpack_require__(17)),ModuleFactory=_interopRequire(__webpack_require__(52)),ModuleDirective=_interopRequire(__webpack_require__(53)),AutoResizeVideo=_interopRequire(__webpack_require__(54)),PandaReplaceEmojisDirective=_interopRequire(__webpack_require__(18)),_componentsModuleDrag_drop_moduleDirective=__webpack_require__(55),DragModuleDirective=_componentsModuleDrag_drop_moduleDirective.DragModuleDirective,DropModuleDirective=_componentsModuleDrag_drop_moduleDirective.DropModuleDirective,PageFactory=_interopRequire(__webpack_require__(19)),PageCtrl=_interopRequire(__webpack_require__(20)),CollectionFactory=_interopRequire(__webpack_require__(21)),CollectionFileFactory=_interopRequire(__webpack_require__(22)),CollectionCtrl=_interopRequire(__webpack_require__(23)),CollectionFileCtrl=_interopRequire(__webpack_require__(24)),UserSelectorDirective=_interopRequire(__webpack_require__(57)),UserFactory=_interopRequire(__webpack_require__(25)),ProfileCtrl=_interopRequire(__webpack_require__(26)),CommentFactory=_interopRequire(__webpack_require__(27)),CollectionFileCommentFactory=_interopRequire(__webpack_require__(28)),GreetingFactory=_interopRequire(__webpack_require__(29)),GreetingsCtrl=_interopRequire(__webpack_require__(30)),AdministrationCtrl=_interopRequire(__webpack_require__(31)),SettingsCtrl=_interopRequire(__webpack_require__(32)),CategoriesSettingsCtrl=_interopRequire(__webpack_require__(33)),categoriesSettingsNavigation=_interopRequire(__webpack_require__(34)),subcategoriesListing=_interopRequire(__webpack_require__(35)),PasswordRecoveryCtrl=_interopRequire(__webpack_require__(36)),ArticleOverviewController=_interopRequire(__webpack_require__(37)),ErrorPageCtrl=_interopRequire(__webpack_require__(38)),FeedbackCtrl=_interopRequire(__webpack_require__(39)),ActivityFactory=_interopRequire(__webpack_require__(61)),ActivityDirective=_interopRequire(__webpack_require__(62)),TriviaDirective=_interopRequire(__webpack_require__(63)),TriviaFactory=_interopRequire(__webpack_require__(64)),VplanDirective=_interopRequire(__webpack_require__(65)),EventsDirective=_interopRequire(__webpack_require__(66)),UserListDirective=_interopRequire(__webpack_require__(67)),ShareboxDirective=_interopRequire(__webpack_require__(58)),hasLikesService=_interopRequire(__webpack_require__(40)),hasCommentsService=_interopRequire(__webpack_require__(41)),ItemDirective=_interopRequire(__webpack_require__(59)),BnLazySrc=_interopRequire(__webpack_require__(42)),pandaGreetingPositioningDirective=_interopRequire(__webpack_require__(43)),PandaScrollfixDirective=_interopRequire(__webpack_require__(44)),ContentTransformerService=_interopRequire(__webpack_require__(45)),_servicesFilters=__webpack_require__(46),RemoveHtmlFilter=_servicesFilters.RemoveHtmlFilter,OrderObjectsByFilter=_servicesFilters.OrderObjectsByFilter,UaDetectorFilter=_servicesFilters.UaDetectorFilter,RemoveStylesContenteditableDirective=_interopRequire(__webpack_require__(56)),CookieInfoPanelDirective=_interopRequire(__webpack_require__(60)),ContenteditableDirective=_interopRequire(__webpack_require__(47));angular.module("contenteditable",[]).directive("contenteditable",ContenteditableDirective),angular.module("medienportal",["ezfb","googleplus","angulartics","angulartics.google.analytics","ngFileUpload","angular-loading-bar","ngTagsInput","Mac","ngAnimate","ngRoute","ngCookies","ngSanitize","ngTouch","angular-inview","contenteditable","ngDialog","toaster"]).factory("Account",AccountFactory).controller("HomepageCtrl",HomepageCtrl).controller("ApplicationCtrl",ApplicationCtrl).controller("HeaderCtrl",HeaderCtrl).controller("NewPageCtrl",NewPageCtrl).controller("FooterCtrl",FooterCtrl).controller("UserbarCtrl",UserbarCtrl).controller("UserLoginCtrl",UserLoginCtrl).controller("UserRegisterCtrl",UserRegisterCtrl).service("DataCache",DataCache).service("SearchService",SearchService).service("MainSearch",["SearchService",function(SearchService){return new SearchService}]).directive("searchResults",SearchResultsDirective).controller("SearchPageCtrl",SearchPageCtrl).service("RealTime",RealTimeService).service("ArticleManager",ArticleService).service("LayoutManager",LayoutManagerService).service("ThemeManager",ThemeManagerService).service("SocialManager",SocialManagerService).service("ScraperManager",ScraperManagerService).service("hasLikes",hasLikesService).service("hasComments",hasCommentsService).factory("Category",CategoryFactory).controller("CategoryCtrl",CategoryCtrl).factory("Module",ModuleFactory).directive("module",ModuleDirective).directive("dragModule",DragModuleDirective).directive("dropModule",DropModuleDirective).directive("autoResizeVideo",AutoResizeVideo).directive("pandaReplaceEmojis",PandaReplaceEmojisDirective).factory("Page",PageFactory).controller("PageCtrl",PageCtrl).factory("Collection",CollectionFactory).factory("CollectionFile",CollectionFileFactory).controller("CollectionCtrl",CollectionCtrl).controller("CollectionFileCtrl",CollectionFileCtrl).directive("userSelector",UserSelectorDirective).factory("User",UserFactory).controller("ProfileCtrl",ProfileCtrl).factory("Comment",CommentFactory).factory("CollectionFileComment",CollectionFileCommentFactory).controller("GreetingsCtrl",GreetingsCtrl).factory("Greeting",GreetingFactory).controller("ArticleOverviewCtrl",ArticleOverviewController).controller("AdministrationCtrl",AdministrationCtrl).controller("SettingsCtrl",SettingsCtrl).controller("CategoriesSettingsCtrl",CategoriesSettingsCtrl).directive("categoriesSettingsNavigation",categoriesSettingsNavigation).directive("subcategoriesListing",subcategoriesListing).controller("PasswordRecoveryCtrl",PasswordRecoveryCtrl).controller("ErrorPageCtrl",ErrorPageCtrl).controller("FeedbackCtrl",FeedbackCtrl).factory("Activity",ActivityFactory).directive("activityBox",ActivityDirective).factory("Trivia",TriviaFactory).directive("triviaBox",TriviaDirective).directive("boxUserList",UserListDirective).directive("eventsBox",EventsDirective).directive("vPlan",VplanDirective).directive("item",ItemDirective).directive("sharebox",ShareboxDirective).directive("bnLazySrc",BnLazySrc).directive("contenteditable",RemoveStylesContenteditableDirective).directive("pandaScrollfix",PandaScrollfixDirective).directive("pandaGreetingPositioning",pandaGreetingPositioningDirective).service("ContentTransformer",ContentTransformerService).filter("removeHtml",RemoveHtmlFilter).filter("orderObjectsBy",OrderObjectsByFilter).filter("uaDetector",UaDetectorFilter).directive("cookieInfoPanel",CookieInfoPanelDirective).config(["$httpProvider","$sceDelegateProvider","$routeProvider","$cookiesProvider","$locationProvider","ezfbProvider","GooglePlusProvider","$analyticsProvider","$provide",function($httpProvider,$sceDelegateProvider,$routeProvider,$cookiesProvider,$locationProvider,ezfbProvider,GooglePlusProvider,$analyticsProvider,$provide){window.moment.locale("de"),$httpProvider.defaults.useXDomain=!0,$sceDelegateProvider.resourceUrlWhitelist(["data:**","http://mport.al/**","http*://d1wvxt7nfpuoql.cloudfront.net/**","http*://d31gjszttcxytd.cloudfront.net/**","http*://d1dvvsd95n8302.cloudfront.net/**","http*://w.soundcloud.com/**","http*://www.facebook.com/**","http*://e.issuu.com/**","self"]),delete $httpProvider.defaults.headers.common["X-Requested-With"],$cookiesProvider.defaults.domain=window.configuration.app.cookie_domain,$cookiesProvider.defaults.expires=moment().add(2,"weeks").toDate(),$httpProvider.defaults.headers.common["X-PANDA-ACCOUNT-ID"]=window.account._id,$httpProvider.interceptors.push(["$q","$injector","$rootScope","toaster",function($q,$injector,$rootScope,toaster){return{responseError:function(response){var cache=$injector.get("DataCache");if(401===response.status&&cache.logout(),500===response.status||400===response.status){var error=new Error("Error from Server: "+JSON.stringify(response));toaster.pop("error","Fehler!",error)}return 404===response.status&&$rootScope.open("/404"),response}}}]),$provide.decorator("$exceptionHandler",["$delegate","$window",function($delegate,$window){return function(exception,cause){$window.trackJs&&$window.trackJs.track(exception),$delegate(exception,cause)}}]);var loginResolves={user:["DataCache",function(DataCache){return DataCache.getFirstLoginAttempt()}]};$locationProvider.html5Mode(configuration.app.html5mode).hashPrefix(configuration.app.hashprefix),$routeProvider.when("/",{controller:"HomepageCtrl as homepage",templateUrl:"app/homepage/homepage.html"}).when("/page/:id",{controller:"PageCtrl as page",templateUrl:"app/page/page.html"}).when("/category/:id/:subcategory_id?",{controller:"CategoryCtrl as category",templateUrl:"app/category/category.html"}).when("/collection/:id",{controller:"CollectionCtrl as collection",templateUrl:"app/collection/collection.html"}).when("/collection/:id/file/:file_id",{controller:"CollectionFileCtrl as collectionfile",templateUrl:"app/collection/collectionfile.html"}).when("/search/:searchtext?",{controller:"SearchPageCtrl as search",templateUrl:"app/search/searchpage.html"}).when("/profile",{controller:"ProfileCtrl as profile",templateUrl:"app/user/profile.html"}).when("/profile/:id",{controller:"ProfileCtrl as profile",templateUrl:"app/user/profile.html"}).when("/login",{controller:"UserLoginCtrl as login",templateUrl:"app/user/login.html"}).when("/register",{controller:"UserRegisterCtrl as register",templateUrl:"app/user/register.html"}).when("/user/password/recover/:token",{controller:"PasswordRecoveryCtrl as pwRecovery",templateUrl:"app/user/pw_recovery.html"}).when("/administration",{controller:"AdministrationCtrl as administration",templateUrl:"app/administration/administration.html",resolve:loginResolves}).when("/administration/users",{controller:"SettingsCtrl as settings",templateUrl:"app/administration/users.html",resolve:loginResolves}).when("/administration/categories",{controller:"CategoriesSettingsCtrl as settings",templateUrl:"app/administration/categories/categories.html",resolve:loginResolves}).when("/administration/categories/:categoryId",{controller:"CategoriesSettingsCtrl as settings",templateUrl:"app/administration/categories/categories.html",resolve:loginResolves}).when("/administration/trivia",{controller:"SettingsCtrl as settings",templateUrl:"app/administration/trivia.html",resolve:loginResolves}).when("/administration/account",{controller:"SettingsCtrl as settings",templateUrl:"app/administration/account.html",resolve:loginResolves}).when("/administration/themes",{controller:"SettingsCtrl as settings",templateUrl:"app/administration/themes.html",resolve:loginResolves}).when("/article_overview",{controller:"ArticleOverviewCtrl as overviews",templateUrl:"app/article_overview/article_overview.html"}).when("/faq",{templateUrl:"app/faq/faq.html"}).when("/privacy",{templateUrl:"app/privacy/privacy.html"}).when("/impress",{templateUrl:"app/impress/impress.html"}).when("/404",{templateUrl:"app/error_pages/404.html",controller:"ErrorPageCtrl as error"}).otherwise({redirectTo:"/404"}),ezfbProvider.setInitParams({appId:configuration.facebook.appId}),GooglePlusProvider.init({clientId:configuration.google.clientId,scopes:["https://www.googleapis.com/auth/plus.login","https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/userinfo.email"].join(" ")})}]).run(["$rootScope","$location","$window","$cookies","$http","DataCache","RealTime",function($rootScope,$location,$window,$cookies,$http,DataCache,RealTime){$rootScope.baseUrl="//"+$window.location.host;var sessionId=$cookies.get("X-PANDA-AUTH-SESSION-ID");sessionId&&($http.defaults.headers.common["X-PANDA-AUTH-SESSION-ID"]=sessionId),$rootScope.open=function(location){$location.path(location),$rootScope.$$phase||$rootScope.$apply()},$rootScope.$on("$routeChangeStart",function(event,next,current){if($rootScope.currentCategory=null,$rootScope.currentCollection=null,DataCache.currentPage=null,$rootScope.currentPage=null,$rootScope.currentCollectionFile=null,$rootScope.fullsize=!1,$rootScope.showLoader=!0,current&&window.sessionStorage){var historyEntries;try{historyEntries=JSON.parse(window.sessionStorage.getItem("lastPagePositionHistory"))}catch(e){historyEntries=[]}historyEntries||(historyEntries=[]);var lastPagePosition={path:window.location.pathname,posx:window.scrollX,posy:window.scrollY};historyEntries.push(lastPagePosition),historyEntries=historyEntries.slice(-2),window.sessionStorage.setItem("lastPagePositionHistory",JSON.stringify(historyEntries))}}),$rootScope.$on("$routeChangeSuccess",function(e,current){if(current.$$route.originalPath.match(/^\/search/)||$location.search("f",null),$rootScope.showLoader=!1,DataCache.current_user.edit_mode&&(current.$$route.controller.match(/(page|collection)$/)||(DataCache.current_user.edit_mode=!1)),sessionStorage&&sessionStorage.getItem("lastPagePositionHistory")){var historyEntries;try{historyEntries=JSON.parse(sessionStorage.getItem("lastPagePositionHistory"))}catch(__error){return}var lastPagePosition=historyEntries.slice(-2)[0];lastPagePosition&&lastPagePosition.path===window.location.pathname&&setTimeout(function(){window.scrollTo(lastPagePosition.posx,lastPagePosition.posy)},500)}window.Intercom&&window.Intercom("update")}),RealTime.init(),$rootScope.appReady=!1,DataCache.loadContent(),window.onbeforeunload=function(e){localStorage.setItem("lastclose",new Date),DataCache.current_user.isCoworker()&&DataCache.pendingRequests.length>0&&(e.returnValue="Es sind noch nicht alle Anfragen beendet. Es könnten Veränderungen verloren gehen. Trotzdem beenden?")}}]),window.currentAccount=window.account,window.currentAccount.id=window.account._id},function(module,exports,__webpack_require__){"use strict";var _defineProperty=function(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0})},_createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},hasMongoId=__webpack_require__(68).hasMongoId,AccountFactory=function($rootScope,$http){var Account=function(){function Account(){var data=void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,Account),this._id=data._id,this.title=data.title,this.name=data.name,this.config=data.config||{},hasMongoId(this)}return _createClass(Account,{setBanner:{value:function($files){var _this=this;if($files&&!($files.length<1)){var images_sizes=["small","small@2x","middle","middle@2x"],file=$files[0],reader=new FileReader;reader.onload=function(e){var img=document.getElementById("config_banner_picture_dropzone");img.src=e.target.result;var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");ctx.drawImage(img,0,0,400,88);var imageUrl=canvas.toDataURL("image/jpeg"),sizes_object={};images_sizes.forEach(function(size){sizes_object[size]=imageUrl}),_this.config.banner=sizes_object,$rootScope.$$phase||$rootScope.$apply()},reader.readAsDataURL(file),this.uploadBanner(file)}}},uploadBanner:{value:function(file){var _this=this,url=api_endpoint+"/account/banner",data=new FormData;data.append("file",file),$http({method:"POST",url:url,data:data,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(data){return _this.update(data)})}},update:{value:function(data){var _this=this;Object.keys(this).forEach(function(key){void 0!==data[key]&&(_this[key]=data[key])})}},getBanner:{value:function(){var size=window.devicePixelRatio>1?"banner@2x":"banner";return this.config.banner&&this.config.banner&&this.config.banner.versions?this.config.banner.versions[size]&&this.config.banner.versions[size].absoluteUrl:this.config.banners&&this.config.banners.length>0?this.config.banners[0][size]:void 0}},setConfig:{value:function(key,val){var _this=this,url=api_endpoint+"/account/config",data={config:_defineProperty({},key,val)};$http.patch(url,data).success(function(_data){return _this.update(_data.account)})}},getConfig:{value:function(key){return this.config[key]}},getUsage:{value:function(){return $http.get(""+api_endpoint+"/usage").then(function(response){if(200===response.status)return response.data;throw response.data.error||response.data})}}}),Account}();return Account};module.exports=AccountFactory},function(module){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},ApplicationCtrl=function ApplicationCtrl(LayoutManager,SocialManager,ThemeManager){_classCallCheck(this,ApplicationCtrl),this.lm=LayoutManager,this.sm=SocialManager,this.ThemeManager=ThemeManager};ApplicationCtrl.$inject=["LayoutManager","SocialManager","ThemeManager"],module.exports=ApplicationCtrl},function(module){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},HomepageCtrl=function HomepageCtrl($filter,$scope,$http,DataCache,Page,LayoutManager){var _this=this;_classCallCheck(this,HomepageCtrl),this.cache=DataCache,this.pagesAndCollections=function(){var homepageFilter=function(item){var category=DataCache.categories[item.category_id],hideOnHomepage=item.config&&category&&category.config.hide_from_homepage===!0,isTopStory=item.id===DataCache.topstoryId,isPublished="PUBLISHED"===item.status;return isPublished&&!hideOnHomepage&&!isTopStory},pages=Object.keys(DataCache.pages).map(function(pid){return DataCache.pages[pid]}).filter(homepageFilter),collections=Object.keys(DataCache.collections).map(function(pid){return DataCache.collections[pid]}).filter(homepageFilter);return $filter("orderBy")(pages.concat(collections),"created_at",!0)},this.topstory=function(){var id=DataCache.topstoryId;return DataCache.pages[id]||DataCache.collections[id]||null},this.comments=DataCache.comments,this.moment=moment,this.greetings=function(){return Object.keys(DataCache.greetings).map(function(greetingid){return DataCache.greetings[greetingid]})},this.greetingsPage=function(){var greetingsPages=Object.keys(this.cache.categories).filter(function(cat){var category=this.cache.categories[cat];return"greetingsPage"===category.config.pageType});return greetingsPages.length>0?greetingsPages[0]:!1},$scope.$watch(function(){return Object.keys(_this.comments).length},function(){_this.latestComments=Object.keys(_this.comments).map(function(commentId){return DataCache.comments[commentId]})},!0),this.sendFeedback=function(message){$http.post(api_endpoint+"/feedback",{message:message}),$scope.feedback.message=""},LayoutManager.setBannerImage(DataCache.account.getBanner())};HomepageCtrl.$inject=["$filter","$scope","$http","DataCache","Page","LayoutManager"],module.exports=HomepageCtrl},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},UserLoginCtrl=function(){function UserLoginCtrl($scope,$http,$timeout,DataCache,ezfb,GooglePlus,toaster){_classCallCheck(this,UserLoginCtrl),this.cache=DataCache,this.$scope=$scope,this.$http=$http,this.status="anmelden",this.ezfb=ezfb,this.GooglePlus=GooglePlus,this.$timeout=$timeout,this.toaster=toaster}return _createClass(UserLoginCtrl,{handlePositiveResponse:{value:function(data){console.log(data),this.$scope.closeThisDialog?this.$scope.closeThisDialog():this.$scope.open("/")}},handleNegativeResponse:{value:function(data){var _this=this;this.status="object"==typeof data.data&&data.data.error?data.data.error.msg:data.data,console.log(this.status),this.$timeout(function(){_this.status="anmelden"},3e3)}},facebookLogin:{value:function(){var _this=this;this.status="Bitte warten ...";var response=function(response){"connected"===response.status&&_this.cache.loginUserViaFacebook(response).then(function(data){200===data.status?_this.handlePositiveResponse(data):_this.handleNegativeResponse(data)})};this.ezfb.login({scope:"email"}).then(response)}},gPlusLogin:{value:function(){var _this=this;this.status="Bitte warten ...",this.GooglePlus.login().then(function(response){return response instanceof Error?_this.toaster.pop("error","Fehler",response.message):void _this.cache.loginUserViaGoogle(response).then(function(data){200===data.status?_this.handlePositiveResponse(data):_this.handleNegativeResponse(data)})})}},emailLogin:{value:function(){var _this=this;return this.loginuser&&this.loginuser.email&&this.loginuser.password?(this.status="Bitte warten ...",void this.cache.loginUserViaEmail(this.loginuser.email,this.loginuser.password).then(function(data){200===data.status?_this.handlePositiveResponse(data):_this.handleNegativeResponse(data)})):this.handleNegativeResponse({data:"Bitte fülle Email und Passwort aus."})}},requestPasswordRecoveryPage:{value:function(){this.step="request_password_recovery"}},requestPWRecovery:{value:function(email){var _this=this;this.pw_recovery_status=!1,email&&this.$http.post(api_endpoint+"/password_request",{email:email}).then(function(response){_this.pw_recovery_status=200===response.status?"OK":response.data},function(){_this.pw_recovery_status="Es ist ein unbekannter Fehler aufgetreten. Versuche es später noch einmal."})}},mainPage:{value:function(){this.step=!1}}}),UserLoginCtrl}();UserLoginCtrl.$inject=["$scope","$http","$timeout","DataCache","ezfb","GooglePlus","toaster"],module.exports=UserLoginCtrl},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},UserRegisterCtrl=function(){function UserRegisterCtrl($rootScope,$scope,$timeout,$location,$http,$cookies,ezfb,GooglePlus,DataCache,User,toaster){_classCallCheck(this,UserRegisterCtrl),this.$rootScope=$rootScope,this.$scope=$scope,this.$timeout=$timeout,this.$location=$location,this.$http=$http,this.$cookies=$cookies,this.ezfb=ezfb,this.GooglePlus=GooglePlus,this.DataCache=DataCache,this.User=User,this.toaster=toaster,this.avatar={selected:1},this.status="registrieren",this.userInfo={},this.step=0}return _createClass(UserRegisterCtrl,{getName:{value:function(){var name=this.userInfo.name;if(!name)return{};var comps=name.split(" ");return comps.length<2?{first_name:comps[0]}:{last_name:comps.pop(),first_name:comps.join(" ")}}},handlePositiveResponse:{value:function(res){var user=new this.User(res.data),sessionToken=res.headers("X-PANDA-AUTH-SESSION-ID-SET");this.step=1,this.user=user,this.$http.defaults.headers.common["X-PANDA-AUTH-SESSION-ID"]=sessionToken}},handleNegativeResponse:{value:function(data){var _this=this;this.status="object"==typeof data.data&&data.data.error?data.data.error.msg:data.data,console.log(this.status),this.$timeout(function(){_this.status="anmelden"},3e3)}},facebookLogin:{value:function(){var _this=this;this.status="Bitte warten ...";var response=function(response){"connected"===response.status&&_this.DataCache.loginUserViaFacebook(response).then(function(data){200===data.status?_this.handlePositiveResponse(data):_this.handleNegativeResponse(data)})};this.ezfb.login({scope:"email"}).then(response)}},gPlusLogin:{value:function(){var _this=this;this.status="Bitte warten ...",this.GooglePlus.login().then(function(response){return response instanceof Error?_this.toaster.pop("error","Fehler",response.message):void _this.DataCache.loginUserViaGoogle(response).then(function(data){200===data.status?_this.handlePositiveResponse(data):_this.handleNegativeResponse(data)})})}},doRegister:{value:function(){var _this=this;this.status="Du wirst registriert ...";var userInfo={email:this.userInfo.email,first_name:this.getName().first_name,last_name:this.getName().last_name},user=new this.User(userInfo);user.password=this.userInfo.password,user.save().then(function(data){var user=data.user,sessionToken=data.sessionToken,error=data.error;user&&sessionToken?(_this.step=2,_this.user=user,_this.$cookies.put("X-PANDA-AUTH-SESSION-ID",sessionToken),_this.$http.defaults.headers.common["X-PANDA-AUTH-SESSION-ID"]=sessionToken):(_this.status=error||"Registrierung fehlgeschlagen.",_this.$timeout(function(){_this.status="registrieren"},5e3))})}},setAvatarFromHdd:{value:function(files){var _this=this;if(files&&!(files.length<1)){var file=files[0],fr=new FileReader;fr.onload=function($e){var canvas=document.createElement("canvas"),context=canvas.getContext("2d"),image=new Image;canvas.width=200,canvas.height=200,image.onload=function(){var dims=function(img){var width,height;return img.width>img.height?(height=200,width=parseInt(200*(img.width/img.height),10)):(width=200,height=parseInt(200*(img.height/img.width),10)),{width:width,height:height}}(image);context.drawImage(image,0,0,dims.width,dims.height),_this.avatar.custom_source=canvas.toDataURL(),_this.avatar.selected="custom",_this.$scope.$apply()},image.src=$e.target.result},fr.readAsDataURL(file)}}},isWebcamAvailable:{value:function(){return window.navigator.webkitGetUserMedia||window.navigator.mozGetUserMedia||window.navigator.msGetUserMedia||window.navigator.getUserMedia}},setupAvatarscreenFromWebcam:{value:function(){var _this=this;return window.navigator.getUserMedia=window.navigator.getUserMedia||window.navigator.webkitGetUserMedia||window.navigator.mozGetUserMedia||window.navigator.msGetUserMedia,window.navigator.getUserMedia?(this.step=2.5,void window.navigator.getUserMedia({video:{mandatory:{},optional:[{minAspectRatio:"1"},{maxAspectRatio:"1"}]}},function(localMediaStream){var video=document.getElementById("webcam-screen-video");localMediaStream&&(_this.localMediaStream=localMediaStream,video.src=window.URL&&window.URL.createObjectURL(localMediaStream)||localMediaStream,video.play(),_this.$scope.$apply())},function(err){_this.localMediaStream=null,_this.step=2,console.error(err)})):!1}},saveUserAvatarFromWebcam:{value:function(){var video=document.getElementById("webcam-screen-video");if(this.localMediaStream){var canvas=document.createElement("canvas");canvas.width=200,canvas.height=200;var context=canvas.getContext("2d");context.drawImage(video,0,0,200,200),this.avatar.custom_source=canvas.toDataURL(),this.avatar.selected="custom",this.step=2}}},getAvatarObjectFromCustomNr:{value:function(i){return{small:"/assets/images/profilNo"+i.toString()+".jpg","small@2x":"/assets/images/profilNo"+i.toString()+".jpg",middle:"/assets/images/profilNo"+i.toString()+".jpg","middle@2x":"/assets/images/profilNo"+i.toString()+".jpg",big:"/assets/images/profilNo"+i.toString()+".jpg","big@2x":"/assets/images/profilNo"+i.toString()+".jpg"}}},saveUserAvatar:{value:function(){this.step=3,"custom"===this.avatar.selected?this.user.uploadImage(this.avatar.file?this.avatar.file:this.avatar.custom_source):(this.user.avatar=this.getAvatarObjectFromCustomNr(this.avatar.selected),this.user.save("avatar"))}},saveUserClass:{value:function(){if(!this.newklass||!this.newklass.first)return void this.closeModal();var first=this.newklass.first,second=this.newklass.second;this.user.klass=second?first+"/"+second:first,this.user.save("klass"),this.closeModal()}},closeModal:{value:function(){this.$scope.closeThisDialog?this.$scope.closeThisDialog():this.$scope.open("/"),this.user&&(this.DataCache.current_user=this.user,this.$rootScope.$$phase||this.$rootScope.$apply())}}}),UserRegisterCtrl}();module.exports=UserRegisterCtrl},function(module){"use strict";var DataCache=function($http,$cookies,$q,ezfb,$timeout,Account,Page,Module,Comment,Category,Collection,User,Greeting,Activity,Trivia,toaster){var cache=this;window.cache=this;var logged_out_user=new User;this.pendingRequests=$http.pendingRequests,this.reset=function(){cache.pages={},cache.randomPages={},cache.modules=[],cache.comments={},cache.greetings={},cache.categories={},cache.collections={},cache.users={},cache.topstoryId=null,cache.available_tags=[],cache.available_topics=[],cache.activities={},cache.trivias=[],cache.account=new Account(window.account)},this.reset(),cache.current_user=logged_out_user;var setIntercomUser=function(user){window.Intercom&&window.Intercom("boot",{app_id:"d6yc6ucp",name:user.name,user_id:user.id,email:user.email,created_at:parseInt(new Date(user.created_at).getTime()/1e3,10)})},firstLoginAttempt=$q.defer();$http.get(api_endpoint+"/user/me").success(function(userData){firstLoginAttempt.resolve(),userData.user&&(cache.current_user=new User(userData.user),setIntercomUser(cache.current_user),cache.loadUserSpecific())}),this.getFirstLoginAttempt=function(){return firstLoginAttempt.promise},this.loadContent=function(){this.loadInitialContent(),this.loadComments(),this.loadGreetings()},this.loadInitialContent=function(){var deferred=$q.defer();return $http.get(api_endpoint+"/home").success(function(data){cache.available_tags=data.tags||[],cache.available_topics=data.topics||[],data.pages.forEach(function(pageData){var page=new Page(pageData);cache.pages[page.id]=page}),data.randomPages.forEach(function(pageData){var page=new Page(pageData);cache.randomPages[page.id]=page}),function(){data.topstory&&data.topstory.page?(cache.pages[data.topstory.page._id]=new Page(data.topstory.page),cache.topstoryId=data.topstory.page._id):data.topstory&&data.topstory.collection&&(cache.collections[data.topstory.collection._id]=new Collection(data.topstory.collection),cache.topstoryId=data.topstory.collection._id)}(),data.collections.forEach(function(collectionData){var collection=new Collection(collectionData);cache.collections[collection.id]=collection
}),data.categories.forEach(function(categoryData){var category=new Category(categoryData);cache.categories[category.id]=category}),data.users.forEach(function(userData){var user=new User(userData);cache.users[user.id]=user}),data.activities.forEach(function(activityData){var activity=new Activity(activityData);cache.activities[activity.id]=activity}),deferred.resolve()}),deferred.promise},this.makeItemProminent=function(item){var url=api_endpoint+"/"+item.modelName.toLowerCase()+"/"+item.id+"/topstory";$http.put(url).then(function(data){200===data.status&&(cache.topstoryId=item.id)})},this.loadPages=function(){var deferred=$q.defer();return $http.get(api_endpoint+"/pages").success(function(data){data.comments.forEach(function(commentData){var comment=new Comment(commentData);cache.comments[comment.id]=comment}),data.pages.forEach(function(pageData){cache.pages.push(new Page(pageData))}),deferred.resolve()}),deferred.promise},this.loadTags=function(){var deferred=$q.defer();return $http.get(api_endpoint+"/tags").success(function(data){cache.available_tags=data.tags,deferred.resolve()}),deferred.promise},this.loadComments=function(){var deferred=$q.defer();return $http.get(api_endpoint+"/comments").success(function(data){data.comments.forEach(function(commentData){var comment=new Comment(commentData);cache.comments[comment.id]=comment}),deferred.resolve()}),deferred.promise},this.loadGreetings=function(){var deferred=$q.defer();return $http.get(api_endpoint+"/greetings").success(function(data){data.greetings.forEach(function(greetingsData){var greeting=new Greeting(greetingsData);cache.greetings[greeting.id]=greeting}),deferred.resolve()}),deferred.promise},this.loadPage=function(page_id){var deferred=$q.defer(),page=cache.pages[page_id];return page&&page.__hasBeenFullyLoaded?($timeout(function(){deferred.resolve(page)}),deferred.promise):($http.get(api_endpoint+"/page/"+page_id).then(function(response){var data=response.data;data.modules.forEach(function(moduleData){cache.modules.push(new Module(moduleData))}),data.comments.forEach(function(commentData){var comment=new Comment(commentData);cache.comments[comment.id]=comment});var newPage=new Page(data.page);cache.pages[newPage.id]=newPage,newPage.__hasBeenFullyLoaded=!0,deferred.resolve(newPage)},function(data){deferred.reject(data)}),deferred.promise)},this.loadCollection=function(collection_id){var deferred=$q.defer(),collection=cache.collections[collection_id];return collection&&collection.__hasBeenFullyLoaded?($timeout(function(){deferred.resolve(collection)}),deferred.promise):($http.get(api_endpoint+"/collection/"+collection_id).then(function(response){var data=response.data;data.comments.forEach(function(commentData){var comment=new Comment(commentData);cache.comments[comment.id]=comment});var collection=new Collection(data.collection);cache.collections[collection.id]=collection,collection.__hasBeenFullyLoaded=!0,deferred.resolve(collection)},function(data){deferred.reject(data)}),deferred.promise)},this.loadUsers=function(){var deferred=$q.defer();return $http.get(api_endpoint+"/users").success(function(data){data.users.forEach(function(userData){var user=new User(userData);cache.users[user.id]=user}),deferred.resolve()}),deferred.promise},this.loadCategories=function(){var deferred=$q.defer();return $http.get(api_endpoint+"/categories").success(function(data){data.categories.forEach(function(categoryData){var category=new Category(categoryData);cache.categories[category.id]=category}),deferred.resolve()}),deferred.promise},this.loadCollections=function(){var deferred=$q.defer();return $http.get(api_endpoint+"/collections").success(function(data){data.collections.forEach(function(collectionData){var collection=new Collection(collectionData);cache.collections[collection.id]=collection}),deferred.resolve()}),deferred.promise},this.loadTrivias=function(){return $http.get(api_endpoint+"/trivias").then(function(response){cache.trivias=response.data.trivias.map(function(data){return new Trivia(data)})})},this.deletePage=function(page){var deferred=$q.defer();return $http["delete"](api_endpoint+"/page/"+page.id).success(function(){delete cache.pages[page.id],deferred.resolve()}),deferred.promise},this.deleteCollection=function(collection){var deferred=$q.defer();return $http["delete"](api_endpoint+"/collection/"+collection.id).success(function(){delete cache.collections[collection.id],deferred.resolve()}),deferred.promise},this.deleteCategory=function(category){var deferred=$q.defer();return $http["delete"](api_endpoint+"/category/"+category.id).success(function(){delete cache.categories[category.id],deferred.resolve()}),deferred.promise},this.getUser=function(id){var deferred=$q.defer(),user=this.users[id];if(!user){var u=new User;return u.id=id,u.reload()}return deferred.resolve(user),deferred.promise},this.getUserViaFacebook=function(response){return $http.post(api_endpoint+"/login/fb",response)},this.getUserViaGoogle=function(response){return $http.post(api_endpoint+"/login/google",{authResponse:{access_token:response&&response.access_token}})},this.loginUserViaFacebook=function(response){return cache.getUserViaFacebook(response).success(function(userData,status,headers){cache.loginUser(new User(userData),headers("X-PANDA-AUTH-SESSION-ID-SET"))}).error(function(){cache.logout()})},this.loginUserViaGoogle=function(response){return cache.getUserViaGoogle(response).success(function(userData,status,headers){cache.loginUser(new User(userData),headers("X-PANDA-AUTH-SESSION-ID-SET"))}).error(function(){cache.logout()})},this.loginUserViaEmail=function(email,password){return $http.post(api_endpoint+"/login/email",{email:email,password:password}).success(function(userData,status,headers){cache.loginUser(new User(userData),headers("X-PANDA-AUTH-SESSION-ID-SET"))}).error(function(){cache.logout()})},this.loginUser=function(user,sessionId){$http.defaults.headers.common["X-PANDA-AUTH-SESSION-ID"]=sessionId,$cookies.put("X-PANDA-AUTH-SESSION-ID",sessionId),cache.current_user=user,cache.loadUserSpecific(),cache.loadInitialContent(),window.trackJs&&window.trackJs.configure({customer:user.id}),setIntercomUser(cache.current_user)},this.loadUserSpecific=function(){var cache=this,userId=cache.current_user&&cache.current_user.id;userId&&$http.get(api_endpoint+"/home/"+userId).then(function(response){200===response.status&&(response.data.pages.forEach(function(pageData){var page=new Page(pageData);cache.pages[page.id]=page}),response.data.collections.forEach(function(collectionData){var collection=new Collection(collectionData);cache.collections[collection.id]=collection}))})},this.logout=function(){cache.current_user=logged_out_user,delete $http.defaults.headers.common["X-PANDA-AUTH-SESSION-ID"],$cookies.remove("X-PANDA-AUTH-SESSION-ID"),window.trackJs&&window.trackJs.configure({customer:""}),this.reset(),this.loadContent(),toaster.pop("success","Erfolgreich abgemeldet","Du wurdest erfolgreich vom Medienportal abgemeldet.")},this.moduleTypes=[{type:"text",content:"Gib hier den Text ein!",title:"",name:"Text",_description:"Füge einen Textabschnitt ein",_image:"../../assets/images/icons/text.png"},{type:"image",content:"Sag etwas zum Foto (z.B. Fotograf)!",title:"",name:"Bild",_description:"Füge ein großes Bild als Eye-Catcher hinzu.",_image:"../../assets/images/icons/image.png"},{type:"quote",content:"Gib hier den Text für das Zitat ein!",title:"",name:"Zitat",_description:"Hebe interessante Zitate hervor.",_image:"../../assets/images/icons/quote.png"},{type:"subhead",content:"Gib hier den Text für die Überschrift ein!",title:"",name:"Überschrift",_description:"Überschriften helfen dir, deinen Beitrag zu strukturieren.",_image:"../../assets/images/icons/heading.png"},{type:"interview",title:"Gib hier den Text für die Frage ein!",content:"Gib hier den Text für die Antwort ein!",name:"Frage + Antwort",_description:"Eine Kombination aus Frage und Antwort.",_image:"../../assets/images/icons/interview.png"},{type:"vidlyvideo",title:"",content:"Sag etwas zum Video (z.B. Autoren)!",name:"Video",_description:"Fessele die Zuschauer mit einem Video!",_image:"../../assets/images/icons/video.png"},{type:"audio",title:"",content:"Sag etwas zum Audiobeitrag (z.B. Autoren)!",name:"Audio",_description:"Fessele die Zuschauer mit einem Audiobeitrag!",_image:"../../assets/images/icons/sound.png"},{type:"soundcloudaudio",title:"",content:"",name:"Audio (Soundcloud)",_description:"Füge eine Tondatei (z.B. Hörspiel oder Musik) hinzu.",_image:"../../assets/images/icons/sound.png"},{type:"issuu",title:"",content:"",files:[],name:"Zeitungsausgabe (Issuu)",_description:"Präsentiere PDFs und Printmedien ansprechend.",_image:"../../assets/images/icons/isuu.png"},{type:"link",title:"",content:"",files:[],name:"Verlinkung",_description:"Verlinke passende Inhalte und weiterführende Artikel.",_image:"../../assets/images/icons/link.png"}],this.isModuleTypeAvailable=function(type){return this.moduleTypes.filter(function(t){return t.type===type}).length>0}};module.exports=DataCache},function(module){"use strict";var LayoutManagerService=function($rootScope,$location,$route,DataCache){var DEFAULT_BANNER_IMAGE="/assets/images/banner/standard_banner@2x.png";return{classes:function(){var _classes=[],currentRouteHasNoLayout=function(currentRoute){return currentRoute&&currentRoute.$$route&&(currentRoute.$$route.originalPath.match(/^\/administration/)||currentRoute.$$route.originalPath.match(/^\/article_overview/)||currentRoute.$$route.originalPath.match(/^\/profile/)||currentRoute.$$route.originalPath.match(/^\/user\/password/))?!0:!1};return currentRouteHasNoLayout($route.current)&&_classes.push("nolayout"),DataCache.current_user.isLoggedIn()&&_classes.push("loggedIn"),DataCache.current_user.edit_mode&&_classes.push("editMode"),_classes},showNavbar:function(){return-1===this.classes().indexOf("nolayout")},defaultBannerImage:function(){return DEFAULT_BANNER_IMAGE},bannerStyle:"",bannerUrl:DEFAULT_BANNER_IMAGE,bannerIsHidden:!1,hasBanner:function(){return!(this.bannerIsHidden||this.currentRouteHidesBanner())},currentRouteHidesBanner:function(){var currentRoute=$route.current;return currentRoute&&currentRoute.$$route&&currentRoute.$$route.originalPath.match(/^\/404/)?!0:!1},hideBanner:function(){this.bannerIsHidden=!0},showBanner:function(){this.bannerIsHidden=!1},setBannerImage:function(url){return this.showBanner(),url?(this.bannerUrl=url,void($rootScope.$$phase||$rootScope.$apply())):void(this.url=this.defaultBannerImage())},getBannerStyle:function(){return this.bannerIsHidden?null:{"background-image":"url("+this.getBannerSrc()+")"}},getBannerSrc:function(){return this.bannerIsHidden?null:this.bannerUrl}}};module.exports=LayoutManagerService},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},MP3Theme=function(){function MP3Theme(additionalStyles){var options=void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,MP3Theme),this.styles=additionalStyles,this.title=options.title,this.image=options.image,this.uniqueId=options.uniqueId||"standard"}return _createClass(MP3Theme,{getStyles:{value:function(){return this.styles}}}),MP3Theme}(),themes=[new MP3Theme("",{title:"Standard",image:"/assets/images/themes/theme_01.png",uniqueId:"standard"}),new MP3Theme("\n			body {\n				background-color: #FFF4D8;\n				background-image: url(/assets/images/bg_04.png);\n			}\n			.pagebody .intro {\n					background: #7384B2;\n			}\n			.pagebody h3 {\n				background: #7384B2;\n			}\n			.pagebody {\n  				border: 1px solid #7384B2;\n			}\n		",{title:"Beige Sahne",image:"/assets/images/themes/theme_02.png",uniqueId:"beige1"}),new MP3Theme("\n			body {\n				background-image: url(/assets/images/bg_08.png);\n				background-color: #fff;\n			}\n			.pagebody .intro {\n					background: #EFEFEF;\n					color: #333;\n			}\n			.pagebody h3 {\n				background: #EFEFEF;\n				color: #333;\n			}\n			.pagebody {\n  				border: 1px solid #EFEFEF;\n			}\n		",{title:"retro B/W",image:"/assets/images/themes/theme_03.png",uniqueId:"bw1"}),new MP3Theme("\n			body {\n				background-image: url(/assets/images/bg_11.png);\n				background-color: #a9d8b2;\n			}\n			.pagebody .intro {\n					background: #185A48;\n			}\n			.pagebody h3 {\n				background: #185A48;\n			}\n			.pagebody {\n  				border: 1px solid #185A48;\n			}\n		",{title:"Grüner Hulk",image:"/assets/images/themes/theme_04.png",uniqueId:"medecine"})],LayoutManagerService=function($rootScope,$sce,DataCache){var service={currentTheme:null,setTheme:function(theme){this.currentTheme=theme},getStyles:function(){return $sce.trustAs("css",this.currentTheme.getStyles())},setThemeById:function(id){var found=themes.filter(function(theme){return theme.uniqueId===id});found.length>0?this.setTheme(found[0]):this.setThemeById("standard"),$rootScope.$$phase||$rootScope.$apply()},getAvailableThemes:function(){return themes},loadInitialTheme:function(){this.setThemeById(DataCache.account.getConfig("Mp3ThemeUniqueId")||"standard")},saveCurrentTheme:function(){var i=themes.indexOf(this.currentTheme);i>-1&&DataCache.account.setConfig("Mp3ThemeUniqueId",this.currentTheme.uniqueId)}};return service.loadInitialTheme(),service};module.exports=LayoutManagerService},function(module){"use strict";var SocialManagerService=function($rootScope,$location,$route,$window){var $rs=$rootScope,getAbsoluteUrl=function(url){var img=new Image;return img.src=url,img.src};return{title:function(){return $rs.currentPage?$rs.currentPage.title:$rs.currentCollection?$rs.currentCollection.title:$rs.currentCategory?$rs.currentCategory.title:this.site_title()},description:function(){return $rs.currentPage?$rs.currentPage.config.excerp:this.site_description()},type:function(){return $rs.currentPage?"article":"website"},image:function(){return $rs.currentPage?getAbsoluteUrl($rs.currentPage.getPreview("middle")):$rs.currentCollection?getAbsoluteUrl($rs.currentCollection.getPreview("middle")):this.site_image()},url:function(){return $window.location.href},twitter_handle:function(){return""},site_title:function(){return window.account.name},site_description:function(){return window.account.name},site_image:function(){var image,lgo=document.querySelector(".logo");try{image=window.getComputedStyle(lgo)["background-image"].replace("url(","").replace(")","")}catch(e){image="https://medienportal.org/images/icon.png"}return getAbsoluteUrl(image)}}};module.exports=SocialManagerService},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},ScraperManager=function(){function ScraperManager($http){_classCallCheck(this,ScraperManager),this.$http=$http}return _createClass(ScraperManager,{getOpenGraphDataFromUrl:{value:function(url){return this.$http.get(""+api_endpoint+"/web-meta?url="+url).then(function(response){if(200===response.status)return response.data;var message=response.data.error||response.data;throw new Error(message)})}}}),ScraperManager}();ScraperManager.$inject=["$http"],module.exports=ScraperManager},function(module){"use strict";var SearchService=function($http,$q,Page,Collection,User){var SearchResult=function(data){var _this=this;this.type=data._type,this.score=data._score,this.source=data._source,this.id=data._id,this._id=data._id,this.item=function(){var item;return"collection"===_this.type?(item=new Collection({_id:data._id}).update(data._source),item.config={preview:_this.source.thumbnails},item):"page"===_this.type?(item=new Page({_id:data._id}).update(data._source),item.config={preview:_this.source.thumbnails,excerp:_this.source.excerp},item):"user"===_this.type?new User({_id:data._id}).update(data._source):void 0}};SearchResult.get=function(){return this.source};var SearchManager=function(){this.took=0,this.results=[],this.active=!1,this._searchtext=null,this._options={}};return SearchManager.SearchResult=SearchResult,SearchManager.prototype.get=function(params){var self=this,searchtext=params&&params.text||"",options=params&&params.options||{},promise=$q.defer(),url=function(){if(self._options=options,self._searchtext=searchtext,searchtext)return api_endpoint+"/search?q="+searchtext;if(options.fields){var fieldsp=Object.keys(options.fields).map(function(key){return key+":"+options.fields[key]}).join(";");return api_endpoint+"/search?q="+searchtext+"&fields="+fieldsp}return null}();return url?($http.get(url).then(function(response){200===response.status?(self.active=!0,self.took=response.data.took,self.results=response.data.hits.map(function(hit){return new SearchResult(hit)}),promise.resolve(self.results)):(self.active=!1,self.took=0,self.results=[],promise.reject(response.data.error||response.statusText))},function(response){self.took=0,self.results=[],promise.reject(response.data.error||response.statusText)}),promise.promise):void(self.active=!1)},SearchManager.prototype.getItem=SearchManager.prototype.get,SearchManager.prototype.getUser=function(params){var self=this,searchtext=params&&params.text||"",options=params&&params.options||{},promise=$q.defer(),url=function(){if(self._options=options,self._searchtext=searchtext,searchtext)return api_endpoint+"/search/user?q="+searchtext;if(options.fields){var fieldsp=Object.keys(options.fields).map(function(key){return key+":"+options.fields[key]}).join(";");return api_endpoint+"/search/user?q="+searchtext+"&fields="+fieldsp}throw"search text required."}();return $http.get(url).then(function(response){if(200===response.status){var results=response.data.hits.map(function(hit){return new SearchResult(hit)});promise.resolve(results)}else promise.reject(response.data.error||response.statusText)},function(response){promise.reject(response.data.error||response.statusText)}),promise.promise},SearchManager.prototype.reset=function(){this.active=!1,this.results=[]},SearchManager};module.exports=SearchService},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},SearchPageCtrl=function(){function SearchPageCtrl($scope,$routeParams,$location,DataCache,MainSearch,LayoutManager){_classCallCheck(this,SearchPageCtrl),this.$scope=$scope,this.cache=DataCache,this.options={fields:SearchPageCtrl.objectFromQuery($location.$$search.f),searchtext:$routeParams.searchtext},MainSearch.get({text:this.options.searchtext,options:this.options}),this.sm=MainSearch,this.searchtext=$routeParams.searchtext,LayoutManager.setBannerImage(),this.localSearchOptions={sort:{value:"score",sort:"-"},filter:{media:"all"}},this.getFilterFilterOptions=function(value){var args=$scope.search.localSearchOptions.filter,mediaF=args.media;return"gallery"===mediaF?"collection"===value.type:"video"===mediaF?value.source.modules&&value.source.modules.filter(function(mod){return"vidlyvideo"===mod.type}).length>0:"audio"===mediaF?value.source.modules&&value.source.modules.filter(function(mod){return"soundcloudaudio"===mod.type}).length>0:!0}}return _createClass(SearchPageCtrl,{getOrderFilterOptions:{value:function(){var args=this.localSearchOptions.sort;switch(args.value){case"score":return""+args.sort+"score";case"date":return""+args.sort+"source.created_at";case"likes":return""+args.sort+"source.likes.length";case"comments":return""+args.sort+"source.comments.length";default:return""+args.sort+"source.created_at"}}}}),SearchPageCtrl}();SearchPageCtrl.objectFromQuery=function(string){return string?(string||document.location.search).replace(/(^\?)/,"").split(";").map(function(n){return n=n.split(":"),this[n[0]]=n[1],this}.bind({}))[0]:{}},SearchPageCtrl.$inject=["$scope","$routeParams","$location","DataCache","MainSearch","LayoutManager"],module.exports=SearchPageCtrl},function(module){"use strict";var SearchResultsDirective=function(){return{restrict:"EA",templateUrl:"app/search/searchresults.html",controller:["$scope","$location","MainSearch",function($scope,$location,MainSearch){$scope.sm=MainSearch,$scope.moment=moment,$scope.active=function(){return $scope.searchtext&&!$location.$$path.match("^/search")}}]}};module.exports=SearchResultsDirective},function(module){"use strict";var RealTimeService=function($rootScope,$cookies,DataCache,Module,Activity){var rt=this;return this._pusher=null,this._authEndpoint=window.api_endpoint+"/pusher/auth.json",this._channels={},this.init=function(){return window.Pusher?void(configuration.pusher&&(this._pusher=new window.Pusher(configuration.pusher.key,{authEndpoint:this._authEndpoint,auth:{headers:{"X-PANDA-AUTH-SESSION-ID":$cookies.get("X-PANDA-AUTH-SESSION-ID")}}}),this.initActivityEvents())):void console.warn("Pusher could not be loaded.")},this.initModuleEventsForPage=function(page){if(!page||!page.id)throw"Page is not valid.";var pusher=this._pusher;if(!pusher)return console.error("pusher not initiated!");var channelname="private-modules-page-"+page.id;if(void 0===this._channels[channelname]){var channel=pusher.subscribe(channelname);this._channels[channel.name]=channel,channel.bind("pusher:subscription_error",function(status){console.error(status)}),channel.bind("client-update",function(data){if(data&&data.module&&data.module._id){var module=DataCache.modules.filter(function(mod){return mod.id===data.module._id})[0];module.update(data.module),$rootScope.$$phase||$rootScope.$apply()}})}},this.initActivityEvents=function(){var pusher=this._pusher;if(!pusher)throw"pusher not initiated.";var channel=pusher.subscribe("activities");channel.bind("pusher:subscription_error",function(status){console.error(status)}),channel.bind("create",function(data){data&&data.activity&&(DataCache.activities[data.activity._id]=new Activity(data.activity),$rootScope.$$phase||$rootScope.$apply())})},this.triggerClientEvent=function(channelname,eventname,payload){var channel=this._channels[channelname];if(channel){if(!channelname)throw"not subscribed to channel "+channelname;channel.trigger("client-"+eventname,payload)}},rt};module.exports=RealTimeService},function(module){"use strict";var ArticleService=function(DataCache){return{_user:null,_isAuthorOfPage:function(user,page){return page.author.filter(function(author){return"panda"===author.author_type&&author.author_id===user.id}).length>0},_getAllItems:function(){return Object.keys(DataCache.pages).map(function(pageid){return DataCache.pages[pageid]}).concat(Object.keys(DataCache.collections).map(function(collectionid){return DataCache.collections[collectionid]}))},setUser:function(_user){return this._user=_user,this},user:function(){return this._user||DataCache.current_user},itemsWithStatus:function(status){var manager=this,user=this.user(),items=this._getAllItems();return items.filter(function(item){return(item&&manager._isAuthorOfPage(user,item)&&item.status)===status})},itemsWithoutStatus:function(){var manager=this,user=this.user(),items=this._getAllItems();return items.filter(function(item){return(item&&manager._isAuthorOfPage(user,item)&&!item.status)===!0})},editableItemsWithStatus:function(status){var user=this.user(),items=this._getAllItems();return items.filter(function(item){return(item&&user.canSetPageOrCollectionStatus(item,status)&&item.status)===status})},editableItemsWithoutStatus:function(){var user=this.user(),items=this._getAllItems();return user.isLoggedIn()?items.filter(function(item){return(item&&user.canSetPageOrCollectionStatus(item,"READY")&&!item.status)===!0}):[]},onlineCounter:function(){return this.user().can("*","*")?this.itemsWithStatus("READY").length+this.itemsWithStatus("CONTROLLED").length:this.itemsWithoutStatus().length}}};module.exports=ArticleService},function(module,exports,__webpack_require__){"use strict";var _toConsumableArray=function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)},_createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},hasMongoId=__webpack_require__(68).hasMongoId,CategoryFactory=function($http,$q,$rootScope,$timeout,$injector,Collection,Page,Module){var Subcategory=function(){function Subcategory(){var options=void 0===arguments[0]?{}:arguments[0],category=void 0===arguments[1]?null:arguments[1];_classCallCheck(this,Subcategory),this._id=options._id||null,this.title=options.title||null,this.position=options.position||null,this.category=category||null,hasMongoId(this)}return _createClass(Subcategory,{save:{value:function(){var _this=this,promise=$q.defer(),object=angular.copy(this);return delete object.category,this.id?$http.put(api_endpoint+"/category/"+this.category.id+"/subcategory/"+this.id,{subcategory:object}).success(function(data){_this.update(data.subcategory),promise.resolve(_this)}):$http.post(api_endpoint+"/category/"+this.category.id+"/subcategory/",{subcategory:object}).success(function(data){_this.update(data.subcategory),promise.resolve(_this)}),promise.promise}},update:{value:function(){var _this=this,data=void 0===arguments[0]?{}:arguments[0];Object.keys(data).forEach(function(key){return _this[key]=data[key]})}}}),Subcategory}(),Category=function(){var _this=this,options=void 0===arguments[0]?{}:arguments[0];this._id=options._id||null,this.title=options.title||"Titel",this.navigation=(options.navigation||[]).map(function(navData){return new Subcategory(navData,_this)})||[],this.position=options.position||0,this.parent_category_id=options.parent_category_id||null,this.config=options.config||{},this.__hasLoadedPagesAndCollections=!1,this.modules=options.modules||[],hasMongoId(this)};return Category.prototype.modelName="Category",Category.prototype.createSubcategory=function(){var _this=this,options=void 0===arguments[0]?{}:arguments[0];options.position=options.position||function(category){return Math.max.apply(Math,_toConsumableArray(category.navigation.map(function(sub){return sub.position||0})))+10}(this);var subcategory=new Subcategory(options,this);subcategory.save().then(function(sub){return _this.navigation.push(sub)})},Category.prototype.removeSubcategory=function(subcategoryId){var _this=this;$http["delete"](api_endpoint+"/category/"+this.id+"/subcategory/"+subcategoryId).then(function(){_this.navigation=_this.navigation.filter(function(subc){return subc.id!==subcategoryId})})},Category.prototype.loadPagesAndCollectionsAndModules=function(){var _this=this,deferred=$q.defer(),cache=$injector.get("DataCache");return this.__hasLoadedPagesAndCollections?($timeout(function(){deferred.resolve()}),deferred.promise):($http.get(api_endpoint+"/category/"+this.id).success(function(data){var category=cache.categories[data.category._id];category&&category.update(data.category),data.pages.forEach(function(pageData){var page=new Page(pageData);cache.pages[page.id]=page}),data.collections.forEach(function(collectionData){var collection=new Collection(collectionData);cache.collections[collection.id]=collection}),data.modules.forEach(function(moduleData){cache.modules.push(new Module(moduleData))}),_this.__hasLoadedPagesAndCollections=!0,deferred.resolve()}),deferred.promise)},Category.prototype.update=function(data){var category=this;Object.keys(this).forEach(function(key){category[key]=data[key],"navigation"===key&&(category[key]=data[key].map(function(subOpts){return new Subcategory(subOpts)}))})},Category.prototype.save=function(){var category=angular.copy(this);delete category.navigation;for(var property in category)property.startsWith("__")&&delete category[property];var promise=$q.defer();return this.id?$http.put(api_endpoint+"/category/"+this.id,{category:category}).success(function(data){category.update(data.category)}):$http.post(api_endpoint+"/category",{category:category}).success(function(data){category.update(data.category),promise.resolve(category)}),promise.promise},Category.prototype.getBanner=function(){var size="banner";window.devicePixelRatio>1&&(size+="@2x");var bannerConfig=this.config&&this.config.banners;if(bannerConfig&&bannerConfig.file_id)return bannerConfig.versions&&bannerConfig.versions[size]&&bannerConfig.versions[size].absoluteUrl;if(bannerConfig){var banner;return banner=Array.isArray(bannerConfig)?bannerConfig[0]:bannerConfig,banner[size]}return null},Category.prototype.setBanner=function($files){if($files&&!($files.length<1)){var self=this,images_sizes=["small","small@2x","middle","middle@2x"],file=$files[0],reader=new FileReader;reader.onload=function(e){var img=document.getElementById("config_banner_picture_dropzone");img.src=e.target.result;var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");ctx.drawImage(img,0,0,400,88);var imageUrl=canvas.toDataURL("image/jpeg"),sizes_object={};images_sizes.forEach(function(size){sizes_object[size]=imageUrl}),self.config.banner=sizes_object,$rootScope.$$phase||$rootScope.$apply()},reader.readAsDataURL(file),this.uploadBanner(file)}},Category.prototype.uploadBanner=function(file){var category=this,url=api_endpoint+"/category/"+category.id+"/banner",data=new FormData;data.append("file",file),$http({method:"POST",url:url,data:data,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(data){category.update(data.category)})},Category.prototype.getModules=function(){var modules=[],cache=$injector.get("DataCache");return this.modules.forEach(function(moduleData){var module_object={position_on_page:moduleData.position_on_page};module_object.module=cache.modules.filter(function(m){return m.id===moduleData.module_id})[0],modules.push(module_object)}),modules},Category};module.exports=CategoryFactory},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},CategoryCtrl=function(){function CategoryCtrl($rootScope,$scope,$routeParams,DataCache,LayoutManager,Module){var _this=this;_classCallCheck(this,CategoryCtrl),this.moment=moment,this.cache=DataCache,this.$scope=$scope,this.$routeParams=$routeParams,this.onePager=null,this.currentCategory=null,this.Module=Module,this.currentCategoryModules=[];
var getCurrentCategory=function(){_this.currentCategory=DataCache.categories[$routeParams.id],_this.currentCategory&&($rootScope.currentCategory=_this.currentCategory,$rootScope.currentCategorySubcategoryId=$routeParams.subcategory_id,_this.currentCategory.loadPagesAndCollectionsAndModules().then(function(){var bannerImage=_this.getBanner();LayoutManager.setBannerImage(bannerImage),$scope.$watch(function(){return _this.currentCategory&&_this.currentCategory.modules},function(){_this.currentCategoryModules=_this.currentCategory.getModules()},!0)}))};$scope.$watch(function(){return Object.keys(DataCache.categories).length},function(){getCurrentCategory()},!0)}return _createClass(CategoryCtrl,{pages_or_collections:{value:function(subcategory_id){var type,_this=this;return subcategory_id||(subcategory_id=this.$routeParams.subcategory_id),this.currentCategory?("collectionPage"===this.currentCategory.config.pageType?(type="collections",this.onePager=!0):(type="pages",this.onePager=!1),Object.keys(this.cache[type]).map(function(id){return _this.cache[type][id]}).filter(function(page_or_collection){return"PUBLISHED"===page_or_collection.status}).filter(function(page_or_collection){return subcategory_id?page_or_collection.category_id===_this.$routeParams.id&&page_or_collection.subcategory_id===subcategory_id:page_or_collection.category_id===_this.$routeParams.id})):[]}},latestComments:{value:function(){var _this=this;return Object.keys(this.cache.comments).map(function(commentId){return _this.cache.comments[commentId]}).filter(function(comment){var isPageComment=_this.cache.pages[comment.item_id]&&_this.cache.pages[comment.item_id].category_id===_this.$routeParams.id,isCollectionComment=_this.cache.collections[comment.item_id]&&_this.cache.collections[comment.item_id].category_id===_this.$routeParams.id;return isPageComment||isCollectionComment})}},scrollToSubcategory:{value:function(subcategory){var e=angular.element(document.getElementById(subcategory));return e.length<1?null:void window.scrollTo(window.scrollX,e.offset().top-30)}},isEditing:{value:function(){var user=this.cache.current_user;return user.isLoggedIn()&&user.edit_mode?user.canEditPage(this.currentCategory):!1}},getBanner:{value:function(){if(!this.currentCategory)return null;var categoryBanner=this.currentCategory.getBanner();if(categoryBanner)return categoryBanner;if(this.pages_or_collections&&this.pages_or_collections().length)try{return this.pages_or_collections()[0].getBanner()}catch(e){return null}return null}},addModule:{value:function(newModule){var _this=this;"object"!=typeof newModule&&(newModule=JSON.parse(newModule)),newModule.page=this.currentCategory;var module=new this.Module(newModule);return module.save().then(function(){_this.cache.modules.push(module),_this.currentCategory.modules.push({module_id:module.id,position_on_page:_this.currentCategory.modules.length+1}),_this.currentCategory.save()},window.alert)}},deleteModule:{value:function(module_object){var _this=this;module_object.module["delete"](this.currentCategory).then(function(){var module_obj=_this.currentCategory.modules.filter(function(mod_obj){return mod_obj.module_id===module_object.module.id})[0],index=_this.currentCategory.modules.indexOf(module_obj);_this.currentCategory.modules.splice(index,1),_this.currentCategory.save()})}},dropModule:{value:function(moduleId,toIndex){if(moduleId){var module_object=this.currentCategory.modules.filter(function(modo){return modo.module_id===moduleId})[0];if(toIndex===module_object.position_on_page)return!1;toIndex>module_object.position_on_page&&this.currentCategory.modules.forEach(function(modo){modo!==module_object&&modo.position_on_page<=toIndex&&modo.position_on_page>module_object.position_on_page&&modo.position_on_page--}),toIndex<module_object.position_on_page&&this.currentCategory.modules.forEach(function(modo){modo!==module_object&&modo.position_on_page>=toIndex&&modo.position_on_page<module_object.position_on_page&&modo.position_on_page++}),module_object.position_on_page=toIndex,this.currentCategory.save(),this.$scope.$$phase||this.$scope.$apply()}}}}),CategoryCtrl}();CategoryCtrl.$inject=["$rootScope","$scope","$routeParams","DataCache","LayoutManager","Module"],module.exports=CategoryCtrl},function(module){"use strict";var PandaReplaceEmojisDirective=function(){return{restrict:"A",link:function(scope,elm){var replace=function(){elm.val(elm.val().replace(":)","😄")),elm.val(elm.val().replace(":P","😝")),elm.val(elm.val().replace(":*","😘")),elm.val(elm.val().replace(":(","😟")),elm.val(elm.val().replace("<3","♥️")),elm.val(elm.val().replace("(y)","😄"))};elm.on("keyup change",replace)}}};module.exports=PandaReplaceEmojisDirective},function(module,exports,__webpack_require__){"use strict";var hasMongoId=__webpack_require__(68).hasMongoId,PageFactory=function($rootScope,$http,$q,$injector,$filter,Module,hasComments,hasLikes){var Page=function(options){options||(options={}),this._id=options._id||null,this.title=options.title||"Titel",this.date=options.date||null,this.status=options.status||null,this.released_at=options.released_at||null,this.updated_at=options.updated_at||new Date,this.created_at=options.created_at||new Date,this.category_id=options.category_id||null,this.subcategory_id=options.subcategory_id||null,this.page_type=options.page_type||"standardPage",this.author=options.author||[],this.tags=options.tags||[],this.topic=options.topic||"",this.likes=options.likes||[],this.modules=options.modules||[],this.comments=options.comments||[],this.config=options.config||{excerp:"Füge hier einen kurzen Vorschautext für die Startseite ein!"},this.__viewsCount=options.__viewsCount||0,this.__hasBeenFullyLoaded=!1,hasMongoId(this);var DataCache=$injector.get("DataCache");DataCache.current_user&&DataCache.current_user.canEditPage(this)&&!this.isNew()&&"PUBLISHED"!==this.status&&$injector.get("RealTime").initModuleEventsForPage(this)};return hasComments(Page.prototype),hasLikes(Page),Page.prototype.modelName="Page",Page.url={multiple:api_endpoint+"/pages",single:api_endpoint+"/page/:id"},Page.prototype.getUrl=function(type){return type||(type="single"),Page.url[type].replace(":id",this.id)},Page.prototype.save=function(){var page=this,promise=$q.defer();return page.config.excerp=$filter("removeHtml")(page.config.excerp),page.title=$filter("removeHtml")(page.title),this.id?$http.put(api_endpoint+"/page/"+this.id,{page:this}).success(function(data){page.update(data.page)}):$http.post(api_endpoint+"/page",{page:this}).success(function(data){page.update(data.page),promise.resolve(page)}),promise.promise},Page.prototype.update=function(data){var page=this;return Object.keys(data).forEach(function(key){page[key]=data[key]}),page},Page.prototype.getModules=function(){var modules=[],cache=$injector.get("DataCache");return this.modules.forEach(function(moduleData){var module_object={position_on_page:moduleData.position_on_page};module_object.module=cache.modules.filter(function(m){return m.id===moduleData.module_id})[0],modules.push(module_object)}),modules},Page.prototype.getCategory=function(){var self=this;return $injector.get("DataCache").categories[self.category_id]},Page.prototype.getPreview=function(sizes){sizes||(sizes=["smalldouble","small"]),"string"==typeof sizes&&(sizes=[sizes]);for(var i=0;i<sizes.length;i++){var url=void 0,size=sizes[i];window.devicePixelRatio>1&&!/@2x$/.test(size)&&(size+="@2x");var previewConfig=this.config&&this.config.preview;if(previewConfig&&previewConfig.file_id?url=previewConfig.versions&&previewConfig.versions[size]&&previewConfig.versions[size].absoluteUrl:previewConfig&&(url=previewConfig[size]),url)return url}return null},Page.prototype.getBanner=function(){var size="banner";window.devicePixelRatio>1&&(size+="@2x");var bannerConfig=this.config&&this.config.banner;return bannerConfig&&bannerConfig.file_id?bannerConfig.versions&&bannerConfig.versions[size]&&bannerConfig.versions[size].absoluteUrl:bannerConfig?bannerConfig[size]:null},Page.prototype.setPreview=function($files,preview_type){if($files&&!($files.length<1)){var self=this,images_sizes={preview:["small","small@2x","middle","middle@2x"],banner:["banner","banner@2x"]},file=$files[0],reader=new FileReader;reader.onload=function(e){var img=document.getElementById("config_"+preview_type+"_picture_dropzone");img.src=e.target.result;var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");ctx.drawImage(img,0,0,400,300);var imageUrl=canvas.toDataURL("image/jpeg"),sizes_object={};images_sizes[preview_type].forEach(function(size){sizes_object[size]=imageUrl}),self.config[preview_type]=sizes_object,$rootScope.$$phase||$rootScope.$apply()},reader.readAsDataURL(file),this.uploadPreview(file,preview_type)}},Page.prototype.uploadPreview=function(file,preview_type){var page=this,url=api_endpoint+"/page/"+page.id+"/"+preview_type,data=new FormData;data.append("file",file),$http({method:"POST",url:url,data:data,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(data){page.update(data.page)})},Page.prototype.hasStatus=function(status){return"PUBLISHED"===this.status?!0:"CONTROLLED"!==this.status||"CONTROLLED"!==status&&"READY"!==status?"READY"===this.status&&"READY"===status:!0},Page.prototype.setStatus=function(status){var statusBefore=this.status,page=this;page.status=status;var url=api_endpoint+"/page/"+page.id+"/status";$http({method:"PUT",url:url,data:{status:status}}).success(function(data,status){200===status?$rootScope.currentPage.update(data.page):(page.status=statusBefore,alert(data))})},Page};module.exports=PageFactory},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},PageCtrl=function(){function PageCtrl($rootScope,$scope,$routeParams,$q,ezfb,$sce,DataCache,Module,User,Comment,LayoutManager,$location){var _this=this;_classCallCheck(this,PageCtrl),this.cache=DataCache,this.User=User,this.Comment=Comment,this.Module=Module,this.$q=$q,this.ezfb=ezfb,this.$scope=$scope,this.$rootScope=$rootScope,this.moment=moment,this.currentPageModules=[],this.currentPageComments=[],this.currentPageAuthors=[],this._random_page=null,this.topicTimeout=null,this.isLoading=!0,this.newModule=DataCache.moduleTypes[0],this.newComment={content:"",author:{author_id:""}},this.current_url=document.location.href;var navigatePageWithKeyboard=function(e){"TEXTAREA"===e.target.nodeName||"INPUT"===e.target.nodeName||e.target.isContentEditable||e.metaKey||"L"===String.fromCharCode(e.keyCode||e.which)&&(_this.currentPage.like(),$scope.$$phase||$scope.$apply())};document.addEventListener("keydown",navigatePageWithKeyboard,!1),$scope.$on("$destroy",function(){document.removeEventListener("keydown",navigatePageWithKeyboard,!1)});var page_id=$routeParams.id;DataCache.loadPage(page_id).then(function(page){_this.currentPage=page,_this.cache.currentPage=page,$rootScope.currentPage=page,$rootScope.currentCategory=_this.cache.categories[page.category_id];var bannerImage=page.getBanner();LayoutManager.setBannerImage(bannerImage),$scope.$watch(function(){return _this.currentPage&&_this.currentPage.modules},function(){_this.currentPageModules=_this.currentPage.getModules()},!0),$scope.$watch(function(){return _this.currentPage&&_this.currentPage.comments},function(){_this.currentPageComments=_this.currentPage.getComments()},!0),_this.isLoading=!1,"comments"===$location.hash()&&(setTimeout(function(){return $("#comments").get(0).scrollIntoView()},3500),$location.hash(""))})}return _createClass(PageCtrl,{deleteCurrentPage:{value:function(){var _this=this;confirm("Falls du die Seite '"+this.currentPage.title+"' wirklich löschen willst, klicke auf OK.\nAnsonsten, klicke auf Abbrechen.")&&this.cache.deletePage(this.currentPage).then(function(){_this.$rootScope.open("/category/"+_this.currentPage.category_id)})}},addModule:{value:function(newModule){var _this=this;"object"!=typeof newModule&&(newModule=JSON.parse(newModule)),newModule.page=this.currentPage;var module=new this.Module(newModule);return module.save().then(function(){_this.cache.modules.push(module),_this.currentPage.modules.push({module_id:module.id,position_on_page:_this.currentPage.modules.length+1}),_this.currentPage.save()},window.alert)}},deleteModule:{value:function(module_object){var _this=this;module_object.module["delete"](this.currentPage).then(function(){var module_obj=_this.currentPage.modules.filter(function(mod_obj){return mod_obj.module_id===module_object.module.id})[0],index=_this.currentPage.modules.indexOf(module_obj);_this.currentPage.modules.splice(index,1),_this.currentPage.save()})}},deletePageComment:{value:function(comment){var _this=this;comment["delete"]().then(function(response){200===response.status&&(_this.currentPage.comments=response.data.page.comments)})}},addComment:{value:function(){var _this=this,comment=new this.Comment({content:this.newComment.content,item_id:this.currentPage.id});!this.cache.current_user.isLoggedIn()&&this.newComment.author.author_id&&(comment.author.author_id=this.newComment.author.author_id),comment.save().then(function(comment){_this.cache.comments[comment.id]=comment,_this.currentPage.comments.push(comment.id),_this.newComment={}})}},share_facebook:{value:function(){this.ezfb.ui({method:"feed",name:this.currentPage.title,link:document.location.href,caption:this.currentPage.config.excerp,description:this.currentPage.config.excerp,image:"http://mport.al/fotos/133/thumbs/TNvorschau_chamonway.jpg"})}},isEditing:{value:function(){var user=this.cache.current_user;return user.isLoggedIn()&&user.edit_mode?user.canEditPage(this.currentPage):!1}},getRandomPage:{value:function(){var _this=this;if(!this.currentPage)return{};if(!this.cache.pages)return{};var all_pages=Object.keys(this.cache.pages).filter(function(id){return"PUBLISHED"===_this.cache.pages[id].status});if(all_pages.length<2)return{};if(this._random_page)return this._random_page;var index=Math.floor(Math.random()*all_pages.length)+1,pageid=all_pages[index];return pageid===this.currentPage.id?this.getRandomPage():(this._random_page=this.cache.pages[pageid],this._random_page)}},findTags:{value:function($query){var deferred=this.$q.defer(),tags=this.cache.available_tags.filter(function(tag){return tag.match(new RegExp($query,"i"))});return deferred.resolve(tags),deferred.promise}},addTag:{value:function($tag){this.currentPage.tags.push($tag),this.cache.available_tags.push($tag),this.currentPage.save()}},setTopic:{value:function(page){var _this=this;this.topicTimeout&&clearTimeout(this.topicTimeout),this.topicTimeout=setTimeout(function(){page.save(),_this.cache.available_topics.indexOf(page.topic)<0&&_this.cache.available_topics.push(page.topic)},1500)}},editPageDate:{value:function($event){var page=this.currentPage;if(page){var momentDate=moment($event.target.value,"L");if(momentDate.isValid()){var date=momentDate.toDate();page.created_at=date.toISOString(),page.save()}else alert("Datum ist nicht gültig.")}}},dropModule:{value:function(moduleId,toIndex){if(moduleId){var module_object=this.currentPage.modules.filter(function(modo){return modo.module_id===moduleId})[0];if(toIndex===module_object.position_on_page)return!1;toIndex>module_object.position_on_page&&this.currentPage.modules.forEach(function(modo){modo!==module_object&&modo.position_on_page<=toIndex&&modo.position_on_page>module_object.position_on_page&&modo.position_on_page--}),toIndex<module_object.position_on_page&&this.currentPage.modules.forEach(function(modo){modo!==module_object&&modo.position_on_page>=toIndex&&modo.position_on_page<module_object.position_on_page&&modo.position_on_page++}),module_object.position_on_page=toIndex,this.currentPage.save(),this.$scope.$$phase||this.$scope.$apply()}}}}),PageCtrl}();PageCtrl.$inject=["$rootScope","$scope","$routeParams","$q","ezfb","$sce","DataCache","Module","User","Comment","LayoutManager","$location"],module.exports=PageCtrl},function(module,exports,__webpack_require__){"use strict";var hasMongoId=__webpack_require__(68).hasMongoId,CollectionFactory=function($rootScope,$http,$q,$injector,$filter,CollectionFile,Module,hasLikes){var Collection=function(){var options=void 0===arguments[0]?{}:arguments[0],collection=this;this._id=options._id||null,this.title=options.title||"Titel",this.date=options.date||null,this.released_at=options.released_at||null,this.updated_at=options.updated_at||new Date,this.created_at=options.created_at||new Date,this.status=options.status||null,this.category_id=options.category_id||null,this.subcategory_id=options.subcategory_id||null,this.page_type=options.page_type||"standardPage",this.tags=options.tags||[],this.topic=options.topic||"",this.author=options.author||[],this.pages=options.pages||[];try{this.files=options.files.map(function(f){var collectionfile=new CollectionFile(f);return collectionfile._collection=collection,collectionfile})}catch(e){this.files=[]}return this.likes=options.likes||[],this.config=options.config||{},this.__hasBeenFullyLoaded=!1,hasMongoId(this),this};return hasLikes(Collection),Collection.SORTING_OPTIONS=[{key:"CREATION_INC",label:"Datum aufsteigend"},{key:"CREATION_DESC",label:"Datum absteigend"},{key:"FILENAME_INC",label:"Dateiname aufsteigend"},{key:"FILENAME_DESC",label:"Dateiname absteigend"}],Collection.prototype.modelName="Collection",Collection.url={multiple:api_endpoint+"/collections",single:api_endpoint+"/collection/:id"},Collection.prototype.getUrl=function(type){return type||(type="single"),Collection.url[type].replace(":id",this.id)},Collection.prototype.save=function(){var collection=this,promise=$q.defer();if(this.id){var collectionObj={};angular.extend(collectionObj,this),delete collectionObj.files,$http.put(api_endpoint+"/collection/"+this.id,{collection:this}).success(function(data){collection.update(data.collection)})}else $http.post(api_endpoint+"/collection",{collection:this}).success(function(data){collection.update(data),promise.resolve(collection)});return promise.promise},Collection.prototype.sorting=function(){switch(this.config.sorting_option){case"CREATION_INC":return["meta.original_date",!1];case"CREATION_DESC":return["meta.original_date",!0];case"FILENAME_INC":return["getOriginalFilename()",!1];case"FILENAME_DESC":return["getOriginalFilename()",!0];default:return["getOriginalFilename()",!1]}},Collection.prototype.update=function(data){var collection=this;return Object.keys(data).forEach(function(key){if("files"===key)try{collection.files=data.files.map(function(f){var collectionfile=new CollectionFile(f);return collectionfile._collection=collection,collectionfile})}catch(e){collection[key]=data[key]}else collection[key]=data[key]}),collection},Collection.prototype.getCategory=function(){var self=this;return $injector.get("DataCache").categories[self.category_id]},Collection.prototype.getPreview=function(sizes){sizes||(sizes=["smalldouble","small"]),"string"==typeof sizes&&(sizes=[sizes]);for(var i=0;i<sizes.length;i++){var url=void 0,size=sizes[i];window.devicePixelRatio>1&&!/@2x$/.test(size)&&(size+="@2x");var previewConfig=this.config&&this.config.preview;if(previewConfig&&previewConfig.file_id?url=previewConfig.versions&&previewConfig.versions[size]&&previewConfig.versions[size].absoluteUrl:previewConfig&&(url=previewConfig[size]),url)return url}return null},Collection.prototype.getBanner=function(){var size="banner";window.devicePixelRatio>1&&(size+="@2x");var bannerConfig=this.config&&this.config.banner;return bannerConfig&&bannerConfig.file_id?bannerConfig.versions&&bannerConfig.versions[size]&&bannerConfig.versions[size].absoluteUrl:bannerConfig?bannerConfig[size]:null},Collection.prototype.setPreview=function($files,preview_type){var self=this,images_sizes={preview:["small","small@2x","middle","middle@2x"],banner:["banner","banner@2x"]},file=$files[0],reader=new FileReader;reader.onload=function(e){var img=document.getElementById("config_"+preview_type+"_picture_dropzone");img.src=e.target.result;var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");ctx.drawImage(img,0,0,400,300);var imageUrl=canvas.toDataURL("image/jpeg"),sizes_object={};images_sizes[preview_type].forEach(function(size){sizes_object[size]=imageUrl}),self.config[preview_type]=sizes_object,$rootScope.$$phase||$rootScope.$apply()},reader.readAsDataURL(file),this.uploadPreview(file,preview_type)},Collection.prototype.uploadPreview=function(file,preview_type){var collection=this,url=api_endpoint+"/collection/"+collection.id+"/"+preview_type,data=new FormData;data.append("file",file),$http({method:"POST",url:url,data:data,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(data){collection.update(data.collection)})},Collection.prototype.uploadFiles=function($files){var collection=this;$files.forEach(function(file){collection.uploadFile(file)})},Collection.prototype.uploadFile=function(file){var collection=this,deferred=$q.defer(),url=api_endpoint+"/collection/"+collection.id+"/file",data=new FormData;return data.append("file",file),$http({method:"POST",url:url,data:data,headers:{"Content-Type":void 0},transformRequest:angular.identity,timeout:3e5}).success(function(data){var collectionfile=new CollectionFile(data.file);collectionfile._collection=collection,collection.files.push(collectionfile),deferred.resolve({file:data.file,collection:data.collection})}),deferred.promise},Collection.prototype.getFile=function(fileObj,size){return size||(size=Object.keys(fileObj)[0]),window.devicePixelRatio>1&&(size+="@2x"),fileObj.file&&fileObj.file.file_id&&fileObj.file.versions[size]?fileObj.file.versions[size].absoluteUrl:(!fileObj.files[size]&&/^standard/.test("standard@2x")&&(size=window.devicePixelRatio>1?"big@2x":"big"),fileObj.files[size])},Collection.prototype.orderedFiles=function(){var sort=this.sorting();return $filter("orderBy")(this.files,sort[0],sort[1])},Collection.prototype.indexOfFile=function(file){return this.orderedFiles().indexOf(file)},Collection.prototype.previousFile=function(file){if(!file)return!1;var i=this.indexOfFile(file);return 0>=i?!1:this.orderedFiles()[i-1]},Collection.prototype.hasPreviousFile=function(file){return this.previousFile(file)!==!1},Collection.prototype.nextFile=function(file){if(!file)return!1;var i=this.indexOfFile(file);return i+1>=this.orderedFiles().length?!1:this.orderedFiles()[i+1]},Collection.prototype.hasNextFile=function(file){return this.nextFile(file)!==!1},Collection.prototype.hasStatus=function(status){return"PUBLISHED"===this.status?!0:"CONTROLLED"!==this.status||"CONTROLLED"!==status&&"READY"!==status?"READY"===this.status&&"READY"===status:!0},Collection.prototype.setStatus=function(status){var statusBefore=this.status,collection=this;collection.status=status;var url=api_endpoint+"/collection/"+collection.id+"/status";$http({method:"PUT",url:url,data:{status:status}}).success(function(data,status){200===status?$rootScope.currentCollection.update(data.collection):(collection.status=statusBefore,alert(data))})},Collection};module.exports=CollectionFactory},function(module,exports,__webpack_require__){"use strict";var hasMongoId=__webpack_require__(68).hasMongoId,CollectionFileFactory=function(hasLikes,$http,$q){var CollectionFile=function(){var options=void 0===arguments[0]?{}:arguments[0];this._id=options._id||null,this.file_type=options.page_type,this.files=options.files||{},this.file=options.file||{},this.likes=options.likes||[],this.title=options.title||"",this.description=options.description||"",this.comments=options.comments||[],this.meta=options.meta||{},this._collection=options._collection||null,hasMongoId(this)};return hasLikes(CollectionFile),CollectionFile.url={single:api_endpoint+"/collection/:id"},CollectionFile.prototype.getUrl=function(){return api_endpoint+"/collection/"+this._collection.id+"/file/"+this.id},CollectionFile.prototype.getFile=function(size){return size||(size="small"),window.devicePixelRatio>1&&(size+="@2x"),this.file&&this.file.file_id?this.file.versions[size].absoluteUrl:this.files[size]},CollectionFile.prototype.getOriginalFilename=function(){return this.meta&&this.meta.original_filename||this.original_filename||this.file.original_filename||""},CollectionFile.prototype.toJSON=function(){var self=this,newObj={};return Object.keys(self).forEach(function(key){"_collection"!==key&&(newObj[key]=self[key])}),JSON.stringify(newObj)},CollectionFile.prototype["delete"]=function(){var promise=$q.defer(),self=this;$http["delete"](this.getUrl()).then(function(response){200===response.status?promise.resolve(self):promise.reject(response.status)})},CollectionFile.prototype.modelName="CollectionFile",CollectionFile.prototype.save=function(){var promise=$q.defer(),self=this;return this._id?void $http.put(this.getUrl(),{file:self}).then(function(response){if(200===response.status){var collection=self._collection;promise.resolve(collection)}else promise.reject(response.status)}):promise.reject("Collectionfile does not exist.")},CollectionFile};module.exports=CollectionFileFactory},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},CollectionCtrl=function(){function CollectionCtrl($routeParams,$rootScope,$scope,DataCache,Collection,LayoutManager){var _this=this;_classCallCheck(this,CollectionCtrl),this.moment=moment,this.cache=DataCache,this.isLoading=!0,this.toBeUploaded=[],this.uploading=[],this.topicTimeout=null,this.SORTING_OPTIONS=Collection.SORTING_OPTIONS,this.$rootScope=$rootScope;var navigateCollectionWithKeyboard=function(e){"TEXTAREA"===e.target.nodeName||"INPUT"===e.target.nodeName||e.target.isContentEditable||e.metaKey||"L"===String.fromCharCode(e.keyCode||e.which)&&(this.currentCollection.like(),$scope.$$phase||$scope.$apply())};document.addEventListener("keydown",navigateCollectionWithKeyboard,!1),$scope.$on("$destroy",function(){document.removeEventListener("keydown",navigateCollectionWithKeyboard,!1)});var collection_id=$routeParams.id;DataCache.loadCollection(collection_id).then(function(collection){_this.currentCollection=collection,$rootScope.currentCollection=collection,$rootScope.currentCategory=DataCache.categories[collection.category_id];var bannerImage=_this.currentCollection.getBanner();LayoutManager.setBannerImage(bannerImage),_this.isLoading=!1})}return _createClass(CollectionCtrl,{setTopic:{value:function(collection){var _this=this;this.topicTimeout&&clearTimeout(this.topicTimeout),this.topicTimeout=setTimeout(function(){collection.save(),_this.cache.available_topics.indexOf(collection.topic)<0&&_this.cache.available_topics.push(collection.topic)},1500)}},editCollectionDate:{value:function($event){var collection=this.currentCollection;if(!collection)return null;var momentDate=this.moment($event.target.value,"L");if(momentDate.isValid()){var date=momentDate.toDate();collection.created_at=date.toISOString(),collection.save()}else alert("Datum ist nicht gültig.")}},isEditing:{value:function(){return this.currentCollection&&this.cache.current_user.isLoggedIn()&&this.cache.current_user.edit_mode?this.cache.current_user.canEditPage(this.currentCollection):!1}},deleteCurrentCollection:{value:function(){var _this=this;confirm("Falls du Album '"+this.currentCollection.title+"' wirklich löschen willst, klicke auf OK.\nAnsonsten, klicke auf Abbrechen.")&&this.cache.deleteCollection(this.currentCollection).then(function(){_this.$rootScope.open("/category/"+_this.currentCollection.category_id)})}},startUploading:{value:function(){for(var _this=this;this.uploading.length<window.MAX_SIMULTANIOUS_UPLOAD_REQUESTS&&this.toBeUploaded.length>0;){var file=this.toBeUploaded.pop();this.uploading.push(file),this.currentCollection.uploadFile(file).then(function(){_this.uploading.splice(_this.uploading.indexOf(file),1),_this.startUploading()})}}},addFiles:{value:function($files){var _this=this;$files.forEach(function(file){return _this.toBeUploaded.push(file)}),this.startUploading()}}}),CollectionCtrl}();module.exports=CollectionCtrl},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},CollectionFileCtrl=function(){function CollectionFileCtrl($rootScope,$scope,$routeParams,DataCache,Comment,CollectionFileComment,LayoutManager){var _this=this;_classCallCheck(this,CollectionFileCtrl),this.cache=DataCache,this.newComment={content:"",author:{author_id:""}},$rootScope.fullsize=!0,this.Comment=Comment,this.CollectionFileComment=CollectionFileComment,this.$rootScope=$rootScope,LayoutManager.hideBanner(),this.collection_id=$routeParams.id,this.file_id=$routeParams.file_id,DataCache.loadCollection(this.collection_id).then(function(collection){_this.currentCollection=collection,$rootScope.currentCollection=collection,_this.currentCollectionFile=collection.files.filter(function(file){return file._id===_this.file_id})[0],$rootScope.currentCollectionFile=_this.currentCollectionFile});var navigateFilesWithKeyboard=function(e){"TEXTAREA"===e.target.nodeName||"INPUT"===e.target.nodeName||e.target.isContentEditable||e.metaKey||(37===e.keyCode||37===e.which?_this.openPreviousFile():39===e.keyCode||39===e.which?_this.openNextFile():"L"===String.fromCharCode(e.keyCode||e.which)&&(_this.currentCollectionFile.like(),$scope.$$phase||$scope.$apply()))};document.addEventListener("keydown",navigateFilesWithKeyboard,!1),$scope.$on("$destroy",function(){document.removeEventListener("keydown",navigateFilesWithKeyboard,!1)})}return _createClass(CollectionFileCtrl,{getComments:{value:function(){var _this=this;if(!this.currentCollectionFile)return[];var comments=[];return this.currentCollectionFile.comments.forEach(function(commentId){var comment=_this.cache.comments[commentId];comments.push(comment)}),comments}},openNextFile:{value:function(){if(this.currentCollection){var nextFile=this.currentCollection.nextFile(this.currentCollectionFile);nextFile&&this.openFile(nextFile)}}},openPreviousFile:{value:function(){if(this.currentCollection){var previousFile=this.currentCollection.previousFile(this.currentCollectionFile);return previousFile?void this.openFile(previousFile):null}}},addComment:{value:function(){var _this=this,comment=new this.CollectionFileComment({content:this.newComment.content,item_id:this.collection_id,file_id:this.file_id});!this.cache.current_user.isLoggedIn()&&this.newComment.author.author_id&&(comment.author.author_id=this.newComment.author.author_id),comment.save().then(function(comment){_this.cache.comments[comment.id]=comment,_this.currentCollectionFile.comments.push(comment.id),_this.newComment={}})}},currentCollectionFileIndex:{value:function(){return this.currentCollection?this.currentCollection.indexOfFile(this.currentCollectionFile):null
}},openFile:{value:function(file){this.$rootScope.currentCollection&&file&&this.$rootScope.open("/collection/"+this.$rootScope.currentCollection.id+"/file/"+file.id)}},isEditing:{value:function(){return this.currentCollection&&this.cache.current_user.isLoggedIn()&&this.cache.current_user.edit_mode?this.cache.current_user.can("edit",this.currentCollection.category_id):!1}},showDescriptionBox:{value:function(){return this.currentCollectionFile&&this.currentCollectionFile.title||this.isEditing()?!0:!1}}}),CollectionFileCtrl}();CollectionFileCtrl.$inject=["$rootScope","$scope","$routeParams","DataCache","Comment","CollectionFileComment","LayoutManager"],module.exports=CollectionFileCtrl},function(module,exports,__webpack_require__){"use strict";var hasMongoId=__webpack_require__(68).hasMongoId,UserFactory=function($http,$q,$injector){var DEFAULT_USER_AVATAR=null,User=function(options){options||(options={}),this._id=options._id||null,this.first_name=options.first_name||"",this.last_name=options.last_name||"",this.name=options.name||null,this.klass=options.klass||null,this.email=options.email||null,this.verified=options.verified||null,this.gender=options.gender||null,this.services=options.services||null,this.created_at=options.created_at||null,this.avatar=options.avatar||null,this.rightmanagment=options.rightmanagment||{"*":{"*":!1}},this.permissions=options.permissions||{},this.description=options.description||"",this.edit_mode=!1,this.settings=options.settings||{item_is_set_ready:!1},this.__defineGetter__("name",function(){return this.first_name+" "+this.last_name}),hasMongoId(this)};return User.getUsersWithoutAnyRights=function(){var DataCache=$injector.get("DataCache");return Object.keys(DataCache.users).map(function(id){return DataCache.users[id]}).filter(function(user){return!user.isCoworker()})},User.getUsersWithAnyRights=function(){var DataCache=$injector.get("DataCache");return Object.keys(DataCache.users).map(function(id){return DataCache.users[id]}).filter(function(user){return user.isCoworker()})},User.prototype.update=function(data){var user=this;return Object.keys(data).forEach(function(key){var descriptor=Object.getOwnPropertyDescriptor(user,key);descriptor&&descriptor.writable===!0&&(user[key]=data[key])}),user},User.prototype.reload=function(){var user=this,promise=$q.defer();return user.id||promise.reject(new Error("user does not have user id")),$http.get(api_endpoint+"/user/"+user.id).then(function(response){user.update(response.data.user),promise.resolve(user)},function(error){promise.reject(error)}),promise.promise},User.prototype.getImage=function(size){var images;return this.isLoggedIn()?(size||(size="middle"),window.devicePixelRatio>1&&(size+="@2x"),this.services||this.avatar?this.avatar&&this.avatar.file_id&&this.avatar.versions["avatar_"+size]?this.avatar.versions["avatar_"+size].absoluteUrl:this.avatar&&this.avatar[size]?this.avatar[size]:(this.services&&this.services.length>0&&(images=this.services.map(function(service){return"facebook"===service.service_name?"//graph.facebook.com/"+service.identification+"/picture?width=200&height=200":"google"===service.service_name?"https://plus.google.com/s2/photos/profile/"+service.identification+"?sz=400":void 0})),images?images[0]:DEFAULT_USER_AVATAR):DEFAULT_USER_AVATAR):null},User.prototype.uploadImage=function(file){if(file){var prom,user=this,url=api_endpoint+"/user/"+user.id+"/avatar";if("string"==typeof file)file=file.replace(/data:image\/.*;base64,/,""),prom=$http({method:"POST",url:url,data:{base64:file}});else{var data=new FormData;data.append("file",file),prom=$http({method:"POST",url:url,data:data,headers:{"Content-Type":void 0},transformRequest:angular.identity})}return prom.success(function(data){user.update(data.user)}),prom}},User.prototype.isLoggedIn=function(){return this.id?!0:!1},User.prototype.can=function(right,categoryId,accountId){accountId||(accountId=window.currentAccount.id);var permissions=this.permissions[accountId]||{};try{return permissions.admin===!0||permissions[categoryId][right]===!0}catch(e){return!1}},User.prototype.isEditingCategory=function(){return(this.edit_mode&&this.isAdmin())===!0},User.prototype.canCreatePage=function(categoryId,accountId){return accountId||(accountId=window.currentAccount.id),this.can("create",categoryId,accountId)},User.prototype.canEditPage=function(page){if(!page)return!1;var user=this;if(user.isAdmin(page.account_id))return!0;var author_ids=page.author.filter(function(author){return"panda"===author.author_type&&author.author_id===user.id});if(author_ids.length>0)return!0;var categoryId=page.category_id,accountId=page.account_id;return accountId!==user.account_id?!1:user.can("edit",categoryId,accountId)},User.prototype.canDelete=function(page){return this.can("delete",page.category_id,page.account_id)},User.prototype.canSetControlled=function(page){return this.can("setControlled",page.category_id,page.account_id)},User.prototype.canSetPublished=function(page){return this.can("setPublished",page.category_id,page.account_id)},User.prototype.canEditCollection=User.prototype.canEditPage,User.prototype.canSetPageOrCollectionStatus=function(page,status){return"READY"===status?this.canEditPage(page):"CONTROLLED"===status?this.can("*","*"):"PUBLISHED"===status?this.can("*","*"):!1},User.prototype.isCoworker=function(accountId){var permissions;return accountId||(accountId=window.currentAccount.id),permissions=this.getPermissions(accountId),Object.keys(permissions).filter(function(section){return["admin","uploadVideo","uploadAudio"].indexOf(section)>-1&&permissions[section]===!0?!0:Object.keys(permissions[section]).filter(function(section2){return permissions[section][section2]}).length>0}).length>0},User.prototype.getNewMessages=function(){var cache=$injector.get("DataCache"),self=this;return cache.messages.filter(function(message){return message.to_user_id===self.id&&!message.read})},User.prototype.save=function(){var user=this,promise=$q.defer();return this.id?$http.put(api_endpoint+"/user/"+this.id,{user:this}).success(function(data){user.update(data.user),promise.resolve(user)}).error(function(data){promise.reject(data)}):$http.post(api_endpoint+"/user",{user:this}).success(function(data,status,headers){user.update(data.user),promise.resolve({user:user,sessionToken:headers("X-PANDA-AUTH-SESSION-ID-SET")})}).error(function(data){promise.reject({error:data.data,status:data.status})}),promise.promise},User.prototype.savePermissions=function(permissionsObject){var _this=this,promise=$q.defer();$http.put(api_endpoint+"/user/"+this.id+"/permissions",{permissions:permissionsObject}).success(function(data){_this.update(data.user),promise.resolve(_this)}).error(function(data){promise.reject(data)})},User.prototype.isAuthorOf=function(item){var user=this;if(!item.author)return!1;var authors=item.author.filter(function(author){return"panda"===author.author_type&&author.author_id===user.id?!0:void 0});return authors.length>0},User.prototype.isAdmin=function(accountId){return this.getPermissions(accountId).admin===!0},User.prototype.isVideoUploader=function(accountId){return this.getPermissions(accountId).uploadVideo===!0},User.prototype.isAudioUploader=function(accountId){return this.getPermissions(accountId).uploadAudio===!0},User.prototype.getPermissions=function(accountId){return accountId||(accountId=window.currentAccount.id),this.permissions[accountId]||{}},User};module.exports=UserFactory},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},ProfileCtrl=function(){function ProfileCtrl($scope,$routeParams,DataCache,ArticleManager,LayoutManager){var _this=this;_classCallCheck(this,ProfileCtrl);var $watcher;this.cache=DataCache,this.moment=window.moment,this.settings={},this.ArticleManager=ArticleManager,LayoutManager.hideBanner(),this.mem={},$watcher=$routeParams.id?$scope.$watch(function(){return DataCache.users},function(){var user=DataCache.users[$routeParams.id];user&&(_this.user=user,_this.setUser(user),$watcher())},!0):$scope.$watch(function(){return DataCache.current_user},function(){var user=DataCache.current_user.isLoggedIn()&&DataCache.current_user;user&&(_this.user=DataCache.current_user,_this.setUser(DataCache.current_user),$watcher())},!0)}return _createClass(ProfileCtrl,{setUser:{value:function(user,value){var newuser={name:[user.first_name,user.last_name].join(" "),klass:{first:user.klass&&user.klass.split("/")[0],second:user.klass&&user.klass.split("/").length>1&&user.klass.split("/")[1]},vita:user.vita,email:user.email,password:user.password};value?this.newuser[value]=newuser[value]:this.newuser=newuser}},possibleActions:{value:function(category){var name=category.title;return this.mem[category.id]?this.mem[category.id]:(this.mem[category.id]=[{name:"create",description:name+" erstellen"},{name:"edit",description:"fremde "+name+" bearbeiten"},{name:"delete",description:name+" löschen"}],this.mem[category.id])}},setFocus:{value:function(value){var query='[ng-model="profile.newuser.'+value+'"]';this.settings[value]=!0,setTimeout(function(){$(query).focus()})}},cancel:{value:function(value){this.settings[value]=!1,this.setUser(this.user,value),$(window).focus()}},save:{value:function(value){if(this.settings[value]=!1,"name"===value){var name=ProfileCtrl.getName(this.newuser.name);this.user.first_name=name.first_name,this.user.last_name=name.last_name}else if("klass"===value){var first=this.newuser.klass.first,second=this.newuser.klass.second;this.user.klass=second?first+"/"+second:first}this.user.save(),$(window).focus()}},canEditUserRights:{value:function(user){return user&&user.id!==this.cache.current_user.id?this.cache.current_user.can("*","*"):!1}},canEdit:{value:function(){return!0}},publishedArticles:{value:function(){return this.user?this.ArticleManager.setUser(this.user).itemsWithStatus("PUBLISHED"):[]}},removeClass:{value:function(){this.newuser.klass={first:"",second:""},this.save("klass")}}}),ProfileCtrl}();ProfileCtrl.getName=function(name){var comps=name.split(" ");return comps.length<2?{first_name:comps[0],last_name:""}:{last_name:comps.pop(),first_name:comps.join(" ")}},ProfileCtrl.$inject=["$scope","$routeParams","DataCache","ArticleManager","LayoutManager"],module.exports=ProfileCtrl},function(module,exports,__webpack_require__){"use strict";var hasMongoId=__webpack_require__(68).hasMongoId,CommentFactory=function($rootScope,Upload,$q,$http,$injector,User){var Comment=function(){var options=void 0===arguments[0]?{}:arguments[0];this._id=options._id||null,this.content=options.content||null,this.author=options.author||{},this.created_at=options.created_at||new Date,this.user_agent=options.user_agent||null,this.item_id=options.item_id||options.page_id,this.file_id=options.file_id||null,this.reported=options.reported||!1,this.secured=options.secured||!1,hasMongoId(this)};return Comment.prototype.url=function(){if(!this.item_id)throw"This comment must be set to a page!";return api_endpoint+"/page/"+this.item_id+"/comment"},Comment.prototype.path=function(){return this.file_id?"/collection/"+this.item_id+"/file/"+this.file_id:"/page/"+this.item_id},Comment.prototype.object_name="comment",Comment.prototype.save=function(page_id){page_id&&(this.page_id=page_id);var url,comment=this,promise=$q.defer(),data={};return data[this.object_name]=this,this.id?(url=this.url()+"/"+this.id,$http.put(url,data).success(function(data){comment.update(data[comment.object_name]),promise.resolve(comment)})):(url=this.url(),$http.post(url,data).success(function(data){comment.update(data[comment.object_name]),promise.resolve(comment)})),promise.promise},Comment.prototype["delete"]=function(page_id){if(page_id&&(this.page_id=page_id),!this.id)throw"No id for this comment. Comment cannot be deleted.";var url=null,data={};return data[this.object_name]=this,url=this.url()+"/"+this.id,$http["delete"](url,data).success(function(data){if(!data.page)throw"no page data available to updates comments from";$injector.get("DataCache").pages[data.page._id].update(data.page)})},Comment.prototype.getUser=function(){var _this=this;if(this.__user)return this.__user;if("panda"===this.author.author_type){var user_id=this.author.author_id;this.__user=new User,$injector.get("DataCache").getUser(user_id).then(function(user){_this.__user=user})}else this.__user=new User({first_name:this.author.author_id,last_name:""});return this.__user},Comment.prototype.update=function(data){var comment=this;Object.keys(this).forEach(function(key){comment[key]=data[key]})},Comment.prototype.report=function(){var _this=this;return $http.post(api_endpoint+"/comment/"+this.id+"/report").then(function(response){200===response.status&&(_this.reported=!0)})},Comment};module.exports=CommentFactory},function(module){"use strict";var CollectionFileCommentFactory=function($rootScope,Upload,$q,$http,$injector,Comment){var CollectionFileComment=function(options){Comment.call(this,options),this.file_id=options.file_id};return CollectionFileComment.prototype=Object.create(Comment.prototype),CollectionFileComment.prototype.url=function(){return api_endpoint+"/collection/"+this.item_id+"/file/"+this.file_id+"/comment"},CollectionFileComment};module.exports=CollectionFileCommentFactory},function(module){"use strict";var GreetingFactory=function($rootScope,$q,$http,$injector,Comment){var Greeting=function(options){Comment.call(this,options),this.page_url=!0};return Greeting.prototype=Object.create(Comment.prototype),Greeting.prototype.url=function(){return api_endpoint+"/greeting"},Greeting.prototype.object_name="greeting",window.Greeting=Greeting,Greeting};module.exports=GreetingFactory},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},GreetingsCtrl=function(){function GreetingsCtrl(DataCache,Greeting,ContentTransformer,$route){_classCallCheck(this,GreetingsCtrl),this.cache=DataCache,this.moment=moment,this.transform=ContentTransformer.detectLinks,this.newGreeting={content:"",author:{author_id:""}},this.Greeting=Greeting,this.$route=$route}return _createClass(GreetingsCtrl,{addGreeting:{value:function(){var _this=this,greeting=new this.Greeting({content:this.newGreeting.content});!this.cache.current_user.isLoggedIn()&&this.newGreeting.author.author_id&&(greeting.author.author_id=this.newGreeting.author.author_id),greeting.save().then(function(greeting){_this.cache.greetings[greeting.id]=greeting,_this.newGreeting={},_this.$route.reload()})}},greetings:{value:function(){var _this=this;return Object.keys(this.cache.greetings).map(function(greetid){return _this.cache.greetings[greetid]})}},realignAllGreetings:{value:function(){}}}),GreetingsCtrl}();GreetingsCtrl.$inject=["DataCache","Greeting","ContentTransformer","$route"],module.exports=GreetingsCtrl},function(module){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},AdministrationCtrl=function AdministrationCtrl($rootScope,$scope,$location,DataCache,LayoutManager){_classCallCheck(this,AdministrationCtrl),DataCache.current_user.isAdmin()||$rootScope.open("/"),this.cache=DataCache,this.moment=moment,this.lm=LayoutManager,this.$location=$location,LayoutManager.hideBanner(),this.administrationSection="overview",$scope.getAdministrationSection=function(){var matches=$location.path().match(/^\/administration\/?([A-Za-z]*)/);return matches&&matches.length>1&&matches[1].length>0?matches[1]:"overview"},$scope.usage={init:function(){var _this=this;this.data={},this.error=null,this.loading=!0,DataCache.account.getUsage().then(function(usage){_this.data=usage,_this.loading=!1})["catch"](function(error){_this.data={},_this.loading=!1,_this.error=error})},getSecondsForCurrentMonth:function(){var currentMonth=""+(new Date).getFullYear()+"-"+("0"+((new Date).getMonth()+1)).slice(-2),results=this.data.usage.durations.filter(function(durationObject){return durationObject._id===currentMonth});return results.length>0?results[0].total:0}},$scope.usage.init()};AdministrationCtrl.$inject=["$rootScope","$scope","$location","DataCache","LayoutManager"],module.exports=AdministrationCtrl},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},SettingsCtrl=function(){function SettingsCtrl($scope,$route,$routeParams,$location,$timeout,DataCache,Category,User,Trivia,SearchService,LayoutManager,ThemeManager){var _this=this;_classCallCheck(this,SettingsCtrl),DataCache.current_user.can("*","*")||$scope.open("/"),this.cache=DataCache,this.moment=window.moment,this.account=DataCache.account,this.Category=Category,this.User=User,this.$route=$route,this.$location=$location,this.Trivia=Trivia,this.ThemeManager=ThemeManager,this.SearchService=SearchService,this.userSearcher=new SearchService,this.selectedUser="",LayoutManager.hideBanner(),$scope.getAdministrationSection=function(){var matches=$location.path().match(/^\/administration\/?([A-Za-z]*)/);return matches&&matches.length>1&&matches[1].length>0?matches[1]:"overview"};this.vplanSettings={uri:DataCache.account.getConfig("MP3VplanUri")||"",enabled:DataCache.account.getConfig("MP3VplanEnabled")||!0,save:function(){void 0!==this.uri&&void 0!==this.enabled&&(DataCache.account.setConfig("MP3VplanUri",this.uri),DataCache.account.setConfig("MP3VplanEnabled",this.enabled))}},$scope.$watch(function(){return _this.vplanSettings.uri},function(uri){return _this.vplanSettings.enabled=!!uri}),this.calendarSettings={uri:DataCache.account.getConfig("MP3CalendarUri")||"",limit:DataCache.account.getConfig("MP3CalendarLimitEvents")||"",save:function(){this.uri&&(DataCache.account.setConfig("MP3CalendarUri",this.uri),DataCache.account.setConfig("MP3CalendarLimitEvents",this.limit))}},this.didyouknowSettings={enabled:DataCache.account.getConfig("MP3DidYouKnowEnabled")||!1,save:function(){void 0!==this.enabled&&DataCache.account.setConfig("MP3DidYouKnowEnabled",this.enabled)}}}return _createClass(SettingsCtrl,{add_trivia:{value:function(triviadata){var _this=this,trivia=new this.Trivia(triviadata);trivia.save().then(function(){_this.cache.trivias.push(trivia),_this.trivia={}})}},searchUserByName:{value:function(searchService){return function(text,callback){searchService.getUser({text:text}).then(function(results){callback(results.map(function(res){return res.item()}))})}}},selectSearchedUser:{value:function(_user){var user=this.cache.users[_user.id];this.selectedUser=user,this.newPermissions=user.getPermissions()}},coworkers:{value:function(){return this.User.getUsersWithAnyRights()}},all_users_without_coworkers:{value:function(){return this.User.getUsersWithoutAnyRights()}},selectRight:{value:function(rights){this.newPermissions[rights.category]||(this.newPermissions[rights.category]={}),this.newPermissions[rights.category][rights.right]=!0,this.saveUserRights(this.selectedUser,this.newPermissions)}},saveUserRights:{value:function(user,permissions){user.permissions||(user.permissions={}),user.savePermissions(permissions)}},getCategoryTitle:{value:function(categoryId){var category=this.cache.categories[categoryId];return category?category.title:void 0}},possibleCategoryRights:{value:function(){return{create:"erstellen",edit:"bearbeiten","delete":"löschen",setControlled:"als kontrolliert markieren",setPublished:"veröffentlichen"}}},possibleGlobalRights:{value:function(){return{admin:"ist Administrator.",uploadVideo:"kann Video-Dateien hochladen.",uploadAudio:"kann Audio-Dateien hochladen."}}},selectTheme:{value:function(theme){this.ThemeManager.setTheme(theme)}}}),SettingsCtrl}();SettingsCtrl.$inject=["$scope","$route","$routeParams","$location","$timeout","DataCache","Category","User","Trivia","SearchService","LayoutManager","ThemeManager"],module.exports=SettingsCtrl},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},CategoriesSettingsController=function(){function CategoriesSettingsController(DataCache,$routeParams){_classCallCheck(this,CategoriesSettingsController),this.DataCache=DataCache,this.$routeParams=$routeParams}return _createClass(CategoriesSettingsController,{selectedCategory:{value:function(){return this.DataCache.categories[this.$routeParams.categoryId]}}}),CategoriesSettingsController}();CategoriesSettingsController.$inject=["DataCache","$routeParams"],module.exports=CategoriesSettingsController},function(module){"use strict";var _toConsumableArray=function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)},_createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},CategoriesSettingsNavigationController=function(){function CategoriesSettingsNavigationController($scope,$timeout,$routeParams,DataCache,Category,LayoutManager){_classCallCheck(this,CategoriesSettingsNavigationController),this.$scope=$scope,this.$timeout=$timeout,this.$routeParams=$routeParams,this.DataCache=DataCache,this.Category=Category,this.LayoutManager=LayoutManager,this.isReorderModeOn=!1}return _createClass(CategoriesSettingsNavigationController,{isHomepageSelected:{value:function(){return!!this.selectedCategory}},createCategory:{value:function(title){var _this=this,position=Math.round(Math.max.apply(Math,_toConsumableArray(Object.keys(this.DataCache.categories).map(function(catId){return _this.DataCache.categories[catId].position}))))+10,category=new this.Category({title:title||"Neue Kategorie",position:position,config:{pageType:"standardPage"}});category.save().then(function(_category){return _this.DataCache.categories[_category.id]=_category})}},deleteSelectedCategory:{value:function(){var _this=this,category=this.selectedCategory(),warning="Diese Aktion kann nicht rückgängig gemacht werden! Möchtest du wirklich "+category.title+" löschen?";window.confirm(warning)&&this.DataCache.deleteCategory(category).then(function(){_this.$scope.open("/administration/categories")})}},categories:{value:function(){return this.DataCache.categories}},selectedCategory:{value:function(){return this.DataCache.categories[this.$routeParams.categoryId]}},getBanner:{value:function(){var size=window.devicePixelRatio>1?"banner@2x":"banner";return this.selectedCategory()&&this.selectedCategory().config.banners&&this.selectedCategory().config.banners.length?this.selectedCategory().config.banners[0][size]:this.LayoutManager.defaultBannerImage()}},resetSelectedCategory:{value:function(){this.$scope.open("/administration/categories")}},enableReorderCategories:{value:function(){var _this=this;this.$timeout(function(){var draggableLiElms=$(".reorder-categories-box").parent().find("ul li[draggable]");console.log(draggableLiElms),console.log($(".reorder-categories-box").parent().find('ul li[draggable="true"]')),draggableLiElms.on("dragstart",_this.reorderFnDragstart.bind(_this)),draggableLiElms.on("dragover",_this.reorderFnDragover.bind(_this)),draggableLiElms.on("dragenter",_this.reorderFnDragenter.bind(_this)),draggableLiElms.on("dragleave",_this.reorderFnDragover.bind(_this)),draggableLiElms.on("dragend",_this.reorderFnDragleave.bind(_this)),draggableLiElms.on("drop",_this.reorderFnDrop.bind(_this)),_this.isReorderModeOn=!0},100,!0)}},reorderFnDragstart:{value:function($event){this.draggingCategory=this.DataCache.categories[$event.target.id.replace("category_","")],console.log("draggingCategory: ",this.draggingCategory)}},reorderFnDragover:{value:function($event){$event.stopPropagation(),$event.preventDefault(),$($event.target).siblings().css({paddingBottom:0});var e=$("#category_"+this.draggingCategory.id);return $($event.target).filter("li:not(.ng-hide)").filter(":not(#category_"+this.draggingCategory.id+")").css({paddingBottom:1.5*e.outerHeight()}),$event.originalEvent.dataTransfer.dropEffect="move",$event.originalEvent.dataTransfer.effectAllowed="move",!1}},reorderFnDragenter:{value:function($event){$event.preventDefault()}},reorderFnDragleave:{value:function($event){$event.preventDefault()}},reorderFnDragend:{value:function($event){$($event.target).siblings().css({paddingBottom:0}),$event.preventDefault()}},reorderFnDrop:{value:function($event){var _this=this;if(!this.draggingCategory)throw new Error("no dragging Category");$($event.target).css({paddingBottom:0});var id=$($event.target).attr("id").replace("category_",""),dropCat=this.DataCache.categories[id],i=0;return Object.keys(this.DataCache.categories).map(function(catId){return _this.DataCache.categories[catId]}).sort(function(cat1,cat2){return cat1.position-cat2.position}).forEach(function(cat){cat!==_this.draggingCategory&&(cat.position=i),i+=10}),this.draggingCategory.position=dropCat.position+5,this.draggingCategory=null,this.$timeout(function(){_this.endReorderedCategories(),_this.enableReorderCategories()},10,!1),this.$scope.$apply(),$event.stopPropagation(),$event.preventDefault(),!1}},saveReorderedCategories:{value:function(){if(this.isReorderModeOn){for(var categoryId in this.DataCache.categories){var category=this.DataCache.categories[categoryId];category.save()}this.endReorderedCategories()}}},endReorderedCategories:{value:function(){var draggableLiElms=$(".reorder-categories-box").parent().find('ul li[draggable="true"]');draggableLiElms.off("dragstart",this.reorderFnDragstart),draggableLiElms.off("dragover",this.reorderFnDragover),draggableLiElms.off("dragenter",this.reorderFnDragenter),draggableLiElms.off("dragleave",this.reorderFnDragover),draggableLiElms.off("dragend",this.reorderFnDragleave),draggableLiElms.off("drop",this.reorderFnDrop),this.isReorderModeOn=!1}}}),CategoriesSettingsNavigationController}();CategoriesSettingsNavigationController.$inject=["$scope","$timeout","$routeParams","DataCache","Category","LayoutManager"];var categoriesSettingsNavigation=function(){return{restrict:"E",templateUrl:"app/administration/categories/categories_settings_navigation.html",controller:CategoriesSettingsNavigationController,controllerAs:"categoriesSettingsNav"}};module.exports=categoriesSettingsNavigation},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},SubcategoriesListingController=function(){function SubcategoriesListingController($scope,$timeout){_classCallCheck(this,SubcategoriesListingController),this.$scope=$scope,this.$timeout=$timeout}return _createClass(SubcategoriesListingController,{enableReorderSubcategories:{value:function(){var _this=this;this.$timeout(function(){var draggableLiElms=$(".subcategories").find('li[draggable="true"]');draggableLiElms.on("dragstart",_this.reorderFnDragstart.bind(_this.$scope)),draggableLiElms.on("dragover",_this.reorderFnDragover.bind(_this.$scope)),draggableLiElms.on("dragenter",_this.reorderFnDragenter.bind(_this.$scope)),draggableLiElms.on("dragleave",_this.reorderFnDragover.bind(_this.$scope)),draggableLiElms.on("dragend",_this.reorderFnDragleave.bind(_this.$scope)),draggableLiElms.on("drop",_this.reorderFnDrop.bind(_this.$scope))},10,!1)}},endReorderedSubcategories:{value:function(){var draggableLiElms=$(".reorder-categories-box").parent().find('ul li[draggable="true"]');draggableLiElms.off("dragstart",this.reorderFnDragstart),draggableLiElms.off("dragover",this.reorderFnDragover),draggableLiElms.off("dragenter",this.reorderFnDragenter),draggableLiElms.off("dragleave",this.reorderFnDragover),draggableLiElms.off("dragend",this.reorderFnDragleave),draggableLiElms.off("drop",this.reorderFnDrop)}},reorderFnDragstart:{value:function($event){var category=this.selectedCategory;this.draggingSubcategory=category.navigation.filter(function(subc){return subc.id===$event.target.id.replace("subcategory_","")})[0]}},reorderFnDragover:{value:function($event){$event.stopPropagation(),$event.preventDefault(),$($event.target).siblings().css({paddingBottom:0});var e=$("#subcategory_"+this.draggingSubcategory.id);return $($event.target).filter("li:not(.ng-hide)").filter(":not(#subcategory_"+this.draggingSubcategory.id+")").css({paddingBottom:1.5*e.outerHeight()}),$event.originalEvent.dataTransfer.dropEffect="move",$event.originalEvent.dataTransfer.effectAllowed="move",!1}},reorderFnDragenter:{value:function($event){$event.preventDefault()}},reorderFnDragleave:{value:function($event){$event.preventDefault()}},reorderFnDragend:{value:function($event){$($event.target).siblings().css({paddingBottom:0}),$event.preventDefault()}},reorderFnDrop:{value:function($event){var _this=this,category=this.selectedCategory;if(!this.draggingSubcategory)return console.error("no dragging Subcategory");$($event.target).css({paddingBottom:0});var id=$($event.target).attr("id").replace("subcategory_",""),dropCat=category.navigation.filter(function(subc){return subc.id===id})[0],i=0;return category.navigation.sort(function(subc1,subc2){return subc1.position-subc2.position}).forEach(function(subc){subc!==_this.draggingSubcategory&&(subc.position=i,subc.save()),i+=10}),this.draggingSubcategory.position=dropCat.position+5,this.draggingSubcategory.save(),this.draggingSubcategory=null,this.subcategories.endReorderedSubcategories(),this.$apply(),$event.stopPropagation(),$event.preventDefault(),!1}},createSubcategory:{value:function(category){category.createSubcategory({title:"Unterkategorie"})
}},removeSubcategory:{value:function(subcategory){this.$scope.selectedCategory.removeSubcategory(subcategory.id)}}}),SubcategoriesListingController}();SubcategoriesListingController.$inject=["$scope","$timeout"];var subcategoriesListing=function(){return{restrict:"E",templateUrl:"app/administration/categories/subcategories_listing.directive.html",controller:SubcategoriesListingController,controllerAs:"subcategories",scope:{items:"=",selectedCategory:"="},link:function(scope){scope.$watch("items",function(){scope.subcategories.endReorderedSubcategories(),scope.subcategories.enableReorderSubcategories(),console.log("items changed")})}}};module.exports=subcategoriesListing},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},PasswordRecoveryCtrl=function(){function PasswordRecoveryCtrl($http,$routeParams,$location,LayoutManager){_classCallCheck(this,PasswordRecoveryCtrl),this.$errors=[],this.$routeParams=$routeParams,this.$http=$http,this.$location=$location,LayoutManager.hideBanner()}return _createClass(PasswordRecoveryCtrl,{isLinkValid:{value:function(){return!!this.$location.$$search.h}},submitRequest:{value:function(recovery){var _this=this;this.$errors=[];var token=this.$routeParams.token;token||this.$errors.push("Der Link ist nicht gültig!"),recovery&&recovery.newpassword||this.$errors.push("Gib bitte ein neues Passwort ein."),recovery&&recovery.newpassword_repeat!==recovery.newpassword&&this.$errors.push("Beide Passwörter müssen übereinstimmen."),this.$errors.length>0||this.$http.post(api_endpoint+"/user/password",{newpassword:recovery.newpassword,newpassword_repeat:recovery.newpassword_repeat,token:token}).then(function(response){200===response.status?(alert("Dein Passwort wurde erfolgreich geändert."),_this.$location.path("/")):_this.$errors.push("Es ist ein Fehler aufgetreten. "+response.data)},function(response){_this.$errors.push(response.data)})}}}),PasswordRecoveryCtrl}();PasswordRecoveryCtrl.$inject=["$http","$routeParams","$location","LayoutManager"],module.exports=PasswordRecoveryCtrl},function(module){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},ArticleOverviewController=function ArticleOverviewController($rootScope,DataCache,ArticleManager,LayoutManager){_classCallCheck(this,ArticleOverviewController);var user=DataCache.current_user;this.user=user,this.manager=ArticleManager.setUser(user),LayoutManager.hideBanner(),$rootScope.hideNavigationbar=!0,$rootScope.$on("$routeChangeStart",function(){return $rootScope.hideNavigationbar=!1})};ArticleOverviewController.$inject=["$rootScope","DataCache","ArticleManager","LayoutManager"],module.exports=ArticleOverviewController},function(module){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},MainCtrl=function MainCtrl(LayoutManager){_classCallCheck(this,MainCtrl),LayoutManager.setBannerImage()};MainCtrl.$inject=["LayoutManager"],module.exports=MainCtrl},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},FeedbackCtrl=function(){function FeedbackCtrl($scope,$http,toaster,DataCache){_classCallCheck(this,FeedbackCtrl),this.error=null,this.loading=!1,this.message={content:"",file:null},this.$http=$http,this.toaster=toaster,this.cache=DataCache,this.$scope=$scope}return _createClass(FeedbackCtrl,{send:{value:function(){var _this=this;return this.loading=!0,this.message&&this.message.content?void this.$http.post(configuration.feedback_endpoint,{content:this.message.content,file:this.message.file||null,url:window.location.href,account_id:this.cache.account.id,user_id:this.cache.current_user.isLoggedIn()?this.cache.current_user.id:null}).then(function(response){if(_this.loading=!1,200===response.status||201===response.status){_this.error=null;var text="Vielen Dank für deine Nachricht.";_this.cache.current_user.isLoggedIn()&&(text+=""+text+" Wir melden uns bei dir."),_this.toaster.pop("success","Nachricht übermittelt.",text),_this.message={content:"",file:null}}else _this.error=response.data||response.data.error||response.statusText||"Unbekannter Fehler."}):(this.error="Bitte gib einen Text ein.",void(this.loading=!1))}},setFile:{value:function(files){var _this=this;if(files&&files.length){var file=files[0];if(!/^image/.test(file.type))return void this.toaster.pop("error","Falsches Dateiformat","Dem Feedback-Formular können nur Bilder angehangen werden.");var reader=new FileReader;reader.onload=function(event){_this.message.file=event.target.result,_this.$scope.$apply()},reader.readAsDataURL(file)}}}}),FeedbackCtrl}();FeedbackCtrl.$inject=["$scope","$http","toaster","DataCache"],module.exports=FeedbackCtrl},function(module){"use strict";var hasLikesService=function($rootScope,$injector,$q,$http){return function(Model){Model.prototype.didLike=function(user){user||(user=$injector.get("DataCache").current_user);var userid=user.id;return userid?this.likes.indexOf(userid)>-1:localStorage.likes?localStorage.likes.split(" ").indexOf(this.id)>-1?!0:void 0:!1},Model.prototype.like=function(){var _this=this,url=this.getUrl()+"/like",promise=$q.defer();return $http.post(url,{ignoreLoadingBar:!0}).success(function(data,status){if(200!==status)return promise.reject(_this);if(_this.likes=data[_this.modelName.toLowerCase()].likes,!$injector.get("DataCache").current_user.isLoggedIn()){localStorage.likes||(localStorage.likes="");var likes=localStorage.likes.split(" ");likes.push(_this.id),localStorage.likes=likes.join(" ")}promise.resolve(_this)},function(){return promise.reject(_this)}),$rootScope.$$phase||$rootScope.$apply(),promise.promise}}};module.exports=hasLikesService},function(module){"use strict";var hasCommentsService=function($injector){return function(proto){proto.getComments=function(){var comments=[],cache=$injector.get("DataCache");return this.comments.forEach(function(commentId){var comment=cache.comments[commentId];comments.push(comment)}),comments}}};module.exports=hasCommentsService},function(module){"use strict";var BnLazySrc=function($window,$document){function LazyImage(element){function isVisible(topFoldOffset,bottomFoldOffset){if(!$(element).is(":visible"))return!1;null===height&&(height=element.height());var top=element.offset().top,bottom=top+height;return bottomFoldOffset>=top&&top>=topFoldOffset||bottomFoldOffset>=bottom&&bottom>=topFoldOffset||topFoldOffset>=top&&bottom>=bottomFoldOffset}function render(){isRendered=!0,renderSource()}function setSource(newSource){source=newSource,isRendered&&renderSource()}function renderSource(){element.on("load",function(){$(this).addClass("loaded")}),element[0].src=source}var source=null,isRendered=!1,height=null;return{isVisible:isVisible,render:render,setSource:setSource}}function link($scope,element,attributes){var lazyImage=new LazyImage(element);lazyLoader.addImage(lazyImage),attributes.$observe("bnLazySrc",function(newSource){lazyImage.setSource(newSource)}),$scope.$on("$destroy",function(){lazyLoader.removeImage(lazyImage)})}var lazyLoader=function(){function addImage(image){images.push(image),renderTimer||startRenderTimer(),isWatchingWindow||startWatchingWindow()}function removeImage(image){for(var i=0;i<images.length;i++)if(images[i]===image){images.splice(i,1);break}images.length||(clearRenderTimer(),stopWatchingWindow())}function checkDocumentHeight(){if(!renderTimer){var currentDocumentHeight=doc.height();currentDocumentHeight!==documentHeight&&(documentHeight=currentDocumentHeight,startRenderTimer())}}function checkImages(){for(var visible=[],hidden=[],windowHeight=win.height(),scrollTop=win.scrollTop(),topFoldOffset=scrollTop,bottomFoldOffset=topFoldOffset+windowHeight,i=0;i<images.length;i++){var image=images[i];image.isVisible(topFoldOffset,bottomFoldOffset)?visible.push(image):hidden.push(image)}for(var i=0;i<visible.length;i++)visible[i].render();images=hidden,clearRenderTimer(),images.length||stopWatchingWindow()}function clearRenderTimer(){clearTimeout(renderTimer),renderTimer=null}function startRenderTimer(){renderTimer=setTimeout(checkImages,renderDelay)}function startWatchingWindow(){isWatchingWindow=!0,win.on("resize.bnLazySrc",windowChanged),win.on("scroll.bnLazySrc",windowChanged),documentTimer=setInterval(checkDocumentHeight,documentDelay)}function stopWatchingWindow(){isWatchingWindow=!1,win.off("resize.bnLazySrc"),win.off("scroll.bnLazySrc"),clearInterval(documentTimer)}function windowChanged(){renderTimer||startRenderTimer()}var images=[],renderTimer=null,renderDelay=100,win=$($window),doc=$document,documentHeight=doc.height(),documentTimer=null,documentDelay=2e3,isWatchingWindow=!1;return{addImage:addImage,removeImage:removeImage}}();return{link:link,restrict:"A"}};module.exports=BnLazySrc},function(module){"use strict";var pandaGreetingPositioningDirective=function(){var columns=[0,0],alignElement=function(element){var height=element.clientHeight;columns[0]>columns[1]?(element.classList.add("right"),columns[1]+=height):(element.classList.add("left"),columns[0]+=height)};return{restrict:"A",scope:{},link:function(scope,elm){var element=elm[0];setTimeout(function(){alignElement(element)},35)}}};module.exports=pandaGreetingPositioningDirective},function(module){"use strict";var PandaScrollfixDirective=function(){return{restrict:"A",link:function(scope,elm,attrs){var offsetTop=elm[0].offsetTop,offsetTopMargin=attrs.scrollfixTopMargin?parseInt(attrs.scrollfixTopMargin,10):0;window.addEventListener("scroll",function(){var offsetTopAllowed=window.scrollY-offsetTopMargin;offsetTopAllowed>offsetTop?elm[0].classList.add(attrs.scrollfixClass):elm[0].classList.remove(attrs.scrollfixClass)})}}};module.exports=PandaScrollfixDirective},function(module){"use strict";var ContentTransformerService=function($sce){var getYoutubeEmbedCode=function(videoquery){var videoId=videoquery.split("&")[0],html='<div class="iframe_embed_responsive"><iframe src="//www.youtube.com/embed/'+videoId+'" frameborder="0" allowfullscreen></iframe></div>';return html};return{detectLinks:function(text){var trust=$sce.trustAsHtml,yt1=function(text){var regexp=/(https?:\/\/)?(www.)?youtu\.be\/(.*)/i,matches=text.match(regexp);return matches?text.replace(regexp,getYoutubeEmbedCode(matches[matches.length-1])):null}(text);if(yt1)return trust(yt1);var yt2=function(text){var regexp=/(https?:\/\/)?(www\.)?youtube\.com\/watch\?v=(.*)/i,matches=text.match(regexp);return matches?text.replace(regexp,getYoutubeEmbedCode(matches[matches.length-1])):void 0}(text);return yt2?trust(yt2):text}}};module.exports=ContentTransformerService},function(module,exports){"use strict";function RemoveHtmlFilter(){return function(string){return string.replace(/<(?:.|\n)*?>/gm,"")}}function OrderObjectsByFilter(){return function(items,field,reverse){var filtered=[];return angular.forEach(items,function(item){filtered.push(item)}),filtered.sort(function(a,b){return a[field]>b[field]?1:-1}),reverse&&filtered.reverse(),filtered}}function UaDetectorFilter(){return function(uastring){return uastring.match(/iPhone/)?"vom iPhone":uastring.match(/iPad/)?"vom iPad":void 0}}exports.RemoveHtmlFilter=RemoveHtmlFilter,exports.OrderObjectsByFilter=OrderObjectsByFilter,exports.UaDetectorFilter=UaDetectorFilter,Object.defineProperty(exports,"__esModule",{value:!0})},function(module){"use strict";var ContenteditableDirective=["$timeout",function($timeout){return{restrict:"A",require:"?ngModel",link:function(scope,element,attrs,ngModel){if(ngModel){var opts={};angular.forEach(["stripBr","noLineBreaks","selectNonEditable","moveCaretToEndOnChange"],function(opt){var o=attrs[opt];opts[opt]=o&&"false"!==o}),element.bind("input",function(){scope.$apply(function(){var html,html2,rerender;html=element.html(),rerender=!1,opts.stripBr&&(html=html.replace(/<br>$/,"")),opts.noLineBreaks&&(html2=html.replace(/<div>/g,"").replace(/<br>/g,"").replace(/<\/div>/g,""),html2!==html&&(rerender=!0,html=html2)),ngModel.$setViewValue(html),rerender&&ngModel.$render(),""===html&&$timeout(function(){element[0].blur(),element[0].focus()})})});var oldRender=ngModel.$render;ngModel.$render=function(){var el,el2,range,sel;oldRender&&oldRender(),element.html(ngModel.$viewValue||""),opts.moveCaretToEndOnChange&&(el=element[0],range=document.createRange(),sel=window.getSelection(),el.childNodes.length>0?(el2=el.childNodes[el.childNodes.length-1],range.setStartAfter(el2)):range.setStartAfter(el),range.collapse(!0),sel.removeAllRanges(),sel.addRange(range))},opts.selectNonEditable&&element.bind("click",function(e){var range,sel,target;target=e.toElement,target!==this&&"false"===angular.element(target).attr("contenteditable")&&(range=document.createRange(),sel=window.getSelection(),range.setStartBefore(target),range.setEndAfter(target),sel.removeAllRanges(),sel.addRange(range))})}}}}];module.exports=ContenteditableDirective},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},UserbarCtrl=function(){function UserbarCtrl($rootScope,DataCache,Page,Collection){_classCallCheck(this,UserbarCtrl),this.cache=DataCache,this.loginuser={},this.$rootScope=$rootScope,this.enabledEmailLogin=!1,this.Page=Page,this.Collection=Collection}return _createClass(UserbarCtrl,{breadcrumbClassForStatus:{value:function(status){var pageOrCollection=this.$rootScope.currentPage||this.$rootScope.currentCollection;return pageOrCollection?pageOrCollection.hasStatus(status)?{checked:!0}:this.cache.current_user.canSetPageOrCollectionStatus(pageOrCollection,status)?{is_allowed:!0}:{}:{}}},setStatus:{value:function(status){var pageOrCollection=this.$rootScope.currentPage||this.$rootScope.currentCollection;pageOrCollection&&pageOrCollection.status!==status&&pageOrCollection.setStatus(status)}},isShowStatusBreadcrumb:{value:function(){var pageOrCollection=this.$rootScope.currentPage||this.$rootScope.currentCollection;return pageOrCollection&&!this.$rootScope.currentCollectionFile&&this.cache.current_user.canEditPage(pageOrCollection)?!0:!1}},isShowUserbar:{value:function(){var user=this.cache.current_user,page=this.$rootScope.currentCollection||this.$rootScope.currentPage||this.$rootScope.currentCategory;return page?user.canEditPage(page)||user.can("setControlled",page)||user.can("setPublished",page):!1}},showEditButton:{value:function(){var user=this.cache.current_user;if(user.can("*","*"))return!0;var currentCategory=this.$rootScope.currentCategory;if(currentCategory&&"greetingsPage"===currentCategory.config.pageType)return!1;var item=this.$rootScope.currentPage||this.$rootScope.currentCollection;return item?this.cache.current_user.canEditPage(item):!1}}}),UserbarCtrl}();UserbarCtrl.$inject=["$rootScope","DataCache","Page","Collection"],module.exports=UserbarCtrl},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},HeaderCtrl=function(){function HeaderCtrl($rootScope,$scope,ngDialog,DataCache,MainSearch,LayoutManager,ArticleManager,Page,Collection){var _this=this;_classCallCheck(this,HeaderCtrl),this.cache=DataCache,this.sm=MainSearch,this.$scope=$scope,this.$rootScope=$rootScope,this.ngDialog=ngDialog,this.Page=Page,this.Collection=Collection,this.ArticleManager=ArticleManager,$scope.lm=LayoutManager,this.navigationCount=function(){return Object.keys(this.cache.categories).length+1},this.navigationStyle=function(){return this.navigationCount?{width:100/this.navigationCount()+"%"}:void 0},$scope.$on("$routeChangeSuccess",function(){_this.showMobileMenu=!1,_this.deactivateSearch()})}return _createClass(HeaderCtrl,{getHomepageCategories:{value:function(){var _this=this;return Object.keys(this.cache.categories).map(function(categoryId){return _this.cache.categories[categoryId]}).filter(function(category){return!category.parent_category_id})}},onlineCounter:{value:function(){return this.ArticleManager.onlineCounter()}},activateSearch:{value:function(){var _this=this;this.searchIsActive=!0,setTimeout(function(){$("header .search_button.edit_button input")[0].focus()},150),$("header input[type=search]").on("keydown",function(e){27===e.keyCode&&0===$(_this).val().length&&(_this.deactivateSearch(),_this.$scope.$apply())})}},deactivateSearch:{value:function(){this.$scope.searchtext="",this.searchIsActive=!1,this.sm.reset()}},toggleSearch:{value:function($event){this.searchIsActive&&"INPUT"!==$event.target.nodeName?this.deactivateSearch():this.activateSearch()}},isActiveCategory:{value:function(category){return this.$rootScope.currentCategory?this.$rootScope.currentCategory.id===category.id:!1}},openCollectionFile:{value:function(file){this.$rootScope.currentCollection&&file&&this.$rootScope.open("/collection/"+this.$rootScope.currentCollection.id+"/file/"+file.id)}},showCreateButton:{value:function(){var _this=this,user=this.cache.current_user;return Object.keys(this.cache.categories).filter(function(catId){return"greetingsPage"!==_this.cache.categories[catId].pageType&&user.can("create",catId)}).length>0}},openNewPageModal:{value:function(){this.ngDialog.open({template:"app/components/header/newpage.html",controller:"NewPageCtrl as newpage",className:"ngdialog-theme-default"})}},openLoginDialog:{value:function(){this.ngDialog.open({template:"app/user/login.html",controller:"UserLoginCtrl as login",className:"ngdialog-theme-default user-login"})}},openRegisterDialog:{value:function(){this.ngDialog.open({template:"app/user/register.html",controller:"UserRegisterCtrl as register",className:"ngdialog-theme-default user-register"})}},openFeedbackDialog:{value:function(){this.ngDialog.open({template:"app/feedback/feedback.html",controller:"FeedbackCtrl as feedback"})}}}),HeaderCtrl}();HeaderCtrl.$inject=["$rootScope","$scope","ngDialog","DataCache","MainSearch","LayoutManager","ArticleManager","Page","Collection"],module.exports=HeaderCtrl},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},NewPageCtrl=function(){function NewPageCtrl($scope,DataCache,Collection,Page){var _this=this;_classCallCheck(this,NewPageCtrl),this.cache=DataCache,this.Collection=Collection,this.Page=Page,this.$scope=$scope,this.newPageSettings={},$scope.$on("ngDialog.opened",function(){_this.onOpen()})}return _createClass(NewPageCtrl,{possibleCategories:{value:function(){var _this=this;return Object.keys(this.cache.categories).filter(function(catId){return _this.cache.current_user.canCreatePage(catId)}).map(function(catId){return _this.cache.categories[catId]})}},onOpen:{value:function(){var categoryId;categoryId=this.$scope.currentCategory?this.$scope.currentCategory.id:Object.keys(this.cache.categories)[0],this.newPageSettings={title:"",category_id:categoryId,author:[{author_type:"panda",author_id:this.cache.current_user.id}]}}},submitCreateForm:{value:function(){var _this=this;this.cache.categories[this.newPageSettings.category_id].navigation.length>0&&(this.newPageSettings.subcategory_id=this.cache.categories[this.newPageSettings.category_id].navigation[0].id),"collectionPage"===this.cache.categories[this.newPageSettings.category_id].config.pageType?new this.Collection(this.newPageSettings).save().then(function(collection){_this.cache.collections[collection.id]=collection,_this.cache.current_user.edit_mode=!0,_this.$scope.open("/collection/"+collection.id)}):new this.Page(this.newPageSettings).save().then(function(page){_this.cache.pages[page.id]=page,_this.cache.current_user.edit_mode=!0,_this.$scope.open("/page/"+page.id)}),this.$scope.closeThisDialog()}}}),NewPageCtrl}();NewPageCtrl.$inject=["$scope","DataCache","Collection","Page"],module.exports=NewPageCtrl},function(module){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},FooterCtrl=function FooterCtrl($scope){_classCallCheck(this,FooterCtrl),$scope.currentYear=moment().year()};FooterCtrl.$inject=["$scope"],module.exports=FooterCtrl},function(module,exports,__webpack_require__){"use strict";var hasMongoId=__webpack_require__(68).hasMongoId,ModuleFactory=function($rootScope,Upload,$q,$http,$injector){var Module=function(){var options=void 0===arguments[0]?{}:arguments[0];this._id=options._id||null,this.title=options.title||"Titel",this.content=options.content||"Lorem ipsum",this.files=(options.files||[]).map(function(file){return file.files&&file.files.mp4&&"video/m4v"===file.files.mp4.mime_type?(file.files.mp4.mime_type="video/mp4",file):file.files&&file.files.mp4&&"video/mov"===file.files.mp4.mime_type?(file.files.mp4.mime_type="video/mp4",file):file}),this.type=options.type,this.state=options.state,this._page=options.page,hasMongoId(this)};return Module.prototype.save=function(pageOrPageId){if("string"==typeof pageOrPageId?this._page=$injector.get("DataCache").pages[pageOrPageId]:pageOrPageId&&(this._page=pageOrPageId),!this._page||!this._page.id)throw"This module must be set to a page or category!";var url,module=this,promise=$q.defer(),successFn=function(data,status){200===status?(module.update(data),promise.resolve(module)):promise.reject(data&&data.error?data.error:data)};return this.id?(url=""+api_endpoint+"/"+(this._page.modelName||"Page").toLowerCase()+"/"+this._page.id+"/module/"+this.id,$http.put(url,{module:this}).success(successFn)):$http.post(""+api_endpoint+"/"+(this._page.modelName||"Page").toLowerCase()+"/"+this._page.id+"/module",{module:this}).success(successFn),promise.promise},Module.prototype.update=function(data){var module=this;Object.keys(data).forEach(function(key){module[key]=data[key]})},Module.prototype["delete"]=function(page){if(page&&(this._page=page),!this.id)throw"this module has no ID!";if(!this._page)throw"please specify a page!";return $http["delete"](""+api_endpoint+"/"+(this._page.modelName||"Page").toLowerCase()+"/"+this._page.id+"/module/"+this.id)},Module.prototype.setFile=function($files,page){var promise=(page&&page.id||this._page_id,$q.defer());if(!$files)return promise.reject(),promise.promise;var can=function(){var DataCache=$injector.get("DataCache");return DataCache.current_user.edit_mode&&DataCache.current_user.canEditPage(page)};if(!can())return promise.reject();var module=this,file=$files[0];if(!file)return promise.reject(),promise.promise;var reader=new FileReader,formData=new FormData;formData.append("file",file);var send=function(){if(!module.id)throw"no id given";var url=url=""+api_endpoint+"/"+(page.modelName||"Page").toLowerCase()+"/"+page.id+"/module/"+module.id;$http({method:"PUT",url:url,data:formData,headers:{"Content-Type":void 0},transformRequest:angular.identity,timeout:15e5}).success(function(data){module.update(data),promise.resolve(module)})};return reader.onload=function(e){$rootScope.$apply(function(){module.files=[e.target.result]}),send()},file&&file.type.match(/^(image)\/.*$/)?reader.readAsDataURL(file):send(),promise.promise},Module};module.exports=ModuleFactory},function(module){"use strict";var ModuleDirective=function(RealTime){return{restrict:"A",scope:{module:"=",page:"="},template:"<article ng-include src=\"'app/components/module/' + module.type + '.html'\"></article>",controller:["$scope","DataCache","SearchService","ScraperManager",function($scope,DataCache,SearchService,ScraperManager){$scope.cache=DataCache,$scope.current_user=DataCache.current_user,$scope.isEditing=function(){return DataCache.current_user.edit_mode&&DataCache.current_user.canEditPage($scope.page)},$scope.realtime=function(){var channelname="private-modules-page-"+$scope.page.id;RealTime.triggerClientEvent(channelname,"update",{module:$scope.module})},$scope.realtimeAndSave=function(){$scope.realtime(),$scope.module.save($scope.page).then(function(){$scope.getAllLinkItems()})},$scope.playVideo=function($inviewpart){if("both"===$inviewpart){var $elem=$("#module_"+$scope.module._id).find("video").get(0);$elem.paused&&!$scope.hasplayed&&($elem.play(),$scope.hasplayed=!0)}},$scope.sm=new SearchService,$scope.searchByTitle=function(text,callback){var URLRegexp=/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/;URLRegexp.test(text)?ScraperManager.getOpenGraphDataFromUrl(text).then(function(result){return callback([result])}):$scope.sm.get({text:text,only:"title"}).then(function(results){callback(results.map(function(res){return res.item()}))})},$scope.selectLink=function(target,link){"object"==typeof target&&("external"===target.type?(link.type=target.type,/^http/.test(target.src)||(target.src="http://"+target.src),link.src=target.src,link.og=target.og):(link.type="internal",link.src=target.id,link.modelName=target.modelName)),$scope.realtimeAndSave()},$scope.setFile=function($files,options){$scope.module.setFile($files,$scope.page,options).then(function(){$scope.realtime()})},$scope.deleteFile=function(file){var i=$scope.module.files.indexOf(file);$scope.module.files.splice(i,1),$scope.realtimeAndSave()};var getLinkItem=function(link){if("internal"===link.type){var fn="load"+link.modelName;DataCache[fn]&&DataCache[fn](link.src).then(function(item){link._item=item})}};$scope.getAllLinkItems=function(){"link"===$scope.module.type&&$scope.module.files.forEach(getLinkItem)},$scope.getMimeType=function(mime_type){return"video/mov"===mime_type||"video/m4v"===mime_type?"video/mp4":mime_type},$scope.getAllLinkItems()}]}};module.exports=ModuleDirective},function(module){"use strict";var AutoResizeVideoDirective=function(){return{restrict:"A",link:function(scope,elm){var element,height;if(element=elm[0],"VIDEO"!==element.nodeName)throw new Error("This is no video!");var setCorrectHeight=function(ratio){ratio||(ratio=element.videoWidth/element.videoHeight),height=parseInt(element.parentElement.clientWidth/1.77,10),element.style.height=height+"px"};setCorrectHeight(16/9),element.addEventListener("loadedmetadata",function(){setCorrectHeight(),window.addEventListener("resize",function(){setCorrectHeight()},!0)},!1)}}};module.exports=AutoResizeVideoDirective},function(module,exports){"use strict";function DragModuleDirective(){return{restrict:"A",scope:{moduleObject:"=dragModule",moduleModel:"="},link:function(scope,el){var element=el[0];element.draggable="draggable",element.addEventListener("dragstart",function(e){return e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("panda/moduleId",scope.moduleObject.module.id),this.classList.add("drag"),document.getElementsByClassName("module-container")[0].classList.add("moving_modules"),!1},!1),element.addEventListener("dragend",function(){return this.classList.remove("drag"),document.getElementsByClassName("module-container")[0].classList.remove("moving_modules"),!1},!1)}}}function DropModuleDirective(){return{restrict:"A",scope:{onDrop:"&"},link:function(scope,el){var element=el[0];element.addEventListener("dragover",function(e){return e.dataTransfer.dropEffect="move",e.preventDefault&&e.preventDefault(),this.classList.add("over"),!1},!1),element.addEventListener("dragenter",function(){return this.classList.add("over"),!1},!1),element.addEventListener("dragleave",function(){return this.classList.remove("over"),!1},!1),element.addEventListener("drop",function(e){var moduleId=e.dataTransfer.getData("panda/moduleId"),i=parseInt(this.getAttribute("module-position-on-page"));return scope.onDrop({$toIndex:i,$moduleId:moduleId}),!1},!1)}}}exports.DragModuleDirective=DragModuleDirective,exports.DropModuleDirective=DropModuleDirective,Object.defineProperty(exports,"__esModule",{value:!0})},function(module){"use strict";var RemoveStylesContenteditableDirective=function(){return{restrict:"A",link:function(scope,elm){elm[0].addEventListener("paste",function(e){e.preventDefault();var text=e.clipboardData.getData("text/plain");document.execCommand("insertText",!1,text)})}}};module.exports=RemoveStylesContenteditableDirective},function(module){"use strict";var UserSelectorDirective=function(){return{restrict:"E",scope:{chosenUsers:"=",userCollection:"=",onChangeCollection:"&"},templateUrl:"app/components/user_selector/user_selector.html",link:function(scope){scope.searchText="",scope.userCollection||(scope.userCollection=[]),scope.chosenUsers||(scope.chosenUsers=[])},controller:["$scope","$filter","SearchService",function($scope,$filter,SearchService){$scope.searchName=function(text,callback){(new SearchService).getUser({text:text}).then(function(results){callback(results.map(function(res){return res.item()}))})},$scope.chose=function(chosen){var user;user=chosen.id?{author_type:"panda",author_id:chosen.id}:{author_type:"custom",author_id:chosen};var userAlreadySelected=$scope.chosenUsers.filter(function(chosenUser){return chosenUser.author_type===user.author_type&&chosenUser.author_id===user.author_id});userAlreadySelected.length>0||($scope.chosenUsers.push(user),$scope.newUserName="",$scope.searchtext="",$scope.onChangeCollection())},$scope.unchose=function(user){var i=$scope.chosenUsers.indexOf(user);$scope.chosenUsers.splice(i,1),$scope.onChangeCollection()}}]}};module.exports=UserSelectorDirective},function(module){"use strict";var ShareboxDirective=function(DataCache,ezfb){return{restrict:"A",scope:{item:"=sharebox"},templateUrl:"app/components/sharebox/sharebox.html",controller:["$scope",function($scope){$scope.likeItem=function(){return $scope.item&&$scope.item.like?$scope.item.like().then(function(){$scope.$$phase||$scope.$apply()}):void 0},$scope.didLikeItem=function(){return $scope.item&&$scope.item.didLike?$scope.item.didLike():!1},$scope.likingUsers=function(){return $scope.item&&$scope.item.likes?$scope.item.likes.filter(function(like){return!like.match(/^custom:/)
}).map(function(userid){return DataCache.users[userid]}):[]},$scope.likeOnFacebook=function(){ezfb.ui({method:"share",href:document.location.href})}}]}};module.exports=ShareboxDirective},function(module){"use strict";var ItemDirective=function(){return{restrict:"A",scope:{item:"=",topstory:"=",forcePreviewSize:"=",enforcePageLayout:"@"},templateUrl:"app/components/item/item.html",controller:["$scope","$rootScope","DataCache","$location",function($scope,$rootScope,DataCache,$location){$scope.moment=moment,$scope.open=$rootScope.open,$scope.baseUrl=$rootScope.baseUrl,$scope.current_user=DataCache.current_user,$scope.classes=function(){var classes=[];return classes.push($scope.item.modelName.toLowerCase()),$scope.topstory===!0&&classes.push("topstory"),classes.join(" ")},$scope.getCommentsCount=function(){if("Collection"!==$scope.item.modelName)return $scope.item.comments.length;try{return $scope.item.files.map(function(file){return file.comments.length}).reduce(function(pre,curr){return pre+curr})}catch(___error){return 0}},$scope.previewSize=function(){return $scope.forcePreviewSize?$scope.forcePreviewSize:$scope.topstory?"middle":"small"},$scope.makeItemProminent=function($ev){$ev.preventDefault(),$scope.item&&(DataCache.makeItemProminent($scope.item),$ev.stopPropagation())},$scope.isNew=function(){if(localStorage&&localStorage.getItem("lastclose")){var date=new Date(localStorage.getItem("lastclose"));if(new Date($scope.item.created_at).getTime()>date.getTime())return!0;if(new Date($scope.item.updated_at).getTime()>date.getTime())return!0}return!1},$scope.openItem=function(item,$event,hash){var path="/"+item.modelName.toLowerCase()+"/"+item.id;$location.path(path),hash&&$location.hash(hash),$event.stopPropagation(),$event.preventDefault()},$scope.openTopic=function(topic,$event){$event.preventDefault(),$location.path("/search/"),$location.search("f","topic:"+topic),$event.stopPropagation()}}]}};module.exports=ItemDirective},function(module){"use strict";var CookieInfoPanelDirective=function(){return{restrict:"AE",scope:{},transclude:!0,replace:!0,templateUrl:"app/components/cookie_info_panel/cookie_info_panel.html",controller:["$rootScope","$scope",function($rootScope,$scope){var didReadCookieInfo="1"===window.localStorage.getItem("didReadCookieInfo");$scope.isShown=function(){return!didReadCookieInfo},$rootScope.hideCookieInfoPanel=function(){didReadCookieInfo=!0,window.localStorage.setItem("didReadCookieInfo","1")}}]}};module.exports=CookieInfoPanelDirective},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},hasMongoId=__webpack_require__(68).hasMongoId,ActivityFactory=function(){var Activity=function(){function Activity(){var options=void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,Activity),this._id=options._id||null,this.trigger=options.trigger||null,this.type=options.type||null,this.content=options.content||null,this.targets=options.targets||[],this.created_at=new Date(options.created_at)||null,hasMongoId(this)}return _createClass(Activity,{update:{value:function(data){var activity=this;Object.keys(this).forEach(function(key){activity[key]=data[key]})}}}),Activity}();return Activity};module.exports=ActivityFactory},function(module){"use strict";var ActivityDirective=function(){return{restrict:"E",templateUrl:"app/components/boxes/activity/activity.html",controller:["$scope","$http","DataCache",function($scope,$http,DataCache){var greetings_category=function(){return Object.keys(DataCache.categories).map(function(cat){return DataCache.categories[cat]}).filter(function(cat){return"greetingsPage"===cat.config.pageType})[0]};$scope.activities=DataCache.activities,$scope.activities_array=function(){return Object.keys($scope.activities).map(function(id){return $scope.activities[id]})},$scope.user_name=function(activity){if(activity&&activity.trigger){if("panda"===activity.trigger.author_type){if(!DataCache.users[activity.trigger.author_id])return;return DataCache.users[activity.trigger.author_id].first_name}return activity.trigger.author_id}},$scope.profile_pic=function(activity){if(activity&&activity.trigger&&"panda"===activity.trigger.author_type){if(!DataCache.users[activity.trigger.author_id])return;return DataCache.users[activity.trigger.author_id].getImage("small")}},$scope.page_title=function(activity){var item=DataCache.pages[activity.targets[0].item_id],collection=DataCache.collections[activity.targets[0].item_id];return item?item.title:collection&&activity.targets[0].file_id?"ein Bild aus "+collection.title:"eine Seite"},$scope.url=function(activity){switch(activity.type){case"greeting":return greetings_category()?$scope.baseUrl+"/#!/category/"+(greetings_category()&&greetings_category()._id):"/#!";case"comment":case"like":return function(activity,DataCache,$scope){var item_id=activity.targets[0].item_id,file_id=activity.targets[0].file_id,collection=DataCache.collections[item_id];return item_id&&file_id?$scope.baseUrl+"/#!/collection/"+item_id+"/file/"+file_id:collection?$scope.baseUrl+"/#!/collection/"+item_id:item_id?$scope.baseUrl+"/#!/page/"+item_id:$scope.baseUrl+"/#!/"}(activity,DataCache,$scope);default:return $scope.baseUrl+"/#!/"}},$scope.classes=function(activity){var classes=[];return classes.push("comment"),"like"===activity.type&&classes.push("activity_minor"),classes.push("activity_type_"+activity.type),classes.join(" ")}}]}};module.exports=ActivityDirective},function(module){"use strict";var TriviaDirective=function(){var triviasLoaded=!1;return{restrict:"E",templateUrl:"app/components/boxes/trivia/trivia.html",controller:["$scope","$http","DataCache","$timeout",function($scope,$http,DataCache,$timeout){$scope.isActiveTriviaIndex=0,$scope.trivias=DataCache.trivias,$timeout(function(){triviasLoaded?$scope.setTriviaIndex():DataCache.loadTrivias().then($scope.setTriviaIndex)},700),$scope.setTriviaIndex=function(){var i=Math.floor(Math.random()*DataCache.trivias.length);return $scope.isActiveTriviaIndex=i,i},$scope.activeTrivia=function(){return DataCache.trivias[this.isActiveTriviaIndex]}}]}};module.exports=TriviaDirective},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},hasMongoId=__webpack_require__(68).hasMongoId,TriviaFactory=function($http,$q,$injector){var Trivia=function(){function Trivia(){var options=void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,Trivia),this._id=options._id||null,this.content=options.content||null,this.created_at=options.created_at||null,hasMongoId(this)}return _createClass(Trivia,{update:{value:function(data){var _this=this;Object.keys(this).forEach(function(key){data[key]&&(_this[key]=data[key])})}},save:{value:function(){var trivia=this,promise=$q.defer();return this.id?$http.put(api_endpoint+"/trivia/"+this.id,{trivia:this}).success(function(data){data&&data.trivia&&trivia.update(data.trivia),promise.resolve(trivia)}).error(function(data){promise.reject(data)}):$http.post(api_endpoint+"/trivia",{trivia:this}).success(function(data){trivia.update(data.trivia),promise.resolve(trivia)}).error(function(data){promise.reject({error:data.data,status:data.status})}),promise.promise}},"delete":{value:function(){var DataCache=$injector.get("DataCache"),i=DataCache.trivias.indexOf(this),promise=$q.defer();$http.put(api_endpoint+"/trivia/"+this.id).success(function(){i>-1&&DataCache.trivias.splice(i,1),promise.resolve()}).error(function(data){promise.reject(data)})}}}),Trivia}();return Trivia};module.exports=TriviaFactory},function(module){"use strict";var VplanDirective=function(){return{restrict:"E",scope:{user:"="},templateUrl:"app/components/boxes/vplan/vplan.html",controller:["$scope","$http",function($scope,$http){$scope.klass={first:null,second:null},$scope.error=null;var _getVplan=function(){var url=api_endpoint+"/vplan";$http.get(url).then(function(response){if(200===response.status){var fussinfos=null;try{fussinfos=response.data.vp.fuss&&[0].fusszeile.map(function(z){return z.fussinfo[0]?z.fussinfo[0]:". "}).join("")}catch(e){fussinfos=""}$scope.vp={kopf:response.data.vp.kopf&&response.data.vp.kopf[0],fuss:fussinfos,aktionen:response.data.vp.haupt&&response.data.vp.haupt[0].aktion,aufsichten:response.data.vp.aufsichten&&response.data.vp.aufsichten[0].aufsichtszeile}}else $scope.error=response.data.error&&response.data.error.message||response.data||"Fehler "+response.status})};$scope.setKlass=function(){$scope.klass.first||alert("Gib deine Klasse ein!"),$scope.klass.first<11&&!$scope.klass.second&&alert("Gib deinen Klassenverband an!"),$scope.user.klass=$scope.klass.second?$scope.klass.first+"/"+$scope.klass.second:$scope.klass.first,$scope.user.save().then(function(){$scope.user.klass&&_getVplan()})},$scope.user.klass&&_getVplan()}]}};module.exports=VplanDirective},function(module){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},Event=function Event(options){_classCallCheck(this,Event),this.start=options.start?moment(options.start):null,this.end=options.end?moment(options.end):null,this.summary=options.summary,this.description=options.description,this.status=options.status,this.type=options.type},EventsDirective=function(){return{restrict:"E",scope:{eventsUri:"=",eventsLimit:"="},templateUrl:"app/components/boxes/events/events.html",controller:["$scope","$http",function($scope,$http){$scope.init=function(){$scope.events=[],$scope.error=null,$scope.loading=!0,$http.get(api_endpoint+"/events").then(function(response){return 200!==response.status?($scope.error=response.data,void($scope.loading=!1)):($scope.loading=!1,void($scope.events=response.data.events.map(function(eventData){return new Event(eventData)})))})},$scope.init()}]}};module.exports=EventsDirective},function(module){"use strict";var _createClass=function(){function defineProperties(target,props){for(var key in props){var prop=props[key];prop.configurable=!0,prop.value&&(prop.writable=!0)}Object.defineProperties(target,props)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},UserListDirectiveController=function(){function UserListDirectiveController($scope,$q,DataCache,User){var _this=this;_classCallCheck(this,UserListDirectiveController),this.$scope=$scope,this.$q=$q,this.cache=DataCache,this.User=User,$scope.users&&($scope.pandaUsers=$scope.users),$scope.$watch("userObjs",function(){return _this.loadUsers($scope.userObjs)},!1)}return _createClass(UserListDirectiveController,{loadUsers:{value:function(){var _this=this;this.$scope.userObjs&&!function(){var pandaUserObjs=_this.$scope.userObjs.filter(function(uobj){return"panda"===uobj.author_type}),customUsers=_this.$scope.userObjs.filter(function(uobj){return"custom"===uobj.author_type}).map(function(uobj){return new _this.User({first_name:uobj.author_id})});_this.$q.all(pandaUserObjs.map(function(userObj){return _this.cache.getUser(userObj.author_id)})).then(function(users){return _this.$scope.pandaUsers=users.concat(customUsers)})}()}}}),UserListDirectiveController}();UserListDirectiveController.$inject=["$scope","$q","DataCache","User"];var UserListDirective=function(){return{restrict:"E",scope:{users:"=",userObjs:"="},templateUrl:"app/components/boxes/user_list/user_list.html",controller:UserListDirectiveController}};module.exports=UserListDirective},function(module,exports){"use strict";function hasMongoId(model){Object.defineProperty(model,"id",{get:function(){return this._id},set:function(id){return this._id=id,id}}),model.isNew=function(){return null===this._id}}exports.hasMongoId=hasMongoId,Object.defineProperty(exports,"__esModule",{value:!0})}]),angular.module("medienportal").run(["$templateCache",function($templateCache){$templateCache.put("app/administration/administration.html",'<div class="row content administration_overview nolayout"><div ng-include="\'app/administration/navigation.html\'"></div><div ng-include="\'app/administration/statistics.html\'"></div><div class="wrap"><section><ul class="menu"><li class="users"><a ng-href="{{baseUrl}}/administration/users"><span class="description">Rechteverwaltung</span></a></li><li class="categories"><a ng-href="{{baseUrl}}/administration/categories"><span class="description">Kategorien</span></a></li><li class="trivia"><a ng-href="{{baseUrl}}/administration/trivia"><span class="description">Homepageboxen</span></a></li><li class="themes"><a ng-href="{{baseUrl}}/administration/themes"><span class="description">Themes</span></a></li></ul></section></div></div>'),$templateCache.put("app/administration/navigation.html",'<nav><ul><li ng-click="open(\'/administration\')" ng-class="{active: getAdministrationSection() === \'overview\'}" value="Übersicht">Übersicht</li><li ng-click="open(\'/administration/users\')" ng-class="{active: getAdministrationSection() === \'users\'}" value="Rechteverwaltung">Rechteverwaltung</li><li ng-click="open(\'/administration/categories\')" ng-class="{active: getAdministrationSection() === \'categories\'}" value="Kategorien">Kategorien</li><li ng-click="open(\'/administration/trivia\')" ng-class="{active: getAdministrationSection() === \'trivia\'}" value="Homepageboxen">Homepageboxen</li><li ng-click="open(\'/administration/themes\')" ng-class="{active: getAdministrationSection() === \'themes\'}" value="Themes">Anzeige</li></ul></nav>'),$templateCache.put("app/administration/statistics.html",'<div class="statistic"><span ng-show="usage.loading">Statistiken werden geladen ....</span><div ng-show="usage.error"><em>Fehler beim Laden der Statistiken.</em><p>{{usage.error}}</p><p><a href="#" ng-click="usage.init()">Nochmal versuchen</a></p></div><article ng-show="!usage.loading && !usage.error"><section><h2 class="title">Speicherplatz</h2><div class="description">Fotos, Videos und Audiodateien • Gesamt: {{usage.data.usage.filesize / 1024 / 1024 / 1024 | number:3}} GB • Verfügbar: {{usage.data.currentPlan.max_space_available / 1024 / 1024 | number:0}} GB</div><div class="loadingwrapper"><div class="percent"><div>{{usage.data.usage.filesize / 1024 / usage.data.currentPlan.max_space_available * 100 | number:0}}% verbraucht</div></div><div class="bar"><div class="barwrapper"><div class="barpercent" style="width:{{usage.data.usage.filesize / 1024 / usage.data.currentPlan.max_space_available * 100}}%;"></div></div></div></div></section><section style="padding-top:30px;"><h2 class="title">Medienumwandlung</h2><div class="description">Videos und Audiodateien • Gesamt: {{usage.getSecondsForCurrentMonth() / 60 | number:0}} Minuten • Verfügbar: {{usage.data.currentPlan.max_media_conversion / 60 | number:0}}</div><div class="loadingwrapper"><div class="percent"><div>{{usage.getSecondsForCurrentMonth() / usage.data.currentPlan.max_media_conversion * 100 | number}}% verbraucht</div></div><div class="bar"><div class="barwrapper"><div class="barpercent" style="width:{{usage.getSecondsForCurrentMonth() / usage.data.currentPlan.max_media_conversion * 100}}%;"></div></div></div></div></section></article></div>'),$templateCache.put("app/administration/themes.html",'<div class="row content settings users_overview nolayout"><div ng-include="\'app/administration/navigation.html\'"></div><div class="small-11 medium-10 large-8 small-centered columns content"><div class="wrap"><section><form ng-submit="settings.ThemeManager.saveCurrentTheme()"><div class="config"><h3>Theme setzen</h3><div class="conig_tab theme" style="text-align:center;"><label class="site_content" ng-class="{active: settings.ThemeManager.currentTheme == theme}" ng-repeat="theme in settings.ThemeManager.getAvailableThemes()" ng-click="settings.selectTheme(theme)"><h3>{{theme.title}}</h3><img ng-src="{{theme.image}}" alt="Vorschau {{theme.title}}"></label></div></div><input type="submit" value="speichern"></form></section></div></div></div>'),$templateCache.put("app/administration/trivia.html",'<div class="row content settings categories nolayout trivia"><div ng-include="\'app/administration/navigation.html\'"></div><div class="row"><aside class="medium-4 content columns"><div class="wrap both"><div class="box sub_navigation"><ul><li ng-class="{ active: selectedSection == \'didyouknow\' }" ng-click="selectedSection = \'didyouknow\'">Wusstest du schon?</li><li ng-class="{ active: selectedSection == \'vplan\' }" ng-click="selectedSection = \'vplan\'">Vertretungsplan</li><li ng-class="{ active: selectedSection == \'calendar\' }" ng-click="selectedSection = \'calendar\'">Terminkalender</li></ul></div></div></aside><div class="medium-8 columns"><section class="events" ng-show="selectedSection == \'calendar\'"><h2><i class="fi-calendar"></i> Terminkalender</h2><div class="box"><h3>URL für öffentlichen iCal-Kalender: (z.B. Google)</h3><form ng-submit="settings.calendarSettings.save()"><input type="url" ng-model="settings.calendarSettings.uri" placeholder="http://www.schulferien.org/iCal/Ferien/icals/Ferien_Sachsen_2016.ics"><select ng-model="settings.calendarSettings.limit"><option value="5">max. 5 Einträge anzeigen</option><option value="10">max. 10 Einträge anzeigen</option><option value="15">max. 15 Einträge anzeigen</option><option value="20">max. 20 Einträge anzeigen</option><option value="25">max. 25 Einträge anzeigen</option><option value="30">max. 30 Einträge anzeigen</option><option value="">Anzahl der Beiträge nicht begrenzen</option></select><input type="submit" value="speichern"></form></div></section><section class="events" ng-show="selectedSection == \'vplan\'"><h2><i class="fi-web"></i> Vertretungsplan</h2><form class="box" ng-submit="settings.vplanSettings.save()"><div class="row"><div class="large-12 columns"><label>Link zur Vertretungsplan-Datei: <input type="text" placeholder="http://example.com/pfad/vps[[JahrMonatTag]].xml" ng-model="settings.vplanSettings.uri"></label></div></div><div class="row"><div class="large-12 columns"><label>Vertretungsplan anzeigen: <input type="checkbox" ng-model="settings.vplanSettings.enabled"></label></div></div><div class="row"><div class="large-12 columns"><input type="submit" value="speichern"></div></div></form></section><section class="didyouknow" ng-show="selectedSection == \'didyouknow\'"><h2>Wusstest du schon?</h2><div class="row"><div class="large-12 columns"><label>"Wusstest du schon?" anzeigen: <input type="checkbox" ng-model="settings.didyouknowSettings.enabled" ng-change="settings.didyouknowSettings.save()"></label></div></div><ul class="categories"><li><div class="new"><textarea ng-model="trivia.content"></textarea> <a href="" ng-click="settings.add_trivia(trivia)">+ hinzufügen</a></div></li><li ng-repeat="trivia in settings.cache.trivias"><div class="category"><p ng-hide="settings.trivias.isEditingTrivia == $index">{{trivia.content}}</p><textarea ng-show="settings.trivias.isEditingTrivia == $index" ng-model="trivia.content"></textarea> <a href="" ng-click="trivia.delete()" class="delete">löschen</a> <a href="" ng-click="settings.trivias.isEditingTrivia = $index" class="edit" ng-hide="settings.trivias.isEditingTrivia == $index">bearbeiten</a> <a href="" ng-click="trivia.save(); settings.trivias.isEditingTrivia = -1" class="edit" ng-show="settings.trivias.isEditingTrivia == $index">speichern</a></div></li></ul></section></div></div></div>'),$templateCache.put("app/administration/users.html",'<div class="row content settings users_overview nolayout"><div ng-include="\'app/administration/navigation.html\'"></div><div class="small-11 medium-10 large-8 small-centered columns content"><div class="wrap"><section><div class="users_search"><mac-autocomplete mac-autocomplete-source="settings.searchUserByName(settings.userSearcher)" mac-autocomplete-on-select="settings.selectSearchedUser(selected, link)" mac-autocomplete-delay="200" mac-placeholder="\'Person suchen\'" ng-model="settings.selectedUserName" class="large-12 columns"><span><img ng-src="{{item.getImage(\'small\')}}" alt="{{item.first_name}} {{item.last_name}}" style="height: 75px"> <b>{{item.first_name}} {{item.last_name}}</b></span></mac-autocomplete></div><div class="selected-user" style="border: 1px solid #000;" ng-show="settings.selectedUser"><p><img ng-src="{{settings.selectedUser.getImage(\'small\')}}" alt="{{settings.selectedUser.first_name}} {{settings.selectedUser.last_name}}" style="height: 75px"> <b>{{settings.selectedUser.first_name}} {{settings.selectedUser.first_name}}</b></p><p></p><h3>Rechte hinzufügen</h3><span ng-repeat="(right, description) in settings.possibleGlobalRights()"><label><input type="checkbox" ng-model="settings.newPermissions[right]" ng-change="settings.saveUserRights(settings.selectedUser, settings.newPermissions)"> {{description}}</label></span><div>kann<form ng-submit="settings.selectRight(newCategoryPermission)"><select ng-model="newCategoryPermission.category"><option ng-repeat="category in settings.cache.categories" ng-value="category.id">{{category.title}}</option></select><select ng-model="newCategoryPermission.right"><option ng-repeat="(right, description) in settings.possibleCategoryRights()" ng-value="right">{{description}}</option></select><input type="submit" value="hinzufügen"></form></div><div><div ng-repeat="(categoryId, rights) in settings.newPermissions"><div ng-repeat="(right, isTrue) in rights">Darf {{settings.getCategoryTitle(categoryId)}} {{settings.possibleCategoryRights()[right]}}.</div></div></div><p></p></div><table class="users_overview"><thead><tr><td colspan="3">Nutzerreche verwalten</td></tr></thead><tbody><tr><td></td><td>Name</td><td>Mitglied seit</td></tr><tr ng-repeat="user in settings.coworkers() | filter:usersearch.text | orderBy:settings.users.order" ng-click="settings.selectSearchedUser(user)"><td colspan="3"><table><tr><td><img ng-src="{{user.getImage()}}" alt="Profilbild von {{user.name}}" class="profilbild"></td><td>{{user.name}}</td><td>{{settings.moment(user.created_at).calendar()}}</td></tr><tr><td colspan="3"><div ng-repeat="(categoryId, rights) in user.permissions[settings.cache.account._id]"><div ng-if="user.isAdmin()">Ist Administrator.</div><div ng-if="user.isAudioUploader()">Kann Audio hochladen.</div><div ng-if="user.isVideoUploader()">Kann Video hochladen.</div><div ng-repeat="(right, isTrue) in rights">Darf {{settings.getCategoryTitle(categoryId)}} {{settings.possibleCategoryRights()[right]}}.</div></div></td></tr></table></td></tr></tbody></table></section></div></div></div>'),$templateCache.put("app/article_overview/article_overview.html",'<div class="row content article_overview nolayout" style="margin-bottom:15px;"><nav><ul><li>Freigabe ({{overviews.manager.onlineCounter()}})</li></ul></nav><div class="small-11 medium-10 large-8 small-centered columns content"><div class="wrap"><section style="overflow: auto"><div class="row status"><div class="medium-5 columns content"><h3>angefangene artikel</h3></div><div class="medium-7 columns content"><ul class="breacrumb"><li>Freigeben</li><li>Kontrolliert</li><li>Sichtbar</li></ul></div></div><div item="item" topstory="false" ng-repeat="item in overviews.manager.editableItemsWithoutStatus()"></div></section><section style="overflow: auto" ng-class="{ advanced: !overviews.user.isAdmin() }"><div class="row status"><div class="medium-5 columns content"><h3>({{overviews.manager.onlineCounter()}}) zu Korrigieren</h3></div><div class="medium-7 columns content"><ul class="breacrumb"><li class="checked"><i class="fi-check"></i></li><li>Kontrolliert</li><li>Sichtbar</li></ul></div></div><article item="item" topstory="false" ng-repeat="item in overviews.manager.editableItemsWithStatus(\'READY\')"></article></section><section style="overflow: auto" ng-class="{ advanced: !overviews.user.isAdmin() }"><div class="row status"><div class="medium-5 columns content"><h3>Warteschlange</h3></div><div class="medium-7 columns content"><ul class="breacrumb"><li class="checked"><i class="fi-check"></i></li><li class="checked"><i class="fi-check"></i></li><li>Sichtbar</li></ul></div></div><article item="item" topstory="false" ng-repeat="item in overviews.manager.editableItemsWithStatus(\'CONTROLLED\')"></article></section></div></div></div>'),$templateCache.put("app/collection/collection.html",'<div class="collection"><div class="row gray"><section class="medium-8 columns content"><div ng-if="collection.currentCollection && collection.isEditing()" class="upload"><input type="file" ngf-drop="" ngf-select="" ngf-change="collection.addFiles($files)" multiple=""><p>Dateien hierher ziehen oder klicken wählen.</p></div><div class="to-be-uploaded" style="overflow: auto"><div class="small-12 columns borderleft-3 content" ng-repeat="file in collection.toBeUploaded"><span class="small-8 columns">{{file.name}}</span> <span class="small-4 columns">wird bald hochgeladen</span></div></div><div class="uploading" style="overflow: auto"><div class="small-12 columns content" ng-repeat="file in collection.uploading"><span class="small-8 columns">{{file.name}}</span> <span class="small-4 columns">wird hochgeladen ...</span></div></div><div class="pictures"><h3 class="hide-for-small"><a>aktuell</a> <span class="informatives">· {{collection.currentCollection.files.length}} Bilder</span></h3><div class="intro" ng-hide="page.isEditing()"><h1 ng-bind-html="collection.currentCollection.title"></h1></div><div class="small-6 large-4 columns content" ng-repeat="file in collection.currentCollection.orderedFiles() track by $index"><div class="preview"><p class="text" ng-show="file.comments.length > 0"><ng-pluralize count="file.comments.length" when="{ 1: \'1 Kommentar\', other: \'{} Kommentare\' }"></ng-pluralize></p><p class="text removeFile" ng-show="collection.isEditing()" ng-click="file.delete()">Bild löschen.</p><a ng-href="{{baseUrl}}/#!/collection/{{collection.currentCollection.id}}/file/{{file._id}}"><img bn-lazy-src="{{file.getFile(\'small\')}}"></a></div></div></div></section><aside class="medium-4 content columns"><div class="wrap both"><div sharebox="collection.currentCollection" ng-hide="collection.isEditing()" ng-if="collection.currentCollection" class="likebox"></div><box-user-list ng-hide="collection.isEditing()" user-objs="collection.currentCollection.author"></box-user-list><div style="margin-top:10px;margin-bottom:10px;" class="config" ng-show="collection.currentCollection && collection.isEditing()"><h2>Informationen</h2><h3>Titel</h3><div class="conig_tab"><p contenteditable="true" ng-model="collection.currentCollection.title" ng-blur="collection.currentCollection.save()"></p></div><h3>Thema</h3><div class="conig_tab"><mac-autocomplete mac-autocomplete-source="collection.cache.available_topics" mac-autocomplete-on-select="collection.setTopic(collection.currentCollection)" mac-autocomplete-delay="200" mac-placeholder="\'Autocomplete\'" ng-model="collection.currentCollection.topic" ng-blur="collection.setTopic(collection.currentCollection)"><span>{{item.value}}</span></mac-autocomplete></div><h3>Kategorie</h3><div class="conig_tab"><select ng-model="collection.currentCollection.category_id" ng-options="category_id as category.title for (category_id, category) in collection.cache.categories" ng-change="collection.currentCollection.save()"></select></div><h3>Subkategorie</h3><div class="conig_tab"><select ng-model="collection.currentCollection.subcategory_id" ng-options="nav.id as nav.title for nav in collection.cache.categories[collection.currentCollection.category_id].navigation" ng-change="collection.currentCollection.save()"></select></div><h3>Sortierung</h3><div class="conig_tab"><select ng-model="collection.currentCollection.config.sorting_option" ng-options="option.key as option.label for option in collection.SORTING_OPTIONS" ng-change="collection.currentCollection.save()"></select></div><h3>Vorschaubild · 1300 x 975 px</h3><div class="conig_tab"><div class="vorschaubild inputfile_wrap"><input type="file" ngf-drop="" ngf-select="" ngf-change="collection.currentCollection.setPreview($files, \'preview\')"> <img ng-src="{{collection.currentCollection.getPreview(\'small\')}}" id="config_preview_picture_dropzone"></div></div><h3>Banner · 2000 x 440 px</h3><div class="conig_tab"><div class="vorschaubild inputfile_wrap"><input type="file" ngf-drop="" ngf-select="" ngf-change="collection.currentCollection.setPreview($files, \'banner\')"> <img ng-src="{{collection.currentCollection.getBanner()}}" id="config_banner_picture_dropzone"></div></div><h3>Autoren</h3><div class="conig_tab"><user-selector user-collection="collection.cache.users" chosen-users="collection.currentCollection.author" on-change-collection="collection.currentCollection.save()"></user-selector></div><h3>Datum</h3><div class="conig_tab"><input type="text" ng-value="collection.moment(collection.currentCollection.created_at).format(\'L\')" ng-blur="collection.editCollectionDate($event)"></div><h3>Weitere Aktionen</h3><div class="conig_tab"><button ng-if="collection.cache.current_user.can(\'delete\', collection.currentCollection.category_id)" class="deleteButton" ng-click="collection.deleteCurrentCollection()">Dieses Album Löschen!</button></div></div></div></aside></div><footer class="row" ng-include="\'app/components/footer/footer.html\'"></footer></div>'),$templateCache.put("app/collection/collectionfile.html",'<div class="collectionfile"><div class="large-9 medium-12 columns content" ng-click="collectionfile.openNextFile()" ng-swipe-left="collectionfile.openNextFile()" ng-swipe-right="collectionfile.openPreviousFile()"><img ng-src="{{collectionfile.currentCollection.getFile(collectionfile.currentCollectionFile, \'standard\')}}"></div><div class="large-3 show-for-large-up columns content gray"><article class="box collectionfile-description" ng-if="collectionfile.showDescriptionBox()"><h3 contenteditable="{{collectionfile.isEditing()}}" ng-blur="collectionfile.currentCollectionFile.save()" ng-model="collectionfile.currentCollectionFile.title"></h3><div contenteditable="{{collectionfile.isEditing()}}" ng-blur="collectionfile.currentCollectionFile.save()" ng-model="collectionfile.currentCollectionFile.description"></div></article><div sharebox="collectionfile.currentCollectionFile" ng-hide="collection.isEditing()" class="likebox" style="margin:0 14px; margin-top:15px;"></div><form ng-submit="collectionfile.addComment()" class="input greeting"><input type="text" name="author" ng-if="!collectionfile.cache.current_user.isLoggedIn()" ng-model="collectionfile.newComment.author.author_id" placeholder="Name" class="author"><div class="author" ng-if="collectionfile.cache.current_user.isLoggedIn()"><img ng-src="{{collectionfile.cache.current_user.getImage()}}" class="profilbild"> {{collectionfile.cache.current_user.name}}</div><textarea name="comment" required="" placeholder="Kommentar" ng-model="collectionfile.newComment.content" class="comment" panda-replace-emojis=""></textarea> <input name="submit" type="submit" value="Kommentar speichern" class="submit"></form><article class="comment" ng-repeat="comment in collectionfile.getComments() | orderBy:\'created_at\':true track by $index"><div ng-if="comment.author.author_type == \'panda\'"><img ng-src="{{comment.getUser().getImage()}}" class="profilbild"> <span class="namec">{{comment.getUser().name}}</span> <span class="flag">· <i class="fi-flag"></i><span class="underline">melden</span></span><span class="flag">· <span class="underline">löschen</span></span><br>{{comment.content}}</div><div ng-if="comment.author.author_type != \'panda\'"><span class="namec">{{comment.author.author_id}}</span> <span class="flag">· <i class="fi-flag"></i><span class="underline">melden</span></span><span class="flag">· <span class="underline">löschen</span></span><br>{{comment.content}}</div></article><div class="box ad"><h3>Werbepause</h3><a href="http://www.schuelerhilfe.de/delitzsch/" target="_blank"><img src="/assets/images/wer_supp_klickermann_l.png" alt="Mit der freundlichen Unterstützung unseres Sponsors Schülerhilfe Delitzsch"></a></div></div></div>'),$templateCache.put("app/category/category.html",'<div class="category"><div ng-if="category.currentCategory.config.pageType != \'greetingsPage\'"><div class="row"><section class="medium-8 columns content module-container" ng-class="category.currentCategory.config.pageType"><div ng-repeat="module_object in category.currentCategoryModules | orderBy:\'position_on_page\'" style="position: relative;" class="page_modules" drop-module="module_object" module-position-on-page="{{module_object.position_on_page}}" ng-if="category.cache.isModuleTypeAvailable(module_object.module.type)" on-drop="category.dropModule($moduleId, $toIndex)"><div class="control row content" drag-module="module_object" module-model="category.moduleModel" draggable="true" ng-if="category.isEditing()"><p>{{module_object.module.type}} <span class="settings"><a><i class="fi-thumbnails"></i> <span>verschieben</span></a> · <a ng-click="category.deleteModule(module_object)" class="underline">entfernen</a></span></p></div><article module="module_object.module" page="category.currentCategory" class="module"></article></div><div class="wrap wrappercategory" ng-hide="category.isEditing()"><div class="subcategory" ng-if="category.onePager" ng-repeat="subcategory in currentCategory.navigation | orderBy:\'position\'" id="{{subcategory.title}}"><h3 class="subtitle">{{subcategory.title}}</h3><div item="item" topstory="false" ng-repeat="item in category.pages_or_collections(subcategory.id) | orderBy:\'created_at\':true" ng-class="{\'small-6\': item.modelName == \'Collection\'}" force-preview-size="[\'smalldouble\', \'small@2x\']" enforce-page-layout="{{item.modelName == \'Collection\'}}"></div></div><div ng-if="!category.onePager"><div item="item" topstory="false" ng-repeat="item in category.pages_or_collections() | orderBy:\'created_at\':true" ng-class="{\'small-6\': item.modelName == \'Collection\'}"></div></div></div><section ng-show="category.isEditing()" class="config"><h2>Modul hinzufügen</h2><div class="conig_tab addmodules" style="text-align:center;"><div class="site_content" ng-repeat="moduleType in category.cache.moduleTypes" ng-click="category.addModule(moduleType)"><h3>{{moduleType.name}}</h3><img ng-src="{{moduleType._image}}" alt="{{moduleType.name}}"><p>{{moduleType._description}}</p></div></div></section></section><aside class="medium-4 content columns"><div class="wrap both"><div class="box sub_navigation" ng-if="currentCategory.navigation.length"><ul ng-if="category.onePager"><li ng-repeat="subcategory in currentCategory.navigation | orderBy:\'position\'" ng-click="category.scrollToSubcategory(subcategory.id)">{{subcategory.title}} <span>· {{category.pages_or_collections(subcategory.id).length}} Elemente</span></li></ul><ul ng-if="!category.onePager"><li ng-repeat="subcategory in currentCategory.navigation | orderBy:\'position\'" ng-click="open(\'/category/\' + currentCategory.id + \'/\' + subcategory.id)">{{subcategory.title}} <span>· {{category.pages_or_collections(subcategory.id).length}} Elemente</span></li></ul></div><div class="box hide-for-small"><h3>Neuste Kommentare</h3><article class="comment" ng-repeat="comment in category.latestComments() | orderBy:\'created_at\':true | limitTo:7"><p ng-click="open(comment.path())"><img class="profilbild" ng-src="{{comment.getUser().getImage()}}" ng-if="comment.getUser().getImage()"> <span class="namec">{{comment.getUser().name}}</span> {{comment.content}}</p></article></div><section ezfb-xfbml="" ng-if="category.currentCategory.config.show_facebook_box && category.currentCategory.config.facebook_box_url" class="hide-for-small"><iframe ng-src="{{\'https://www.facebook.com/plugins/likebox.php?href=http://www.facebook.com/\' + category.currentCategory.config.facebook_box_url + \'&amp;width&amp;height=290&amp;colorscheme=light&amp;show_faces=true&amp;header=false&amp;stream=false&amp;show_border=false&amp;appId=445242912265703\'}}" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:290px;" seamless="" allowtransparency="true"></iframe></section></div></aside></div></div><div ng-if="category.currentCategory.config.pageType == \'greetingsPage\'"><ng-include src="\'app/greeting/greeting.html\'" ng-controller="GreetingsCtrl as greetings"></ng-include></div><footer class="row" ng-include="\'app/components/footer/footer.html\'"></footer></div>'),$templateCache.put("app/error_pages/404.html",'<div class="error404"><div class="row"><div class="medium-12 small-12 columns content"><h1>Houston, wir haben ein Problem!</h1><h2>Diese Seite scheint nicht zu existieren...</h2><p><i class="fi-lightbulb"></i> <span><b>Profi-Tipp:</b><br>Benutze die Suchleiste ganz oben!</span></p><button>zurück</button></div></div><footer class="row" ng-include="\'app/components/footer/footer.html\'"></footer></div>'),$templateCache.put("app/faq/faq.html",'<div class="row gray faq content"><aside class="medium-4 columns content hide-for-small"><div class="wrap both"><div class="box feedback"><h3>Deine Meinung zählt</h3><h3 style="font-size: medium;border: none;">Wie findest du das Medienportal?</h3><form class="input" ng-submit="homepage.sendFeedback(feedback.message)"><textarea name="feedback" required="" class="comment" ng-model="feedback.message"></textarea> <input name="submit" type="submit" value="senden" class="submit"></form></div></div></aside><section class="medium-8 columns content" style="margin-bottom:10px !important; min-height:1500px;"><div class="itemwrap"><p>Das Medienportal ist eine moderne Webplattform, die mit einem starken Fokus auf multimediale Inhalte und einfache Bedienung vorrangig für Schulen, Vereine und kleine Unternehmen entwickelt worden ist.</p><h3>Wer stellt das Medienportal bereit?</h3><p>Das Medienportal wurde von <strong>unsdrei GbR</strong> erstellt und wird auch von ihr betreut. Weitere Informationen findest du auf der <a href="https://medienportal.org">offiziellen Webseite</a>.</p><h3>Gibt es besondere Anforderungen zur Nutzung des Medienportals</h3><p>Um das Medienportal zu nutzen, brauchst du lediglich ein Endgerät mit einer Internetverbindung und einen modernen Browser. Wir unterstützen momentan den Internet Explorer ab Version 10, Opera ab Version 15, Chrome ab Version 32, und Safari ab Version 7.<br>Wir unterstützen alle Betriebssysteme, auf denen eines dieser Browser läuft.</p><h3>Funktioniert das Medienportal auch auf meinem mobilen Gerät?</h3><p>Das Medienportal passt sich in der Darstellung an kleinere Bildschirme, wie sie Smartphones oder Tablets bieten, an. Wir unterstützen die gängigen mobilen Betriebssysteme: iOS ab Version 7, Android ab Version 3.2 und Windows Phone ab Version 8.1.</p><h3>Ich habe einen Vorschlag, wie das Medienportal verbessert werden kann.</h3><p>Schick uns eine Nachricht über das Kontaktformular oder eine Email an <a href="mailto:info@medienportal.org">info@medienportal.org</a>.</p><h3>Werden Daten auf meinem Computer gespeichert?</h3><p>Auf deinem Computer werden im sogenannten <em>LocalStorage</em> und <em>SessionStorage</em> einige wenige Daten gespeichert. Diese dienen der besseren Funktion des Medienportals. So werden zum Beispiel Artikel gespeichert, damit sie nicht jedes Mal neu heruntergeladen werden, oder – falls du dich anmeldest – wird gespeichert, wer du bist, damit du dich nicht jedes Mal neu anmelden musst, wenn du das Medienportal wieder besuchst.<br>Zusätzlich setzt unser Dienstleister <em>Google Analytics</em> ein sogenanntes &#39;Cookie&#39; bei dir. Das ist eine kleine Textdatei, die hilft, dein Verhalten auf der Seite besser zu verstehen. <strong>Dabei werden keine persönlichen Daten erhoben.</strong></p><h3>Wie sicher ist das Medienportal?</h3><p>Sicherheit ist uns ein sehr wichtiges Anliegen. Deine Daten werden über eine <em>SSL-Verbindung</em> verschlüsselt übertragen. Wir haben uns entschieden, keine unverschlüsselten Verbindungen zu erlauben.</p><h3>Anmeldung mit externen Diensten.</h3><p>Solltest du dich über einen Dienstleister (<strong>Facebook</strong> oder <strong>Google</strong>) anmelden, speichert unser System deine ID bei diesem Dienstleister, deine Email-Adresse und ob diese bestätigt ist, deinen Namen und dein Geschlecht.</p><h3>Welche sonstigen Daten werden von mir gespeichert?</h3><p>Wenn du kommentierst, grüßt oder ein Objekt &#39;empfiehlst&#39;, können wir deine IP-Adresse (zum Beispiel um zu verhindern, dass ein nicht-angemeldeter Nutzer zweimal dasselbe Element empfiehlt), den Browser, den du benutzt (um anzeigen zu können, ob du von einem mobilen Endgerät aus kommentiert oder gegrüßt hast) und natürlich den Inhalt und eventuell deinen Namen, speichern.</p><h3>Löschen von Einträgen</h3><p>Sende uns eine Information über das Kontaktformular oder eine Email an <a href="mailto:info@medienportal.org">info@medienportal.org</a>. Wir nehmen dann Verbindung mit dir auf, um das Problem zu lösen.</p><h3>Ich bin auf einem Bild zu sehen. Ich fühle mich dadurch gestört und möchte, dass das Bild entfernt wird. Wie gehe ich vor?</h3><p>Sende über das Kontaktformular eine Email an die inhaltlich Veranwortlichen, oder an <strong>unsdrei GbR</strong>. Wir leiten die Email für dich weiter.</p><h3>Google Analytics und TrackJS</h3><p>Wir analysieren anonymisierte Daten über das Medienportal, zum Beispiel wie oft eine Seite besucht worden ist, wie lange Besucher bleiben oder welche Browser die Nutzer verwenden. Wir benutzen diese Daten, um das Medienportal weiter zu verbessern. Dazu wird der Dienst <a href="http://analytics.google.com">Google Analytics</a> verwendet.<br>Zusätzlich benutzen wir den Dienst <a href="http://trackjs.com">trackJS</a>, der den Inhalt von Fehlermeldungen speichert und wo und wie sie aufgetreten sind, damit wir Fehler so schnell wie möglich beseitigen können.</p><h3>Werden meine Daten außerhalb der Europäischen Union gesandt?</h3><p>Alle Daten befinden sich auf Server innerhalb der europäischen Union in Frankfurt und Irland. Jedoch sind die meisten unserer Dienstleister (zum Beispiel <a href="http://aws.amazon.com">amazon</a> oder <a href="http://digitalocean.com">digitalocean</a>) amerikanische Unternehmen.<br>Über die Nutzung deiner Daten durch dritte Dienste (Facebook, Youtube, Google) haben wir keinen Einfluss.</p><h3>Ich bin Verwantwortlicher einer Schule und würde das Medienportal gerne für meine Schule nutzen.</h3><p>Wir freuen uns sehr Ihr Interesse geweckt zu haben. Weitere Informationen erhalbten Sie über <a href="https://medienportal.org">medienportal.org</a></p><h3>Benutzt ihr Open Source Software, die ihr erwähnen müsst?</h3><p>Wir benutzen und schätzen Open Source Software. Folgende OSS verwenden wir:</p><ul><li><a href="http://angularjs.org">AngularJS</a></li><li><a href="http://jquery.com">jQuery</a></li><li><a href="https://github.com/pc035860/angular-easyfb">angular-easyfb</a></li><li><a href="http://luisfarzati.github.io/angulartics/">angularitics</a></li><li><a href="https://github.com/mrzmyr/angular-google-plus">angular-google-plus</a></li><li><a href="https://github.com/danialfarid/ng-file-upload">angular-file-upload</a></li><li><a href="http://chieffancypants.github.io/angular-loading-bar/">angular-loading-bar</a></li><li><a href="https://github.com/mbenford/ngTagsInput">ng-tags-input</a></li><li><a href="https://www.google.de/search?q=angular-macgyver&oq=angular-macgyver&aqs=chrome..69i57j0j69i60.437j0j4&sourceid=chrome&es_sm=91&ie=UTF-8">angular-macgyver</a></li><li><a href="https://github.com/thenikso/angular-inview">angular-inview</a></li><li><a href="http://momentjs.com">momentjs</a></li><li><a href="http://foundation.zurb.com">foundation</a></li><li>... und noch viele mehr, denen wir zutiefst zum Dank verpflichtet sind.</li></ul></div></section></div>'),$templateCache.put("app/feedback/feedback.html",'<div class="box feedback"><h1>Wie findest du das Medienportal?</h1><span class="error" ng-if="feedback.error">{{feedback.error}}</span> <span class="is-loading" ng-if="feedback.loading">Nacricht wird versendet ...</span><form class="input" ng-submit="feedback.send()" ng-if="!feedback.loading"><textarea name="feedback" required="" class="comment" ng-model="feedback.message.content"></textarea><div class="wrapper"><label>Bild anhängen: <input type="file" ngf-drop="" ngf-select="" ngf-change="feedback.setFile($files)"></label> <img ng-src="{{feedback.message.file}}" ng-show="feedback.message.file"></div><input name="submit id=" submit"="" type="submit" value="senden" class="submit"></form><div style="clear:both;"></></div></div>'),$templateCache.put("app/homepage/homepage.html",'<div class="row gray content"><section class="medium-8 columns content" style="margin-bottom:10px !important; min-height:1500px;"><div class="show-for-small" style="padding: 10px;background-color: white;border-bottom: 1px solid #EFEFEF;"><v-plan ng-if="homepage.cache.account.getConfig(\'MP3VplanEnabled\') && homepage.cache.current_user.isLoggedIn()" user="homepage.cache.current_user"></v-plan><events-box events-uri="homepage.cache.account.getConfig(\'MP3CalendarUri\')" events-limit="homepage.cache.account.getConfig(\'MP3CalendarLimitEvents\')" ng-if="homepage.cache.account.getConfig(\'MP3CalendarUri\')"></events-box></div><div class="itemwrap" style="margin:10px 0px 0px 10px;"><div item="homepage.topstory()" topstory="true"></div><span ng-repeat-start="page in homepage.pagesAndCollections() | limitTo:10"></span><div item="page" topstory="false"></div><span ng-repeat-end=""></span></div></section><aside class="medium-4 columns content hide-for-small"><div class="wrap both"><v-plan ng-if="homepage.cache.account.getConfig(\'MP3VplanEnabled\') && homepage.cache.current_user.isLoggedIn()" user="homepage.cache.current_user"></v-plan><activity-box></activity-box><events-box events-uri="homepage.cache.account.getConfig(\'MP3CalendarUri\')" events-limit="homepage.cache.account.getConfig(\'MP3CalendarLimitEvents\')" ng-if="homepage.cache.account.getConfig(\'MP3CalendarUri\')"></events-box><trivia-box ng-if="homepage.cache.account.getConfig(\'MP3DidYouKnowEnabled\') != false"></trivia-box><div class="fb-page" data-href="https://www.facebook.com/medienportal" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="false" data-show-posts="false"></div><div class="box ad"><h3>Werbepause</h3><a href="http://www.schuelerhilfe.de/delitzsch/" target="_blank"><img src="/assets/images/wer_supp_klickermann_l.png" alt="Mit der freundlichen Unterstützung unseres Sponsors Schülerhilfe Delitzsch"></a></div><feedback-box></feedback-box></div></aside></div><div class="row content randomarticle" style="min-height:700px;"><div class="large-8 small-11 small-centered columns content"><h3>Zufällige Artikel</h3><div item="page" topstory="$index == 0" ng-repeat="page in homepage.cache.randomPages"></div></div></div><div class="row content" style="margin-bottom:15px !important;"><section class="large-8 small-11 small-centered columns content"><div class="wrap zeroleft"><div ng-repeat="topic in homepage.cache.available_topics | limitTo:3"><h3>{{topic}}</h3><div item="page" ng-repeat="page in homepage.pagesAndCollections() | filter:{\'topic\':topic}:true | limitTo:2 | orderBy:\'created\'"></div></div></div></section></div><footer class="row" ng-include="\'app/components/footer/footer.html\'"></footer>'),$templateCache.put("app/greeting/greeting.html",'<div class="row gray"><div class="medium-4 columns content"><div class="activity_box"><h3 class="rightside">Grüß die Welt, wie es dir gefällt!</h3><form ng-submit="greetings.addGreeting(greetings.newGreeting)" class="input greeting"><input type="text" name="author" ng-if="!greetings.cache.current_user.isLoggedIn()" ng-model="greetings.newGreeting.author.author_id" placeholder="Name" class="author"><div class="author" ng-if="greetings.cache.current_user.isLoggedIn()"><img ng-src="{{greetings.cache.current_user.getImage()}}" class="profilbild" ng-if="greetings.cache.current_user.getImage()"> {{greetings.cache.current_user.name}}</div><textarea panda-replace-emojis="" name="comment" required="" placeholder="Wem sagst du Hallo?" ng-model="greetings.newGreeting.content" class="comment"></textarea> <input name="submit" type="submit" value="Gruß abschicken" class="submit"></form></div></div><div class="medium-8 columns content white"><div class="medium-6 columns greetings content" ng-repeat="greeting in greetings.greetings() | orderBy:\'created_at\':true" panda-greeting-positioning=""><article class="comment"><p><img class="profilbild" ng-src="{{greeting.getUser().getImage()}}" alt="{{greeting.getUser().name}}" width="92" height="92" ng-if="greeting.getUser().getImage()"> <span class="namec">{{greeting.getUser().name}}</span><span class="commenttime">· {{greetings.moment(greeting.created_at).fromNow()}}</span><br><div ng-bind-html="greetings.transform(greeting.content)"></div></p></article></div></div></div>'),$templateCache.put("app/impress/impress.html",'<div class="row gray faq content"><aside class="medium-4 columns content hide-for-small"><div class="wrap both"><div class="box feedback"></div></div></aside><section class="medium-8 columns content" style="margin-bottom:10px !important; min-height:1500px;"><div class="itemwrap"><p>Impressum nach deutschem Telemdiengesetz (§5 TMG)</p><h3>Kontakt</h3><p><strong>einsA GbR</strong><br><i>c/o Eike Wiewiorra</i><br>Wilhelminenstraße 10<br>04129 Leipzig<br></p><p>kontaktiere@einsa.net</p><h3>Datenschutz</h3><p>Die Datenschutzbestimmungen sind hier zu finden: <a href="/privacy">Datenschutz</a></p></div></section></div>'),$templateCache.put("app/main/main.html",'<div class="container"><div ng-include="\'app/components/navbar/navbar.html\'"></div><div class="row"><div class="large-12 large-text-center columns"><div class="panel"><h1>\'Allo, \'Allo!</h1><img src="assets/images/yeoman.png" alt="I\'m Yeoman"><br><p>Always a pleasure scaffolding your apps.</p><p><a class="button radius" ng-href="#">Splendid!</a></p></div></div></div><div class="row"><div class="large-4 columns" ng-repeat="awesomeThing in awesomeThings | orderBy:\'rank\'"><div class="th"><img class="right" ng-src="assets/images/{{awesomeThing.logo}}" alt="{{awesomeThing.title}}"><div class="caption"><h3>{{awesomeThing.title}}</h3><p>{{awesomeThing.description}}</p><p><a ng-href="{{awesomeThing.url}}">{{awesomeThing.url}}</a></p></div></div></div></div><div class="row"><div class="large-12 columns"><hr><p>With ♥ from <a href="https://twitter.com/Swiip">@Swiip</a></p></div></div></div>'),$templateCache.put("app/page/page.html",'<div><div class="row gray"><div class="medium-8 small-12 columns content"><div ng-if="!page.isLoading" class="wrap zeroright"><section class="pagebody module-container" ng-class="page.currentPage.page_type"><h3><a ng-if="page.currentPage.topic" ng-href="{{baseUrl}}/#!/search/?f=topic:{{page.currentPage.topic}}">{{page.currentPage.topic}}</a> <span class="informatives">· {{page.moment(page.currentPage.created_at).format(\'L\')}}<span class="hide-for-small" ng-if="page.currentPageComments.length > 0">·<ng-pluralize count="page.currentPageComments.length" when="{ 1: \'1 Kommentar\', other: \'{} Kommentare\' }"></ng-pluralize></span> <span class="hide-for-small" ng-if="page.currentPage.likes.length > 0">·<ng-pluralize count="page.currentPage.likes.length" when="{ 1: \'Eine Empfehlung\', other: \'{} Empfehlungen\' }"></ng-pluralize></span></span></h3><img class="show-for-small" ng-src="{{page.currentPage.getBanner(small)}}" title="Banner für {{page.currentPage.title}}"><div class="intro"><h1 ng-bind-html="page.currentPage.title"></h1><p>{{page.currentPage.config.excerp}}</p></div><div ng-repeat="module_object in page.currentPageModules | orderBy:\'position_on_page\'" style="position: relative;" class="page_modules" drop-module="module_object" module-position-on-page="{{module_object.position_on_page}}" ng-if="page.cache.isModuleTypeAvailable(module_object.module.type)" on-drop="page.dropModule($moduleId, $toIndex)"><div class="control row content" drag-module="module_object" module-model="page.moduleModel" draggable="true" ng-if="page.isEditing()"><p>{{module_object.module.type}} <span class="settings"><a><i class="fi-thumbnails"></i> <span>verschieben</span></a> · <a ng-click="page.deleteModule(module_object)" class="underline">entfernen</a></span></p></div><article module="module_object.module" page="page.currentPage" class="module"></article></div><div style="padding:10px; border-top: 1px solid rgb(239, 239, 239);" ng-hide="page.isEditing()" ng-if="page.currentPage.status == \'PUBLISHED\'"><div sharebox="page.currentPage" ng-hide="page.isEditing()" style="margin:0px;background:white;border-color:white;" class="likebox" ng-if="page.currentPage.status == \'PUBLISHED\'"></div></div><section ng-hide="page.isEditing()" ng-if="page.currentPage.status == \'PUBLISHED\'" id="comments"><h3 style="color:white;">Kommentieren <span class="informatives">·<ng-pluralize count="page.currentPageComments.length" when="{ 1: \'1 Kommentar\', other: \'{} Kommentare\' }"></ng-pluralize></span></h3><form ng-submit="page.addComment()" class="input" style="border-bottom:1px dotted lightgray;" charset="utf-8"><input type="text" name="author" ng-if="!page.cache.current_user.isLoggedIn()" ng-model="page.newComment.author.author_id" placeholder="Name" class="author"><div class="author" ng-if="page.cache.current_user.isLoggedIn()"><img ng-src="{{page.cache.current_user.getImage()}}" class="profilbild"> {{page.cache.current_user.name}}</div><textarea name="comment" placeholder="Kommentar" ng-model="page.newComment.content" class="comment" required="" panda-replace-emojis=""></textarea> <input name="submit" type="submit" value="Kommentar speichern" class="submit"></form><article class="comment" style="border-bottom:1px dotted lightgray;" ng-repeat="comment in page.currentPageComments | orderBy:\'created_at\':true track by $index"><div ng-if="comment.author.author_type == \'panda\'"><img ng-src="{{comment.getUser().getImage()}}" class="profilbild"> <span class="namec">{{comment.getUser().name}}</span> <span class="commenttime">· {{page.moment(comment.created_at).fromNow()}}</span> <span class="flag" ng-if="!comment.reported" ng-click="comment.report()">· <i class="fi-flag"></i><span class="underline">melden</span></span> <span class="flag">· <span class="underline" ng-click="page.deletePageComment(comment)" ng-if="page.cache.current_user.can(\'*\', \'*\')">löschen</span></span><br>{{comment.content}}</div><div ng-if="comment.author.author_type != \'panda\'"><span class="namec">{{comment.author.author_id}}</span> <span class="commenttime">· {{page.moment(comment.created_at).fromNow()}}</span> <span class="flag" ng-click="comment.report()" ng-if="!comment.reported">· <i class="fi-flag"></i><span class="underline">melden</span></span> <span class="flag">· <span class="underline" ng-click="comment.delete()" ng-if="page.cache.current_user.can(\'*\', \'*\')">löschen</span></span><br>{{comment.content}}</div></article></section></section><section ng-show="page.isEditing()" class="config"><h2>Modul hinzufügen</h2><div class="conig_tab addmodules" style="text-align:center;"><div class="site_content" ng-repeat="moduleType in page.cache.moduleTypes" ng-click="page.addModule(moduleType)"><h3>{{moduleType.name}}</h3><img ng-src="{{moduleType._image}}" alt="{{moduleType.name}}"><p>{{moduleType._description}}</p></div></div></section></div></div><aside class="medium-4 content columns hide-for-small"><div class="wrap both bottom"><div ng-hide="page.isEditing()"><div sharebox="page.currentPage" class="likebox" ng-if="page.currentPage.status == \'PUBLISHED\'"></div><box-user-list user-objs="page.currentPage.author"></box-user-list><article class="item topstory" ng-click="open(\'/page/\' + page.getRandomPage().id)"><div style="margin-top:0px; border: 1px solid #efefef; border-radius: 2px;"><img ng-src="{{page.getRandomPage().getPreview(\'small\')}}"><h2>{{page.getRandomPage().title}}</h2><p class="excerp teasertext" ng-bind-html="page.getRandomPage().config.excerp" style="margin-top:5px;"></p></div></article><div class="box extra facts" style="margin-bottom:0px; min-height:70px;" ng-if="page.currentPage.tags.length > 0"><h3><i class="fi-magnifying-glass"></i> Schlagworte</h3><p class="tags"><a class="label" href="{{baseUrl}}/#!/search/?f=tags:{{tag}}" ng-repeat="tag in page.currentPage.tags track by $index">{{tag}}</a></p></div></div><div ng-show="page.isEditing()" class="config"><h2>Informationen</h2><h3>Titel</h3><div class="conig_tab"><p contenteditable="true" ng-model="page.currentPage.title" ng-blur="page.currentPage.save()"></p></div><h3>Beschreibung</h3><div class="conig_tab"><p class="intro"><span contenteditable="true" ng-model="page.currentPage.config.excerp" ng-blur="page.currentPage.save()"></span></p></div><h3>Thema</h3><div class="conig_tab"><mac-autocomplete mac-autocomplete-source="page.cache.available_topics" mac-autocomplete-on-select="page.setTopic(page.currentPage)" mac-autocomplete-delay="200" mac-placeholder="\'Autocomplete\'" ng-model="page.currentPage.topic" ng-blur="page.setTopic(page.currentPage)"><span>{{item.value}}</span></mac-autocomplete></div><h3>Kategorie</h3><div class="conig_tab"><select ng-model="page.currentPage.category_id" ng-options="category_id as category.title for (category_id, category) in page.cache.categories" ng-change="page.currentPage.save()"></select><select ng-model="page.currentPage.subcategory_id" ng-options="nav.id as nav.title for nav in page.cache.categories[page.currentPage.category_id].navigation" ng-change="page.currentPage.save()"></select></div><h3>Schlagworte</h3><div class="conig_tab"><tags-input ng-model="currentTags" custom-class="pagetags" placeholder="Füge ein Schlagwort hinzu" enable-editing-last-tag="true" on-tag-added="page.addTag($tag.text)" on-tag-removed="page.currentPage.save()"><auto-complete source="page.findTags($query)" min-length="0" max-results-to-show="8"></auto-complete></tags-input></div><h3>Vorschaubild · 1300 x 975 px</h3><div class="conig_tab"><div class="vorschaubild inputfile_wrap"><input type="file" ngf-drop="" ngf-select="" ngf-change="page.currentPage.setPreview($files, \'preview\')"> <img ng-src="{{page.currentPage.getPreview(\'small\')}}" id="config_preview_picture_dropzone"></div></div><h3>Banner · 2000 x 440 px</h3><div class="conig_tab"><div class="vorschaubild inputfile_wrap"><input type="file" ngf-drop="" ngf-select="" ngf-change="page.currentPage.setPreview($files, \'banner\')"> <img ng-src="{{page.currentPage.getBanner()}}" id="config_banner_picture_dropzone"></div></div><h3>Autoren</h3><div class="conig_tab"><user-selector user-collection="page.cache.users" chosen-users="page.currentPage.author" on-change-collection="page.currentPage.save()"></user-selector></div><h3>Datum</h3><div class="conig_tab"><input type="text" ng-value="page.moment(page.currentPage.created_at).format(\'L\')" ng-blur="page.editPageDate($event)"></div><h3>Weitere Aktionen</h3><div class="conig_tab"><button ng-if="page.cache.current_user.can(\'delete\', page.currentPage.category_id)" class="deleteButton" ng-click="page.deleteCurrentPage()">Diese Seite Löschen!</button></div></div></div></aside></div><footer class="row" ng-include="\'app/components/footer/footer.html\'"></footer></div>'),$templateCache.put("app/privacy/privacy.html",'<div class="row gray faq content"><aside class="medium-4 columns content hide-for-small"><div class="wrap both"><div class="box feedback"><h3>Deine Meinung zählt</h3><h3 style="font-size: medium;border: none;">Wie findest du das Medienportal?</h3><form class="input" ng-submit="homepage.sendFeedback(feedback.message)"><textarea name="feedback" required="" class="comment" ng-model="feedback.message"></textarea> <input name="submit" type="submit" value="senden" class="submit"></form></div></div></aside><section class="medium-8 columns content" style="margin-bottom:10px !important; min-height:1500px;"><div class="itemwrap"><h2>Datenschutzerklärung</h2><h3 id="dsg-general-intro"></h3><p>Diese Datenschutzerklärung klärt Sie über die Art, den Umfang und Zweck der Verarbeitung von personenbezogenen Daten (nachfolgend kurz „Daten“) innerhalb unseres Onlineangebotes und der mit ihm verbundenen Webseiten, Funktionen und Inhalte sowie externen Onlinepräsenzen, wie z.B. unser Social Media Profile auf (nachfolgend gemeinsam bezeichnet als „Onlineangebot“). Im Hinblick auf die verwendeten Begrifflichkeiten, wie z.B. „Verarbeitung“ oder „Verantwortlicher“ verweisen wir auf die Definitionen im Art. 4 der Datenschutzgrundverordnung (DSGVO).<br><br></p><h3 id="dsg-general-controller">Verantwortlicher</h3><p><span class="tsmcontroller">einsA GbR<br>c/o Eike Wiewiorra<br>Wilhelminenstraße 10<br>04129 Leipzig<br><br>kontakt@einsa.net<br>Geschäftsführer: Eike Wiewiorra<br>https://www.einsa.net/impressum/</span></p><h3 id="dsg-general-datatype">Arten der verarbeiteten Daten:</h3><p>- Bestandsdaten (z.B., Namen, Adressen).<br>- Kontaktdaten (z.B., E-Mail, Telefonnummern).<br>- Inhaltsdaten (z.B., Texteingaben, Fotografien, Videos).<br>- Nutzungsdaten (z.B., besuchte Webseiten, Interesse an Inhalten, Zugriffszeiten).<br>- Meta-/Kommunikationsdaten (z.B., Geräte-Informationen, IP-Adressen).<br></p><h3 id="dsg-general-datasubjects">Kategorien betroffener Personen</h3><p>Besucher und Nutzer des Onlineangebotes (Nachfolgend bezeichnen wir die betroffenen Personen zusammenfassend auch als „Nutzer“).<br></p><h3 id="dsg-general-purpose">Zweck der Verarbeitung</h3><p>- Zurverfügungstellung des Onlineangebotes, seiner Funktionen und Inhalte.<br>- Beantwortung von Kontaktanfragen und Kommunikation mit Nutzern.<br>- Sicherheitsmaßnahmen.<br>- Reichweitenmessung/Marketing<br><span class="tsmcom"></span></p><h3 id="dsg-general-terms">Verwendete Begrifflichkeiten</h3><p>„Personenbezogene Daten“ sind alle Informationen, die sich auf eine identifizierte oder identifizierbare natürliche Person (im Folgenden „betroffene Person“) beziehen; als identifizierbar wird eine natürliche Person angesehen, die direkt oder indirekt, insbesondere mittels Zuordnung zu einer Kennung wie einem Namen, zu einer Kennnummer, zu Standortdaten, zu einer Online-Kennung (z.B. Cookie) oder zu einem oder mehreren besonderen Merkmalen identifiziert werden kann, die Ausdruck der physischen, physiologischen, genetischen, psychischen, wirtschaftlichen, kulturellen oder sozialen Identität dieser natürlichen Person sind.<br><br>„Verarbeitung“ ist jeder mit oder ohne Hilfe automatisierter Verfahren ausgeführte Vorgang oder jede solche Vorgangsreihe im Zusammenhang mit personenbezogenen Daten. Der Begriff reicht weit und umfasst praktisch jeden Umgang mit Daten.<br><br>„Pseudonymisierung“ die Verarbeitung personenbezogener Daten in einer Weise, dass die personenbezogenen Daten ohne Hinzuziehung zusätzlicher Informationen nicht mehr einer spezifischen betroffenen Person zugeordnet werden können, sofern diese zusätzlichen Informationen gesondert aufbewahrt werden und technischen und organisatorischen Maßnahmen unterliegen, die gewährleisten, dass die personenbezogenen Daten nicht einer identifizierten oder identifizierbaren natürlichen Person zugewiesen werden.<br><br>„Profiling“ jede Art der automatisierten Verarbeitung personenbezogener Daten, die darin besteht, dass diese personenbezogenen Daten verwendet werden, um bestimmte persönliche Aspekte, die sich auf eine natürliche Person beziehen, zu bewerten, insbesondere um Aspekte bezüglich Arbeitsleistung, wirtschaftliche Lage, Gesundheit, persönliche Vorlieben, Interessen, Zuverlässigkeit, Verhalten, Aufenthaltsort oder Ortswechsel dieser natürlichen Person zu analysieren oder vorherzusagen.<br><br>Als „Verantwortlicher“ wird die natürliche oder juristische Person, Behörde, Einrichtung oder andere Stelle, die allein oder gemeinsam mit anderen über die Zwecke und Mittel der Verarbeitung von personenbezogenen Daten entscheidet, bezeichnet.<br><br>„Auftragsverarbeiter“ eine natürliche oder juristische Person, Behörde, Einrichtung oder andere Stelle, die personenbezogene Daten im Auftrag des Verantwortlichen verarbeitet.<br></p><h3 id="dsg-general-legalbasis">Maßgebliche Rechtsgrundlagen</h3><p>Nach Maßgabe des Art. 13 DSGVO teilen wir Ihnen die Rechtsgrundlagen unserer Datenverarbeitungen mit. Sofern die Rechtsgrundlage in der Datenschutzerklärung nicht genannt wird, gilt Folgendes: Die Rechtsgrundlage für die Einholung von Einwilligungen ist Art. 6 Abs. 1 lit. a und Art. 7 DSGVO, die Rechtsgrundlage für die Verarbeitung zur Erfüllung unserer Leistungen und Durchführung vertraglicher Maßnahmen sowie Beantwortung von Anfragen ist Art. 6 Abs. 1 lit. b DSGVO, die Rechtsgrundlage für die Verarbeitung zur Erfüllung unserer rechtlichen Verpflichtungen ist Art. 6 Abs. 1 lit. c DSGVO, und die Rechtsgrundlage für die Verarbeitung zur Wahrung unserer berechtigten Interessen ist Art. 6 Abs. 1 lit. f DSGVO. Für den Fall, dass lebenswichtige Interessen der betroffenen Person oder einer anderen natürlichen Person eine Verarbeitung personenbezogener Daten erforderlich machen, dient Art. 6 Abs. 1 lit. d DSGVO als Rechtsgrundlage.</p><h3 id="dsg-general-securitymeasures">Sicherheitsmaßnahmen</h3><p>Wir treffen nach Maßgabe des Art. 32 DSGVO unter Berücksichtigung des Stands der Technik, der Implementierungskosten und der Art, des Umfangs, der Umstände und der Zwecke der Verarbeitung sowie der unterschiedlichen Eintrittswahrscheinlichkeit und Schwere des Risikos für die Rechte und Freiheiten natürlicher Personen, geeignete technische und organisatorische Maßnahmen, um ein dem Risiko angemessenes Schutzniveau zu gewährleisten.<br><br>Zu den Maßnahmen gehören insbesondere die Sicherung der Vertraulichkeit, Integrität und Verfügbarkeit von Daten durch Kontrolle des physischen Zugangs zu den Daten, als auch des sie betreffenden Zugriffs, der Eingabe, Weitergabe, der Sicherung der Verfügbarkeit und ihrer Trennung. Des Weiteren haben wir Verfahren eingerichtet, die eine Wahrnehmung von Betroffenenrechten, Löschung von Daten und Reaktion auf Gefährdung der Daten gewährleisten. Ferner berücksichtigen wir den Schutz personenbezogener Daten bereits bei der Entwicklung, bzw. Auswahl von Hardware, Software sowie Verfahren, entsprechend dem Prinzip des Datenschutzes durch Technikgestaltung und durch datenschutzfreundliche Voreinstellungen (Art. 25 DSGVO).<br></p><h3 id="dsg-general-coprocessing">Zusammenarbeit mit Auftragsverarbeitern und Dritten</h3><p>Sofern wir im Rahmen unserer Verarbeitung Daten gegenüber anderen Personen und Unternehmen (Auftragsverarbeitern oder Dritten) offenbaren, sie an diese übermitteln oder ihnen sonst Zugriff auf die Daten gewähren, erfolgt dies nur auf Grundlage einer gesetzlichen Erlaubnis (z.B. wenn eine Übermittlung der Daten an Dritte, wie an Zahlungsdienstleister, gem. Art. 6 Abs. 1 lit. b DSGVO zur Vertragserfüllung erforderlich ist), Sie eingewilligt haben, eine rechtliche Verpflichtung dies vorsieht oder auf Grundlage unserer berechtigten Interessen (z.B. beim Einsatz von Beauftragten, Webhostern, etc.).<br><br>Sofern wir Dritte mit der Verarbeitung von Daten auf Grundlage eines sog. „Auftragsverarbeitungsvertrages“ beauftragen, geschieht dies auf Grundlage des Art. 28 DSGVO.</p><h3 id="dsg-general-thirdparty">Übermittlungen in Drittländer</h3><p>Sofern wir Daten in einem Drittland (d.h. außerhalb der Europäischen Union (EU) oder des Europäischen Wirtschaftsraums (EWR)) verarbeiten oder dies im Rahmen der Inanspruchnahme von Diensten Dritter oder Offenlegung, bzw. Übermittlung von Daten an Dritte geschieht, erfolgt dies nur, wenn es zur Erfüllung unserer (vor)vertraglichen Pflichten, auf Grundlage Ihrer Einwilligung, aufgrund einer rechtlichen Verpflichtung oder auf Grundlage unserer berechtigten Interessen geschieht. Vorbehaltlich gesetzlicher oder vertraglicher Erlaubnisse, verarbeiten oder lassen wir die Daten in einem Drittland nur beim Vorliegen der besonderen Voraussetzungen der Art. 44 ff. DSGVO verarbeiten. D.h. die Verarbeitung erfolgt z.B. auf Grundlage besonderer Garantien, wie der offiziell anerkannten Feststellung eines der EU entsprechenden Datenschutzniveaus (z.B. für die USA durch das „Privacy Shield“) oder Beachtung offiziell anerkannter spezieller vertraglicher Verpflichtungen (so genannte „Standardvertragsklauseln“).</p><h3 id="dsg-general-rightssubject">Rechte der betroffenen Personen</h3><p>Sie haben das Recht, eine Bestätigung darüber zu verlangen, ob betreffende Daten verarbeitet werden und auf Auskunft über diese Daten sowie auf weitere Informationen und Kopie der Daten entsprechend Art. 15 DSGVO.<br><br>Sie haben entsprechend. Art. 16 DSGVO das Recht, die Vervollständigung der Sie betreffenden Daten oder die Berichtigung der Sie betreffenden unrichtigen Daten zu verlangen.<br><br>Sie haben nach Maßgabe des Art. 17 DSGVO das Recht zu verlangen, dass betreffende Daten unverzüglich gelöscht werden, bzw. alternativ nach Maßgabe des Art. 18 DSGVO eine Einschränkung der Verarbeitung der Daten zu verlangen.<br><br>Sie haben das Recht zu verlangen, dass die Sie betreffenden Daten, die Sie uns bereitgestellt haben nach Maßgabe des Art. 20 DSGVO zu erhalten und deren Übermittlung an andere Verantwortliche zu fordern.<br><br>Sie haben ferner gem. Art. 77 DSGVO das Recht, eine Beschwerde bei der zuständigen Aufsichtsbehörde einzureichen.</p><h3 id="dsg-general-revokeconsent">Widerrufsrecht</h3><p>Sie haben das Recht, erteilte Einwilligungen gem. Art. 7 Abs. 3 DSGVO mit Wirkung für die Zukunft zu widerrufen</p><h3 id="dsg-general-object">Widerspruchsrecht</h3><p>Sie können der künftigen Verarbeitung der Sie betreffenden Daten nach Maßgabe des Art. 21 DSGVO jederzeit widersprechen. Der Widerspruch kann insbesondere gegen die Verarbeitung für Zwecke der Direktwerbung erfolgen.</p><h3 id="dsg-general-cookies">Cookies und Widerspruchsrecht bei Direktwerbung</h3><p>Als „Cookies“ werden kleine Dateien bezeichnet, die auf Rechnern der Nutzer gespeichert werden. Innerhalb der Cookies können unterschiedliche Angaben gespeichert werden. Ein Cookie dient primär dazu, die Angaben zu einem Nutzer (bzw. dem Gerät auf dem das Cookie gespeichert ist) während oder auch nach seinem Besuch innerhalb eines Onlineangebotes zu speichern. Als temporäre Cookies, bzw. „Session-Cookies“ oder „transiente Cookies“, werden Cookies bezeichnet, die gelöscht werden, nachdem ein Nutzer ein Onlineangebot verlässt und seinen Browser schließt. In einem solchen Cookie kann z.B. der Inhalt eines Warenkorbs in einem Onlineshop oder ein Login-Status gespeichert werden. Als „permanent“ oder „persistent“ werden Cookies bezeichnet, die auch nach dem Schließen des Browsers gespeichert bleiben. So kann z.B. der Login-Status gespeichert werden, wenn die Nutzer diese nach mehreren Tagen aufsuchen. Ebenso können in einem solchen Cookie die Interessen der Nutzer gespeichert werden, die für Reichweitenmessung oder Marketingzwecke verwendet werden. Als „Third-Party-Cookie“ werden Cookies bezeichnet, die von anderen Anbietern als dem Verantwortlichen, der das Onlineangebot betreibt, angeboten werden (andernfalls, wenn es nur dessen Cookies sind spricht man von „First-Party Cookies“).<br><br>Wir können temporäre und permanente Cookies einsetzen und klären hierüber im Rahmen unserer Datenschutzerklärung auf.<br><br>Falls die Nutzer nicht möchten, dass Cookies auf ihrem Rechner gespeichert werden, werden sie gebeten die entsprechende Option in den Systemeinstellungen ihres Browsers zu deaktivieren. Gespeicherte Cookies können in den Systemeinstellungen des Browsers gelöscht werden. Der Ausschluss von Cookies kann zu Funktionseinschränkungen dieses Onlineangebotes führen.<br><br>Ein genereller Widerspruch gegen den Einsatz der zu Zwecken des Onlinemarketing eingesetzten Cookies kann bei einer Vielzahl der Dienste, vor allem im Fall des Trackings, über die US-amerikanische Seite <a href="http://www.aboutads.info/choices/">http://www.aboutads.info/choices/</a> oder die EU-Seite <a href="http://www.youronlinechoices.com/">http://www.youronlinechoices.com/</a> erklärt werden. Des Weiteren kann die Speicherung von Cookies mittels deren Abschaltung in den Einstellungen des Browsers erreicht werden. Bitte beachten Sie, dass dann gegebenenfalls nicht alle Funktionen dieses Onlineangebotes genutzt werden können.</p><h3 id="dsg-general-erasure">Löschung von Daten</h3><p>Die von uns verarbeiteten Daten werden nach Maßgabe der Art. 17 und 18 DSGVO gelöscht oder in ihrer Verarbeitung eingeschränkt. Sofern nicht im Rahmen dieser Datenschutzerklärung ausdrücklich angegeben, werden die bei uns gespeicherten Daten gelöscht, sobald sie für ihre Zweckbestimmung nicht mehr erforderlich sind und der Löschung keine gesetzlichen Aufbewahrungspflichten entgegenstehen. Sofern die Daten nicht gelöscht werden, weil sie für andere und gesetzlich zulässige Zwecke erforderlich sind, wird deren Verarbeitung eingeschränkt. D.h. die Daten werden gesperrt und nicht für andere Zwecke verarbeitet. Das gilt z.B. für Daten, die aus handels- oder steuerrechtlichen Gründen aufbewahrt werden müssen.<br><br>Nach gesetzlichen Vorgaben in Deutschland, erfolgt die Aufbewahrung insbesondere für 10 Jahre gemäß §§ 147 Abs. 1 AO, 257 Abs. 1 Nr. 1 und 4, Abs. 4 HGB (Bücher, Aufzeichnungen, Lageberichte, Buchungsbelege, Handelsbücher, für Besteuerung relevanter Unterlagen, etc.) und 6 Jahre gemäß § 257 Abs. 1 Nr. 2 und 3, Abs. 4 HGB (Handelsbriefe).<br><br>Nach gesetzlichen Vorgaben in Österreich erfolgt die Aufbewahrung insbesondere für 7 J gemäß § 132 Abs. 1 BAO (Buchhaltungsunterlagen, Belege/Rechnungen, Konten, Belege, Geschäftspapiere, Aufstellung der Einnahmen und Ausgaben, etc.), für 22 Jahre im Zusammenhang mit Grundstücken und für 10 Jahre bei Unterlagen im Zusammenhang mit elektronisch erbrachten Leistungen, Telekommunikations-, Rundfunk- und Fernsehleistungen, die an Nichtunternehmer in EU-Mitgliedstaaten erbracht werden und für die der Mini-One-Stop-Shop (MOSS) in Anspruch genommen wird.</p><p></p><h3 id="dsg-administration">Administration, Finanzbuchhaltung, Büroorganisation, Kontaktverwaltung</h3><p></p><p><span class="ts-muster-content">Wir verarbeiten Daten im Rahmen von Verwaltungsaufgaben sowie Organisation unseres Betriebs, Finanzbuchhaltung und Befolgung der gesetzlichen Pflichten, wie z.B. der Archivierung. Hierbei verarbeiten wir dieselben Daten, die wir im Rahmen der Erbringung unserer vertraglichen Leistungen verarbeiten. Die Verarbeitungsgrundlagen sind Art. 6 Abs. 1 lit. c. DSGVO, Art. 6 Abs. 1 lit. f. DSGVO. Von der Verarbeitung sind Kunden, Interessenten, Geschäftspartner und Websitebesucher betroffen. Der Zweck und unser Interesse an der Verarbeitung liegt in der Administration, Finanzbuchhaltung, Büroorganisation, Archivierung von Daten, also Aufgaben die der Aufrechterhaltung unserer Geschäftstätigkeiten, Wahrnehmung unserer Aufgaben und Erbringung unserer Leistungen dienen. Die Löschung der Daten im Hinblick auf vertragliche Leistungen und die vertragliche Kommunikation entspricht den, bei diesen Verarbeitungstätigkeiten genannten Angaben.<br><br>Wir offenbaren oder übermitteln hierbei Daten an die Finanzverwaltung, Berater, wie z.B., Steuerberater oder Wirtschaftsprüfer sowie weitere Gebührenstellen und Zahlungsdienstleister.<br><br>Ferner speichern wir auf Grundlage unserer betriebswirtschaftlichen Interessen Angaben zu Lieferanten, Veranstaltern und sonstigen Geschäftspartnern, z.B. zwecks späterer Kontaktaufnahme. Diese mehrheitlich unternehmensbezogenen Daten, speichern wir grundsätzlich dauerhaft.<br></span></p><p></p><h3 id="dsg-businessanalysis">Betriebswirtschaftliche Analysen und Marktforschung</h3><p></p><p><span class="ts-muster-content">Um unser Geschäft wirtschaftlich betreiben, Markttendenzen, Wünsche der Vertragspartner und Nutzer erkennen zu können, analysieren wir die uns vorliegenden Daten zu Geschäftsvorgängen, Verträgen, Anfragen, etc. Wir verarbeiten dabei Bestandsdaten, Kommunikationsdaten, Vertragsdaten, Zahlungsdaten, Nutzungsdaten, Metadaten auf Grundlage des Art. 6 Abs. 1 lit. f. DSGVO, wobei zu den betroffenen Personen Vertragspartner, Interessenten, Kunden, Besucher und Nutzer unseres Onlineangebotes gehören.<br><br>Die Analysen erfolgen zum Zweck betriebswirtschaftlicher Auswertungen, des Marketings und der Marktforschung. Dabei können wir die Profile der registrierten Nutzer mit Angaben, z.B. zu deren in Anspruch genommenen Leistungen, berücksichtigen. Die Analysen dienen uns zur Steigerung der Nutzerfreundlichkeit, der Optimierung unseres Angebotes und der Betriebswirtschaftlichkeit. Die Analysen dienen alleine uns und werden nicht extern offenbart, sofern es sich nicht um anonyme Analysen mit zusammengefassten Werten handelt.<br><br>Sofern diese Analysen oder Profile personenbezogen sind, werden sie mit Kündigung der Nutzer gelöscht oder anonymisiert, sonst nach zwei Jahren ab Vertragsschluss. Im Übrigen werden die gesamtbetriebswirtschaftlichen Analysen und allgemeine Tendenzbestimmungen nach Möglichkeit anonym erstellt.<br></span></p><p></p><h3 id="dsg-registration">Registrierfunktion</h3><p></p><p><span class="ts-muster-content">Nutzer können ein Nutzerkonto anlegen. Im Rahmen der Registrierung werden die erforderlichen Pflichtangaben den Nutzern mitgeteilt und auf Grundlage des Art. 6 Abs. 1 lit. b DSGVO zu Zwecken der Bereitstellung des Nutzerkontos verarbeitet. Zu den verarbeiteten Daten gehören insbesondere die Login-Informationen (Name, Passwort sowie eine E-Mailadresse). Die im Rahmen der Registrierung eingegebenen Daten werden für die Zwecke der Nutzung des Nutzerkontos und dessen Zwecks verwendet.<br><br>Die Nutzer können über Informationen, die für deren Nutzerkonto relevant sind, wie z.B. technische Änderungen, per E-Mail informiert werden. Wenn Nutzer ihr Nutzerkonto gekündigt haben, werden deren Daten im Hinblick auf das Nutzerkonto, vorbehaltlich einer gesetzlichen Aufbewahrungspflicht, gelöscht. Es obliegt den Nutzern, ihre Daten bei erfolgter Kündigung vor dem Vertragsende zu sichern. Wir sind berechtigt, sämtliche während der Vertragsdauer gespeicherten Daten des Nutzers unwiederbringlich zu löschen.<br><br>Im Rahmen der Inanspruchnahme unserer Registrierungs- und Anmeldefunktionen sowie der Nutzung des Nutzerkontos, speichern wir die IP-Adresse und den Zeitpunkt der jeweiligen Nutzerhandlung. Die Speicherung erfolgt auf Grundlage unserer berechtigten Interessen, als auch der Nutzer an Schutz vor Missbrauch und sonstiger unbefugter Nutzung. Eine Weitergabe dieser Daten an Dritte erfolgt grundsätzlich nicht, außer sie ist zur Verfolgung unserer Ansprüche erforderlich oder es besteht hierzu besteht eine gesetzliche Verpflichtung gem. Art. 6 Abs. 1 lit. c. DSGVO. Die IP-Adressen werden spätestens nach 7 Tagen anonymisiert oder gelöscht.<br></span></p><p></p><h3 id="dsg-comments">Kommentare und Beiträge</h3><p></p><p><span class="ts-muster-content">Wenn Nutzer Kommentare oder sonstige Beiträge hinterlassen, können ihre IP-Adressen auf Grundlage unserer berechtigten Interessen im Sinne des Art. 6 Abs. 1 lit. f. DSGVO für 7 Tage gespeichert werden. Das erfolgt zu unserer Sicherheit, falls jemand in Kommentaren und Beiträgen widerrechtliche Inhalte hinterlässt (Beleidigungen, verbotene politische Propaganda, etc.). In diesem Fall können wir selbst für den Kommentar oder Beitrag belangt werden und sind daher an der Identität des Verfassers interessiert.<br><br>Des Weiteren behalten wir uns vor, auf Grundlage unserer berechtigten Interessen gem. Art. 6 Abs. 1 lit. f. DSGVO, die Angaben der Nutzer zwecks Spamerkennung zu verarbeiten.<br><br>Auf derselben Rechtsgrundlage behalten wir uns vor, im Fall von Umfragen die IP-Adressen der Nutzer für deren Dauer zu speichern und Cookies zu verwenden, um Mehrfachabstimmungen zu vermeiden.<br><br>Die im Rahmen der Kommentare und Beiträge angegebenen Daten, werden von uns bis zum Widerspruch der Nutzer dauerhaft gespeichert.</span></p><p></p><h3 id="dsg-contact">Kontaktaufnahme</h3><p></p><p><span class="ts-muster-content">Bei der Kontaktaufnahme mit uns (z.B. per Kontaktformular, E-Mail, Telefon oder via sozialer Medien) werden die Angaben des Nutzers zur Bearbeitung der Kontaktanfrage und deren Abwicklung gem. Art. 6 Abs. 1 lit. b. (im Rahmen vertraglicher-/vorvertraglicher Beziehungen), Art. 6 Abs. 1 lit. f. (andere Anfragen) DSGVO verarbeitet.. Die Angaben der Nutzer können in einem Customer-Relationship-Management System ("CRM System") oder vergleichbarer Anfragenorganisation gespeichert werden.<br><br>Wir löschen die Anfragen, sofern diese nicht mehr erforderlich sind. Wir überprüfen die Erforderlichkeit alle zwei Jahre; Ferner gelten die gesetzlichen Archivierungspflichten.</span></p><p></p><h3 id="dsg-hostingprovider">Hosting und E-Mail-Versand</h3><p></p><p><span class="ts-muster-content">Die von uns in Anspruch genommenen Hosting-Leistungen dienen der Zurverfügungstellung der folgenden Leistungen: Infrastruktur- und Plattformdienstleistungen, Rechenkapazität, Speicherplatz und Datenbankdienste, E-Mail-Versand, Sicherheitsleistungen sowie technische Wartungsleistungen, die wir zum Zwecke des Betriebs dieses Onlineangebotes einsetzen.<br><br>Hierbei verarbeiten wir, bzw. unser Hostinganbieter Bestandsdaten, Kontaktdaten, Inhaltsdaten, Vertragsdaten, Nutzungsdaten, Meta- und Kommunikationsdaten von Kunden, Interessenten und Besuchern dieses Onlineangebotes auf Grundlage unserer berechtigten Interessen an einer effizienten und sicheren Zurverfügungstellung dieses Onlineangebotes gem. Art. 6 Abs. 1 lit. f DSGVO i.V.m. Art. 28 DSGVO (Abschluss Auftragsverarbeitungsvertrag).</span></p><p></p><h3 id="dsg-logfiles">Erhebung von Zugriffsdaten und Logfiles</h3><p></p><p><span class="ts-muster-content">Wir, bzw. unser Hostinganbieter, erhebt auf Grundlage unserer berechtigten Interessen im Sinne des Art. 6 Abs. 1 lit. f. DSGVO Daten über jeden Zugriff auf den Server, auf dem sich dieser Dienst befindet (sogenannte Serverlogfiles). Zu den Zugriffsdaten gehören Name der abgerufenen Webseite, Datei, Datum und Uhrzeit des Abrufs, übertragene Datenmenge, Meldung über erfolgreichen Abruf, Browsertyp nebst Version, das Betriebssystem des Nutzers, Referrer URL (die zuvor besuchte Seite), IP-Adresse und der anfragende Provider.<br><br>Logfile-Informationen werden aus Sicherheitsgründen (z.B. zur Aufklärung von Missbrauchs- oder Betrugshandlungen) für die Dauer von maximal 7 Tagen gespeichert und danach gelöscht. Daten, deren weitere Aufbewahrung zu Beweiszwecken erforderlich ist, sind bis zur endgültigen Klärung des jeweiligen Vorfalls von der Löschung ausgenommen.</span></p><p></p><h3 id="dsg-socialmedia">Onlinepräsenzen in sozialen Medien</h3><p></p><p><span class="ts-muster-content">Wir unterhalten Onlinepräsenzen innerhalb sozialer Netzwerke und Plattformen, um mit den dort aktiven Kunden, Interessenten und Nutzern kommunizieren und sie dort über unsere Leistungen informieren zu können. Beim Aufruf der jeweiligen Netzwerke und Plattformen gelten die Geschäftsbedingungen und die Datenverarbeitungsrichtlinien deren jeweiligen Betreiber.<br><br>Soweit nicht anders im Rahmen unserer Datenschutzerklärung angegeben, verarbeiten wir die Daten der Nutzer sofern diese mit uns innerhalb der sozialen Netzwerke und Plattformen kommunizieren, z.B. Beiträge auf unseren Onlinepräsenzen verfassen oder uns Nachrichten zusenden.</span></p><p></p><h3 id="dsg-thirdparty-googlefonts">Google Fonts</h3><p></p><p><span class="ts-muster-content">Wir binden die Schriftarten ("Google Fonts") des Anbieters Google LLC, 1600 Amphitheatre Parkway, Mountain View, CA 94043, USA, ein. Datenschutzerklärung: <a target="_blank" href="https://www.google.com/policies/privacy/">https://www.google.com/policies/privacy/</a>, Opt-Out: <a target="_blank" href="https://adssettings.google.com/authenticated">https://adssettings.google.com/authenticated</a>.</span></p><p></p><h3 id="dsg-facebook-plugin">Verwendung von Facebook Social Plugins</h3><p></p><p><span class="ts-muster-content">Wir nutzen auf Grundlage unserer berechtigten Interessen (d.h. Interesse an der Analyse, Optimierung und wirtschaftlichem Betrieb unseres Onlineangebotes im Sinne des Art. 6 Abs. 1 lit. f. DSGVO) Social Plugins ("Plugins") des sozialen Netzwerkes facebook.com, welches von der Facebook Ireland Ltd., 4 Grand Canal Square, Grand Canal Harbour, Dublin 2, Irland betrieben wird ("Facebook").<br>Hierzu können z.B. Inhalte wie Bilder, Videos oder Texte und Schaltflächen gehören, mit denen Nutzer Inhalte dieses Onlineangebotes innerhalb von Facebook teilen können. Die Liste und das Aussehen der Facebook Social Plugins kann hier eingesehen werden:&nbsp;<a target="_blank" href="https://developers.facebook.com/docs/plugins/">https://developers.facebook.com/docs/plugins/</a>.<br><br>Facebook ist unter dem Privacy-Shield-Abkommen zertifiziert und bietet hierdurch eine Garantie, das europäische Datenschutzrecht einzuhalten (<a target="_blank" href="https://www.privacyshield.gov/participant?id=a2zt0000000GnywAAC&amp;status=Active">https://www.privacyshield.gov/participant?id=a2zt0000000GnywAAC&amp;status=Active</a>).<br><br>Wenn ein Nutzer eine Funktion dieses Onlineangebotes aufruft, die ein solches Plugin enthält, baut sein Gerät eine direkte Verbindung mit den Servern von Facebook auf. Der Inhalt des Plugins wird von Facebook direkt an das Gerät des Nutzers übermittelt und von diesem in das Onlineangebot eingebunden. Dabei können aus den verarbeiteten Daten Nutzungsprofile der Nutzer erstellt werden. Wir haben daher keinen Einfluss auf den Umfang der Daten, die Facebook mit Hilfe dieses Plugins erhebt und informiert die Nutzer daher entsprechend unserem Kenntnisstand.<br><br>Durch die Einbindung der Plugins erhält Facebook die Information, dass ein Nutzer die entsprechende Seite des Onlineangebotes aufgerufen hat. Ist der Nutzer bei Facebook eingeloggt, kann Facebook den Besuch seinem Facebook-Konto zuordnen. Wenn Nutzer mit den Plugins interagieren, zum Beispiel den Like Button betätigen oder einen Kommentar abgeben, wird die entsprechende Information von Ihrem Gerät direkt an Facebook übermittelt und dort gespeichert. Falls ein Nutzer kein Mitglied von Facebook ist, besteht trotzdem die Möglichkeit, dass Facebook seine IP-Adresse in Erfahrung bringt und speichert. Laut Facebook wird in Deutschland nur eine anonymisierte IP-Adresse gespeichert.<br><br>Zweck und Umfang der Datenerhebung und die weitere Verarbeitung und Nutzung der Daten durch Facebook sowie die diesbezüglichen Rechte und Einstellungsmöglichkeiten zum Schutz der Privatsphäre der Nutzer, können diese den Datenschutzhinweisen von Facebook entnehmen:&nbsp;<a target="_blank" href="https://www.facebook.com/about/privacy/">https://www.facebook.com/about/privacy/</a>.<br><br>Wenn ein Nutzer Facebookmitglied ist und nicht möchte, dass Facebook über dieses Onlineangebot Daten über ihn sammelt und mit seinen bei Facebook gespeicherten Mitgliedsdaten verknüpft, muss er sich vor der Nutzung unseres Onlineangebotes bei Facebook ausloggen und seine Cookies löschen. Weitere Einstellungen und Widersprüche zur Nutzung von Daten für Werbezwecke, sind innerhalb der Facebook-Profileinstellungen möglich:&nbsp;<a target="_blank" href="https://www.facebook.com/settings?tab=ads">https://www.facebook.com/settings?tab=ads</a> &nbsp;oder über die US-amerikanische Seite&nbsp;<a target="_blank" href="http://www.aboutads.info/choices/">http://www.aboutads.info/choices/</a> &nbsp;oder die EU-Seite&nbsp;<a target="_blank" href="http://www.youronlinechoices.com/">http://www.youronlinechoices.com/</a>. Die Einstellungen erfolgen plattformunabhängig, d.h. sie werden für alle Geräte, wie Desktopcomputer oder mobile Geräte übernommen.</span></p><p></p><h3 id="dsg-thirdparty-twitter">Twitter</h3><p></p><p><span class="ts-muster-content">Innerhalb unseres Onlineangebotes können Funktionen und Inhalte des Dienstes Twitter, angeboten durch die Twitter Inc., 1355 Market Street, Suite 900, San Francisco, CA 94103, USA, eingebunden werden. Hierzu können z.B. Inhalte wie Bilder, Videos oder Texte und Schaltflächen gehören, mit denen Nutzer Inhalte dieses Onlineangebotes innerhalb von Twitter teilen können.<br>Sofern die Nutzer Mitglieder der Plattform Twitter sind, kann Twitter den Aufruf der o.g. Inhalte und Funktionen den dortigen Profilen der Nutzer zuordnen. Twitter ist unter dem Privacy-Shield-Abkommen zertifiziert und bietet hierdurch eine Garantie, das europäische Datenschutzrecht einzuhalten (<a target="_blank" href="https://www.privacyshield.gov/participant?id=a2zt0000000TORzAAO&amp;status=Active">https://www.privacyshield.gov/participant?id=a2zt0000000TORzAAO&amp;status=Active</a>). Datenschutzerklärung: <a target="_blank" href="https://twitter.com/de/privacy">https://twitter.com/de/privacy</a>, Opt-Out: <a target="_blank" href="https://twitter.com/personalization">https://twitter.com/personalization</a>.</span></p><a href="https://datenschutz-generator.de" class="dsg1-5" rel="nofollow" target="_blank">Erstellt mit Datenschutz-Generator.de von RA Dr. Thomas Schwenke</a></div></section></div>'),$templateCache.put("app/search/searchpage.html",'<div class="row filter content"><section class="medium-8 small-centered columns content" style="margin-bottom:10px;"><h3 ng-if="search.sm._options.fields.topic">{{search.sm._options.fields.topic}}</h3><h3 ng-if="search.sm._options.fields.tags">{{search.sm._options.fields.tags}}</h3><form><input type="search" ng-model="search.searchtext" ng-model-options="{ debounce: 200 }" ng-change="search.sm.get({ text: search.searchtext, options: search.sm._options })" placeholder="Suchtext eingeben"></form><span style="margin-bottom:15px;" ng-if="search.sm.took > 0">{{search.sm.results.length}} Suchergebnisse in {{search.sm.took / 1000}}s</span><div class="filter_row"><h4>Sortieren<div class="filter_group" style="margin-right:10px;"><button ng-click="search.localSearchOptions.sort.value = \'date\'" ng-class="{active: search.localSearchOptions.sort.value === \'date\'}">Datum</button> <button ng-click="search.localSearchOptions.sort.value = \'score\'" ng-class="{active: search.localSearchOptions.sort.value === \'score\'}">Relevanz</button> <button ng-click="search.localSearchOptions.sort.value = \'likes\'" ng-class="{active: search.localSearchOptions.sort.value === \'likes\'}">Empfehlungen</button> <button ng-click="search.localSearchOptions.sort.value = \'comments\'" ng-class="{active: search.localSearchOptions.sort.value === \'comments\'}">Kommentare</button></div><div class="filter_group"><button ng-click="search.localSearchOptions.sort.sort = \'-\'" ng-class="{active: search.localSearchOptions.sort.sort === \'-\'}">absteigend</button> <button ng-click="search.localSearchOptions.sort.sort = \'+\'" ng-class="{active: search.localSearchOptions.sort.sort === \'+\'}">aufsteigend</button></div></h4></div><div class="filter_row"><h4>Medientyp<div class="filter_group"><button ng-click="search.localSearchOptions.filter.media = \'all\'" ng-class="{active: search.localSearchOptions.filter.media == \'all\'}">Alle</button> <button ng-click="search.localSearchOptions.filter.media = \'video\'" ng-class="{active: search.localSearchOptions.filter.media == \'video\'}">Video</button> <button ng-click="search.localSearchOptions.filter.media = \'audio\'" ng-class="{active: search.localSearchOptions.filter.media == \'audio\'}">Audio</button> <button ng-click="search.localSearchOptions.filter.media = \'gallery\'" ng-class="{active: search.localSearchOptions.filter.media == \'gallery\'}">Bild</button></div></h4></div></section></div><div class="row content"><section class="medium-8 small-centered columns content" style="margin-bottom:10px;"><div class="itemwrap"><div ng-repeat="searchresult in search.sm.results | filter:search.getFilterFilterOptions | orderBy:search.getOrderFilterOptions()" ng-init="item = searchresult.item()"><article item="item" topstory="false"></article></div></div></section></div><footer class="row" ng-include="\'app/components/footer/footer.html\'"></footer>'),$templateCache.put("app/search/searchresults.html",'<div class="searchresults" ng-class="{active: (active() && sm.active)}"><div class="resultslist"><article ng-click="open(hit.type + \'/\' + hit.id)" class="item" ng-repeat="hit in sm.results.slice(0, 4)"><div style="border-bottom:1px solid whitesmoke;padding:15px;"><img style="width: 130px;height: 90px;" ng-src="{{hit.source.thumbnails[\'smalldouble\'] || hit.source.thumbnails[\'small\']}}"><h2 style="font-size:16px;">{{hit.source.title}}</h2><p class="commenttime" style="margin-bottom: 5px;">{{moment(hit.source.created_at).format(\'LL\')}}</p><p style="width:400px;" class="excerp teasertext">{{hit.source.excerp}}</p></div></article></div><div class="results_button" title="Zu den Suchergebnissen" ng-if="sm.results.length > 4" ng-click="open(\'search/\' + sm._searchtext)">{{sm.results.length - 4}} weitere Ergebnisse für {{sm._searchtext}} anzeigen</div><div style="background: #666666;color: whitesmoke;" class="results_button" ng-if="sm.results.length < 1">Es konnten leider keine Suchergebnisse für <em>{{sm._searchtext}}</em> gefunden werden.</div></div>'),$templateCache.put("app/user/login.html",'<section class="loginuser" ng-if="!login.step"><h1>Anmelden</h1><div class="federated"><a class="facebook" ng-click="login.facebookLogin()"><span>mit Facebook anmelden</span></a> <a class="google" ng-click="login.gPlusLogin()"><span>mit Google+ anmelden</span></a></div><form ng-submit="login.emailLogin()"><input type="text" placeholder="Email" ng-model="login.loginuser.email"> <input type="password" placeholder="Passwort" ng-model="login.loginuser.password"> <input class="submit" type="submit" ng-value="login.status" ng-disabled="login.status !== \'anmelden\'"><p class="lost" ng-click="login.requestPasswordRecoveryPage()" style="text-align:center;">Passwort vergessen?</p></form><div style="clear:both;"></></div></section><section class="loginuser forgot_pw" ng-if="login.step === \'request_password_recovery\'"><h1>Passwort wiederherstellen</h1><p ng-hide="login.pw_recovery_status" class="teaser" style="padding-bottom:25px;">Gib hier die Email-Adresse ein, unter du dich registriert hast, um dein Passwort zurückzusetzen.</p><form ng-submit="login.requestPWRecovery(login.pw_recovery.email)" ng-hide="login.pw_recovery_status"><input type="text" placeholder="Email" ng-model="login.pw_recovery.email"> <input class="submit" type="submit" value="Passwort zurücksetzen"><p class="lost" type="button" ng-click="login.mainPage()">zurück</p></form><div style="clear:both;"></><p class="teaser" ng-if="login.pw_recovery_status == \'OK\'">Solltest die Email angemeldet sein, bekommst du weitere Informationen per Email.</p><p class="teaser" ng-if="login.pw_recovery_status && login.pw_recovery_status != \'OK\'">{{login.pw_recovery_status}}</p></div></section>'),$templateCache.put("app/user/profile.html",'<div class="row content nolayout profile" style="margin-bottom:15px;"><nav><ul><li>Profil</li></ul></nav><div class="small-11 medium-10 large-8 small-centered columns content"><div class="wrap"><section><div class="row content user"><div class="small-3 columns content"><div class="box inputfile_wrap"><input type="file" ngf-drop="" ngf-select="" ngf-change="profile.user.uploadImage($files[0])"> <img ng-src="{{profile.user.getImage()}}" class="profilbild"><p><i class="fi-upload-cloud"></i> aktualisieren</p></div></div><div class="small-9 columns content"><div class="box name"><h3>Name</h3><p><span contenteditable="{{profile.canEdit() && (profile.settings.name == true)}}" ng-model="profile.newuser.name"></span> <a class="edit" ng-click="profile.setFocus(\'name\')" ng-hide="profile.settings.name"><i class="fi-pencil"></i> ändern</a> <span ng-show="profile.settings.name"><a ng-click="profile.save(\'name\')">aktualisieren</a> <a ng-click="profile.cancel(\'name\')">abbrechen</a></span></p></div><div class="box email"><h3>Email</h3><p><pan>{{profile.user.email}}</pan></p></div><h2>Schule</h2><div class="box class"><h3>Klasse</h3><form ng-submit="profile.setKlass()"><select ng-model="profile.newuser.klass.first" required="true" ng-options="klass for klass in [\'5\', \'6\', \'7\', \'8\', \'9\', \'10\', \'11\', \'12\']" ng-change="profile.save(\'klass\')"></select><select ng-model="profile.newuser.klass.second" ng-required="profile.newuser.klass.first != \'11\' && profile.newuser.klass.first != \'11\'" ng-show="profile.newuser.klass.first && (profile.newuser.klass.first != \'11\' && profile.newuser.klass.first != \'11\')" ng-options="klass for klass in [\'1\', \'2\', \'3\', \'4\', \'5\', \'6\']" ng-change="profile.save(\'klass\')"></select><p ng-show="profile.newuser.klass" class="removeclass"><a ng-click="profile.removeClass()" href="#">entfernen</a></p></form></div><div class="box vita"><h3>Vita (max. 70 Zeichen)</h3><textarea placeholder="Beschreibe dich kurz." maxlength="70" ng-model="profile.user.description" ng-blur="profile.user.save()"></textarea></div><h2>Benutzerkonto</h2><div class="box services"><h3>Benachrichtigungen</h3><ul><li><input type="checkbox" id="c1" ng-model="profile.user.settings.notifications.item_is_set_ready" ng-change="profile.user.save()"> <label for="c1">Artikel wird zur Korrektur freigegeben</label></li></ul></div><div class="box services"><h3>verbundene Dienste</h3><ul class="profile_services"><li ng-repeat="service in profile.user.services"><i class="fi-check" style="color:#00a15a;margin-right:5px;"></i> {{service.service_name}}</li><li style="color:lightgray"><i class="fi-plus" style="margin-right:5px"></i> hinzufügen</li></ul></div></div></div></section><section ng-if="profile.publishedArticles().length > 0" style="margin-bottom:10px"><h3>Artikel</h3><article item="article" ng-repeat="article in profile.publishedArticles()"></article></section></div></div></div>'),$templateCache.put("app/user/pw_recovery.html",'<div class="row content nolayout passwordrecovery" style="margin-bottom:15px;"><div class="back"><button ng-click="open(\'/\')">zurück zur Startseite</button></div><div class="small-11 medium-10 large-8 small-centered columns content"><div class="wrap"><section><div class="row"><div class="error" ng-repeat="error in pwRecovery.$errors">{{error}}</div><form ng-submit="pwRecovery.submitRequest(recovery)"><fieldset class="row"><label for="recovery.newpassword" class="large-5 columns">Neues Passwort:</label> <input type="password" id="recovery.newpassword" ng-model="recovery.newpassword" class="large-7 columns"></fieldset><fieldset class="row"><label for="recovery.newpassword_repeat" class="large-5 columns">Neues Passwort wiederholen:</label> <input type="password" id="recovery.newpassword_repeat" ng-model="recovery.newpassword_repeat" class="large-7 columns"></fieldset><fieldset class="row"><input type="submit" value="Passwort ändern" class="large-12 columns centered"></fieldset></form></div></section></div></div></div>'),$templateCache.put("app/user/register.html",'<div class="user-register"><section class="registeruser step-0" ng-if="!register.step"><h1>Registriere dich!</h1><p class="teaser">Dadurch kannst du deinen Vertretungsplan gleich auf der Startseite anzeigen, dein eigenes Profilbild verwenden und noch viel mehr.</p><div class="federated"><a class="facebook" ng-click="register.facebookLogin()"><span>mit Facebook registrieren</span></a> <a class="google" ng-click="register.gPlusLogin()"><span>mit Google registrieren</span></a></div><form ng-submit="register.doRegister()"><label for="reg_name">Damit deine Freunde wissen, wer du bist:</label> <input id="reg_name" type="text" placeholder="Vor- und Nachname" ng-model="register.userInfo.name"> <label for="reg_name">So erkennen wir dich wieder:</label> <input type="email" placeholder="Email" ng-model="register.userInfo.email"> <input type="password" placeholder="Passwort" ng-model="register.userInfo.password"> <input class="submit" type="submit" ng-value="register.status" ng-disabled="register.status != \'registrieren\'"></form><div style="clear:both;"></></div></section><section class="registeruser step-1" ng-if="register.step === 1"><h1>Hurra, es hat geklappt!</h1><p class="teaser" style="padding-bottom:25px;">Du wurdest erfolgreich registriert. Wir haben sogar dein Profilbild übernommen.</p><form><img ng-src="{{register.user.getImage()}}" style="width: 200px"> <input style="submit" type="submit" ng-value="\'weiter\'" ng-click="register.step = 3"> <a style="lost" ng-click="register.step = 2">anderes Profilbild</a></form><div style="clear:both;"></div></section><section class="registeruser step-2" ng-if="register.step === 2"><h1>Hurra, es hat geklappt!</h1><p class="teaser" style="padding-bottom:25px;">Wähle nun ein Profilbild, was am besten zu dir passt.</p><form ng-submit="register.saveUserAvatar()"><img src="/assets/images/profilNo1.jpg" title="Profilbild No 1" ng-click="register.avatar.selected = 1" ng-class="{active: (register.avatar.selected == 1)}"> <img src="/assets/images/profilNo2.jpg" title="Profilbild No 2" ng-click="register.avatar.selected = 2" ng-class="{active: (register.avatar.selected == 2)}"> <img src="/assets/images/profilNo3.jpg" title="Profilbild No 3" ng-click="register.avatar.selected = 3" ng-class="{active: (register.avatar.selected == 3)}"> <img src="/assets/images/profilNo4.jpg" title="Profilbild No 4" ng-click="register.avatar.selected = 4" ng-class="{active: (register.avatar.selected == 4)}"> <img src="/assets/images/profilNo5.jpg" title="Profilbild No 5" ng-click="register.avatar.selected = 5" ng-class="{active: (register.avatar.selected == 5)}"> <img src="/assets/images/profilNo6.jpg" title="Profilbild No 6" ng-click="register.avatar.selected = 6" ng-class="{active: (register.avatar.selected == 6)}"> <img src="/assets/images/profilNo7.jpg" title="Profilbild No 7" ng-click="register.avatar.selected = 7" ng-class="{active: (register.avatar.selected == 7)}"> <img ng-src="{{register.avatar.custom_source}}" title="Eigenes Profilbild" ng-if="register.avatar.custom_source" ng-click="avatar.selected = \'custom\'" ng-class="{active: (register.avatar.selected == \'custom\')}"><div class="custom_wrapper"><a ngf-select="" ngf-change="register.setAvatarFromHdd($files)"><i class="fi-upload"></i><span>eigenes Bild hochladen</span></a> <a ng-click="register.setupAvatarscreenFromWebcam()" ng-if="register.isWebcamAvailable()"><i class="fi-camera"></i><span>Schnappschuss mit der Webcam machen</span></a></div><input class="submit" type="submit" ng-value="\'weiter\'" ng-disabled="!register.avatar.selected"><div style="clear:both;"></div></form></section><section class="registeruser step-25" ng-if="register.step === 2.5"><h1>Profilbild aufnehmen</h1><div style="text-align: center;padding-top: 20px;" class="webcam-screen-video-wrapper"><video style="width: 200px; height: 200px;" id="webcam-screen-video"></video></div><img ng-src="{{register.webcam_avatar}}" style="width: 200px"><form><a class="lost" ng-click="register.step = 2">zurück</a> <input class="submit" type="submit" ng-value="\'speichern\'" ng-click="register.saveUserAvatarFromWebcam()" ng-disabled="!register.localMediaStream"></form><div style="clear:both;"></div></section><section class="registeruser step-3" ng-if="register.step === 3"><h1>Setze jetzt deine Klasse</h1><p class="teaser" style="padding-bottom:25px;">Du kannst deine Klasse setzen, damit dir dein persönlicher Stundenplan angezeigt werden kann. Dies ist optional.</p><form ng-submit="register.saveUserClass()"><select ng-model="register.newklass.first" ng-options="klass for klass in [\'5\', \'6\', \'7\', \'8\', \'9\', \'10\', \'11\', \'12\']"></select><select ng-model="register.newklass.second" ng-show="register.newklass.first && (register.newklass.first != \'11\' && register.newklass.first != \'11\')" ng-options="klass for klass in [\'1\', \'2\', \'3\', \'4\', \'5\', \'6\']"></select><input class="submit" style="margin-top:20px;" type="submit" ng-value="\'weiter\'"></form><div style="clear:both;"></div></section></div>'),$templateCache.put("app/administration/categories/categories.html",'<div class="row content settings categories nolayout"><div ng-include="\'app/administration/navigation.html\'"></div><div class="row"><categories-settings-navigation></categories-settings-navigation><section class="medium-8 columns content"><div class="config" style="margin-right: 10px;" ng-show="!settings.selectedCategory()"><h3>Banner · 2000 x 440 px</h3><div class="conig_tab"><div class="vorschaubild inputfile_wrap"><input type="file" ngf-drop="" ngf-select="" ngf-change="settings.cache.account.setBanner($files)"> <img ng-src="{{settings.cache.account.getBanner()}}" id="config_banner_picture_dropzone"></div></div></div><div class="config" style="margin-right: 10px;" ng-show="settings.selectedCategory()"><form ng-submit="settings.selectedCategory().save()"><h3>Titel</h3><div class="conig_tab"><p class="intro" contenteditable="" ng-model="settings.selectedCategory().title"></p></div><h3>Banner · 2000 x 440 px</h3><div class="conig_tab"><div class="vorschaubild inputfile_wrap"><input type="file" ngf-drop="" ngf-select="" ngf-change="settings.selectedCategory().setBanner($files)"> <img ng-src="{{settings.selectedCategory().getBanner()}}" id="config_banner_picture_dropzone"></div></div><h3>Inhalt</h3><div class="conig_tab" style="text-align:center;"><label class="site_content" ng-class="{active: settings.selectedCategory().config.pageType === \'greetingsPage\'}"><input type="radio" ng-model="settings.selectedCategory().config.pageType" value="greetingsPage" style="visibility: hidden; width: 0; height: 0; position: absolute;"><h3>Grüße</h3><img src="../../../assets/images/thumbnail_greetings1.png"><p>Besucher können Grüße hinterlassen, bis auf alle Ewigkeit gespeichert.</p></label><label class="site_content" ng-class="{active: settings.selectedCategory().config.pageType === \'collectionPage\'}"><input type="radio" ng-model="settings.selectedCategory().config.pageType" value="collectionPage" style="visibility: hidden; width: 0; height: 0; position: absolute;"><h3>Bilder</h3><img src="../../../assets/images/thumbnail_albums1.png"><p>Bilder und Galerien werden übersichtlich geordnet.</p></label><label class="site_content" ng-class="{active: settings.selectedCategory().config.pageType === \'standardPage\'}"><input type="radio" ng-model="settings.selectedCategory().config.pageType" value="standardPage" style="visibility: hidden; width: 0; height: 0; position: absolute;"><h3>Seiten</h3><img src="../../../assets/images/thumbnail_articles1.png"><p>Eine Übersicht über erstellte und veröffentlichte Artikel.</p></label></div><h3 ng-if="settings.selectedCategory().config.pageType !== \'greetingsPage\'">Unterkategorie</h3><div class="conig_tab" ng-if="settings.selectedCategory().config.pageType !== \'greetingsPage\'"><subcategories-listing items="settings.selectedCategory().navigation" selected-category="settings.selectedCategory()"></subcategories-listing>{{settings.subcategoriesSettings.enableReorderSubcategories(settings.subcategoriesSettings)}}</div><h3>Facebook-Box</h3><div class="conig_tab"><input type="checkbox" id="show_facebook_box" ng-model="settings.selectedCategory().config.show_facebook_box"> <label for="show_facebook_box">Facebook Box anzeigen</label> <label>URL der Facebook-Box:</label><div class="row collapse"><div class="small-6 columns"><span class="prefix">https://facebook.com/</span></div><div class="small-6 columns"><input type="text" id="facebook_box_url" ng-disabled="!settings.selectedCategory().config.show_facebook_box" ng-model="settings.selectedCategory().config.facebook_box_url"></div></div></div><h3>Weitere Optionen</h3><div class="conig_tab"><input type="checkbox" id="hide_from_homepage" ng-model="settings.selectedCategory().config.hide_from_homepage"> <label for="hide_from_homepage">Auf der Homepage verstecken</label></div><div class="conig_tab"><input type="button" value="abbrechen" ng-click="settings.categoriesSettings.resetSelectedCategory()"> <input type="submit" value="speichern"></div><h3>DANGER ZONE</h3><div class="conig_tab"><input type="button" value="löschen" ng-click="settings.categoriesSettings.deleteSelectedCategory()"></div></form></div></section></div></div>'),$templateCache.put("app/administration/categories/categories_settings_navigation.html",'<aside class="medium-4 content columns"><div class="wrap both"><div class="box sub_navigation"><div class="reorder-categories-box"><input type="button" value="neu ordnen" ng-click="categoriesSettingsNav.enableReorderCategories(categoriesSettingsNav)" ng-hide="categoriesSettingsNav.isReorderModeOn"> <input type="button" value="speichern" ng-click="categoriesSettingsNav.saveReorderedCategories(categoriesSettingsNav)" ng-show="categoriesSettingsNav.isReorderModeOn"> <input type="button" value="abbrechen" ng-click="categoriesSettingsNav.endReorderedCategories(categoriesSettingsNav)" ng-show="categoriesSettingsNav.isReorderModeOn"></div><ul><li ng-class="{active: !categoriesSettingsNav.selectedCategory()}" ng-click="categoriesSettingsNav.selectHomepage()" ng-hide="categoriesSettingsNav.isReorderModeOn">Startseite</li><li ng-repeat="(categoryId, category) in categoriesSettingsNav.categories() | orderObjectsBy:\'position\'" ng-click="open(\'/administration/categories/\' + category.id)" ng-class="{active: categoriesSettingsNav.selectedCategory().id == category.id}" draggable="{{categoriesSettingsNav.isReorderModeOn}}" id="category_{{category.id}}">{{category.title}} <i class="fi-list right" ng-if="categoriesSettingsNav.isReorderModeOn"></i></li><li class="addnew" ng-click="categoriesSettingsNav.createCategory()" ng-hide="categoriesSettingsNav.isReorderModeOn"><i class="fi-plus"></i>neue Kategorie hinzufügen</li></ul></div></div></aside>'),$templateCache.put("app/administration/categories/subcategories_listing.directive.html",'<ul class="subcategories"><li ng-repeat="subcat in items | orderBy:\'position\'" id="subcategory_{{subcat.id}}" draggable="true"><i contenteditable="" ng-model="subcat.title" ng-blur="subcat.save()"></i> <span>&nbsp;·&nbsp;</span> <span ng-click="subcategories.removeSubcategory(subcat)">entfernen</span> <span ng-click="subcategories.moveSubcategory(subcat)" class="right fi-list"></span></li><li class="new"><a href="" ng-click="subcategories.createSubcategory(selectedCategory)">+ Navigationselement</a></li></ul>'),$templateCache.put("app/components/cookie_info_panel/cookie_info_panel.html",'<div class="generalinfo replaced cookie-info-panel-inner" ng-if="isShown()" ng-cloak=""><ng-transclude></ng-transclude><input type="button" ng-click="hideCookieInfoPanel()" value="Okay" class="button"></div>'),$templateCache.put("app/components/footer/footer.html",'<section ng-controller="FooterCtrl as footer"><div class="small-12 medium-9 columns"><a href="{{baseUrl}}/#!/impress" target="_blank">Impressum</a> &bull; <a href="https://medienportal.org/" target="_blank">Projektseite</a> &bull; <a href="http://status.medienportal.org/" target="_blank">Systemstatus</a> &bull; <a href="{{baseUrl}}/#!/faq">Häufige Fragen</a></div><div class="show-for-medium-up medium-3 columns right"><span>entwickelt von</span> <a href="http://unsdrei.de" target="_blank"><img src="/assets/images/unsdrei_orange.svg"></a></div></section>'),$templateCache.put("app/components/header/header.html",'<header ng-class="{fullsize: fullsize}"><div class="header_inner" ng-if="currentCollection && currentCollectionFile"><div class="header_left"><div class="closebutton hide-for-small" ng-if="currentCollectionFile" ng-click="open(\'/collection/\' + currentCollection.id)"><i style="margin-right: 10px;" class="fi-x"></i>Schließen</div><div class="closebutton show-for-small" ng-if="currentCollectionFile" ng-click="open(\'/collection/\' + currentCollection.id)"><i class="fi-x"></i></div></div><div class="header_right hide-for-small"><div class="login-menu" style="border-color:lightgray;" ng-hide="header.cache.current_user.isLoggedIn()"><div class="login-button" ng-click="header.openLoginDialog()">anmelden</div><span>oder</span><div class="login-button hide-for-medium" style="float:right;margin-left: 8px;margin-right:0;" ng-click="header.openRegisterDialog()">registrieren</div></div><div class="user-nav dropdown-wrapper" ng-show="header.cache.current_user.isLoggedIn()"><ul class="dropdown"><li><div ng-click="open(\'/profile\')" class="user-wrapper"><div class="user-avatar"><img ng-src="{{header.cache.current_user.getImage()}}"></div><div class="user-name">{{header.cache.current_user.name}}</div></div><ul class="submenu logout"><li ng-click="open(\'/profile\')">Profil</li><li ng-click="open(\'/administration\')">Administration</li><li ng-click="open(\'/article_overview\')" ng-if="header.cache.current_user.isCoworker()">Artikelübersicht ({{header.onlineCounter()}})</li><li class="borderTop" ng-click="header.cache.logout()">Abmelden</li></ul></li></ul></div></div><div class="header_middle"><nav class="nextprev hide-for-small"><div class="prev" ng-class="{active: currentCollection.hasPreviousFile(currentCollectionFile)}" ng-click="header.openCollectionFile(currentCollection.previousFile(currentCollectionFile))"><i style="margin-right: 5px;" class="fi-arrow-left"></i> vorheriges</div><span ng-if="currentCollection" style="margin:0 10px;">{{currentCollection.indexOfFile(currentCollectionFile) + 1}} von {{currentCollection.files.length}}</span><div class="next" ng-class="{active: currentCollection.hasNextFile(currentCollectionFile)}" ng-click="header.openCollectionFile(currentCollection.nextFile(currentCollectionFile))">nächstes <i style="margin-left: 5px;" class="fi-arrow-right"></i></div></nav><nav class="nextprev show-for-small"><div class="prev" ng-class="{active: currentCollection.hasPreviousFile(currentCollectionFile)}" ng-click="header.openCollectionFile(currentCollection.previousFile(currentCollectionFile))"><i style="margin-right: 5px;" class="fi-arrow-left"></i> vorheriges</div><div class="next" ng-class="{active: currentCollection.hasNextFile(currentCollectionFile)}" ng-click="header.openCollectionFile(currentCollection.nextFile(currentCollectionFile))">nächstes <i style="margin-left: 5px;" class="fi-arrow-right"></i></div></nav></div></div><div class="header_inner hide-for-small" ng-hide="fullsize"><div class="header_left"><div class="header_logo"><a href="/" title="Zurück zur Hauptseite"><img src="/assets/images/icon.png" ng-if="!currentCollectionFile" alt="Icon Medienportal"></a></div><nav ng-hide="header.searchIsActive" role="navigation" class="header_navWrapper"><ul><li ng-click="open(\'/\')" class="hide-for-medium" ng-class="{active: (!currentCollection && !currentCategory && !currentPage)}">Startseite</li><li ng-repeat="category in header.getHomepageCategories() | orderObjectsBy:\'position\'" ng-click="open(\'/category/\' + category.id)" ng-class="{active: header.isActiveCategory(category)}">{{category.title}}</li></ul></nav></div><div class="header_right"><div class="login-menu" ng-hide="header.cache.current_user.isLoggedIn()"><div class="login-button" ng-click="header.openLoginDialog()">anmelden</div><span>oder</span><div class="signup-button" ng-click="header.openRegisterDialog()">registrieren</div></div><div class="article-nav hide-for-medium" ng-show="header.cache.current_user.canCreatePage(currentCategory.id)"><div ng-if="header.showCreateButton()" ng-click="header.openNewPageModal()">Seite erstellen</div></div><div class="user-nav dropdown-wrapper" ng-show="header.cache.current_user.isLoggedIn()"><ul class="dropdown"><li><div ng-click="open(\'/profile\')" class="user-wrapper"><div class="user-avatar"><img ng-src="{{header.cache.current_user.getImage()}}"></div><div class="user-name hide-for-medium">{{header.cache.current_user.name}}</div></div><ul class="submenu logout"><li ng-click="open(\'/profile\')">Profil</li><li ng-click="open(\'/article_overview\')" ng-if="header.cache.current_user.isCoworker()">Meine Artikel</li><li ng-click="open(\'/article_overview\')" ng-if="header.cache.current_user.isCoworker()">Freigabe ({{header.onlineCounter()}})</li><li ng-if="header.showCreateButton()" ng-click="header.openNewPageModal()" class="show-for-medium borderTop">Seite erstellen</li><li class="borderTop" ng-click="open(\'/administration\')" ng-if="header.cache.current_user.isAdmin()">Übersicht</li><li ng-if="header.cache.current_user.isAdmin()" ng-click="open(\'/administration/users\')">Rechteverwaltung</li><li ng-if="header.cache.current_user.isAdmin()" ng-click="open(\'/administration/categories\')">Kategorien</li><li ng-if="header.cache.current_user.isAdmin()" ng-click="open(\'/administration/themes\')">Themes</li><li ng-if="header.cache.current_user.isAdmin()" ng-click="open(\'/administration/trivia\')">Homepageboxen</li><li class="borderTop" ng-click="header.cache.logout()">Abmelden</li></ul></li></ul></div></div><div class="header_middle"><div class="header_search"><form role="search"><input type="text" ng-model="searchtext" ng-model-options="{ debounce: 200 }" ng-change="header.sm.get({ text: searchtext })" ng-focus="header.searchIsActive = true" ng-blur="header.searchIsActive = false" placeholder="Suche nach Artikeln, Schlagworten, Personen"></form></div></div></div><div class="header_inner show-for-small"><div class="header_left"><div class="header_logo"><a href="/" title="Zurück zur Hauptseite"><img src="/assets/images/icon.png" ng-if="!currentCollectionFile" alt="Icon Medienportal"></a></div></div><div class="header_right"><ul><li class="fi-list mobile-menu-toggle" ng-click="header.showMobileMenu = !header.showMobileMenu">&nbsp;</li><menu ng-show="header.showMobileMenu"><li ng-click="open(\'/\')">Startseite</li><li ng-repeat="category in header.getHomepageCategories() | orderObjectsBy:\'position\'" ng-click="open(\'/category/\' + category.id)">{{category.title}}</li><li ng-if="!header.cache.current_user.isLoggedIn()" class="li-highlight" ng-click="open(\'/login\')">Anmelden</li><li ng-if="!header.cache.current_user.isLoggedIn()" class="li-highlight" ng-click="open(\'/register\')">Registrieren</li><li ng-if="header.cache.current_user.isLoggedIn()" class="li-highlight" ng-click="header.cache.logout()" style="text-align:left;"><img style="height: 25px;border-radius: 3px;margin-right: 5px;margin-left: 5px;" ng-src="{{header.cache.current_user.getImage()}}"> als {{header.cache.current_user.first_name}} abmelden</li></menu></ul></div></div></header><section search-results=""></section><div class="row content hide-for-small" ng-if="lm.hasBanner()"><div class="banner"><img ng-src="{{lm.getBannerSrc()}}" alt="Das Banner zu {{header.cache.account.name}}"><p style="float:left;">{{header.cache.account.name}}</p><p style="float:right;" class="feedback" ng-click="open(\'/privacy\')">Datenschutz</p><div style="clear:both;"></div></div></div>'),$templateCache.put("app/components/header/newpage.html",'<div class="loginuser"><form ng-submit="newpage.submitCreateForm()" style="border:none;"><div><label for="newpage-title">Titel:</label> <input type="text" placeholder="Titel" id="newpage-title" ng-model="newpage.newPageSettings.title"></div><div><label for="newpage-categoryid">Kategorie:</label><select ng-options="category.id as category.title for category in newpage.possibleCategories()" ng-model="newpage.newPageSettings.category_id" id="newpage-categoryid"></select></div><input class="submit" style="margin-top:25px;" type="submit" value="Seite erstellen"><div style="clear:both;"></></div></form></div>'),$templateCache.put("app/components/item/advertising.html",'<article class="item collection page" ng-class="classes()"><div><a href="http://www.schuelerhilfe.de/delitzsch/" title="Das Medienportal wird von Schülerhilfe Delitzsch unterstützt."><img bn-lazy-src="/assets/images/wer_supp_klickermann_preview_small.png"></a><h2><a href="http://www.schuelerhilfe.de/delitzsch/" title="Das Medienportal wird von Schülerhilfe Delitzsch unterstützt.">Das Medienportal wird von Schülerhilfe Delitzsch unterstützt.</a></h2><p class="excerp teasertext">Ob Prüfungsvorbereitung oder Unterstützung in Mathe, Chemie, Physik, Deutsch, Englisch, Französisch, oder Russisch: Die TÜV-geprüfte Einzelförderung der Schülerhilfe Delitzsch in kleinen Gruppen führt nachweislich zu dauerhaften Notenverbesserungen.</p><div></div></div></article>'),$templateCache.put("app/components/item/item.html",'<article class="item collection page" ng-class="classes()" ng-if="enforcePageLayout || item.modelName == \'Page\'" ng-click="openItem(item, $event)"><div><img bn-lazy-src="{{item.getPreview(previewSize())}}" ng-if="item.getPreview(previewSize())"><h2><a ng-href="{{baseUrl}}/#!/{{item.modelName.toLowerCase()}}/{{item.id}}" title="{{item.title}} öffnen" ng-bind-html="item.title" ng-click="openItem(item, $event)"></a></h2><p class="commenttime" style="margin-bottom: 5px;"><span class="label new" ng-show="isNew()"><i class="fi-burst"></i>neu</span> <a class="label" ng-if="item.topic" ng-href="{{baseUrl}}/#!/search/?f=topic:{{item.topic}}" ng-click="openTopic(item.topic, $event)">{{item.topic}}</a> {{moment(item.created_at).format(\'L\')}} <a ng-if="getCommentsCount() > 0" ng-href="{{baseUrl}}/#!/{{item.modelName.toLowerCase()}}/{{item.id}}#comments" ng-click="openItem(item, $event, \'comments\')">·<ng-pluralize count="getCommentsCount()" when="{ 1: \'1 Kommentar\', other: \'{} Kommentare\' }"></ng-pluralize></a> <span ng-if="item.likes.length > 0">·<ng-pluralize count="item.likes.length" when="{ 1: \'eine Empfehlung\', other: \'{} Empfehlungen\' }"></ng-pluralize></span> <span class="make-prominent" ng-click="makeItemProminent($event)" ng-if="current_user.isAdmin()">· <i class="fi-megaphone"></i>prominent</span></p><p ng-bind-html="item.config.excerp" class="excerp teasertext"></p><div></div></div></article><article class="item album page" ng-class="classes()" ng-if="!enforcePageLayout && item.modelName == \'Collection\'" ng-click="openItem(item, $event)"><div><img bn-lazy-src="{{item.getPreview(previewSize())}}" ng-if="item.getPreview(previewSize())"><h2><a ng-href="{{baseUrl}}/#!/{{item.modelName.toLowerCase()}}/{{item.id}}" title="{{item.title}} öffnen" ng-bind-html="item.title" ng-click="openItem(item, $event)"></a></h2><p class="commenttime" style="margin-bottom: 5px;"><span class="label new" ng-show="isNew()"><i class="fi-burst"></i>neu</span> <a class="label" ng-if="item.topic" ng-href="{{baseUrl}}/#!/search/?f=topic:{{item.topic}}" ng-click="openTopic(item.topic, $event)">{{item.topic}}</a> {{moment(item.created_at).format(\'L\')}} <span ng-if="getCommentsCount() > 0">·<ng-pluralize count="getCommentsCount()" when="{ 1: \'1 Kommentar\', other: \'{} Kommentare\' }"></ng-pluralize></span> <span ng-if="item.likes.length > 0">·<ng-pluralize count="item.likes.length" when="{ 1: \'eine Empfehlung\', other: \'{} Empfehlungen\' }"></ng-pluralize></span> <span>· {{item.files.length}} Bilder</span> <span class="make-prominent" ng-click="makeItemProminent($event)" ng-if="current_user.isAdmin()">·<i class="fi-megaphone"></i>prominent</span></p><div class="roll"><img bn-lazy-src="{{file.getFile(\'small\')}}" ng-repeat="file in item.files | limitTo:6"></div><div></div></div></article>'),$templateCache.put("app/components/module/audio.html",'<span ng-if="isEditing()">status: {{module.state}}</span><div class="audio" id="module_{{module.id}}"><audio controls="" style="display:block"><source ng-src="{{\'//d1dvvsd95n8302.cloudfront.net\' + version.relativeUrl}}" type="{{getMimeType(version.mimetype || (\'audio/\' + version.name))}}" ng-repeat="version in module.files[0].versions" ng-if="version.name !== \'original\'"></audio></div><input type="file" ngf-select="" ngf-change="module.setFile($files, page)" ng-if="isEditing()"><p contenteditable="{{isEditing()}}" ng-model="module.content" class="module_additionalinfo" ng-blur="module.save(page)" ng-change="realtime()"></p>'),$templateCache.put("app/components/module/image.html",'<div class="module_image inputfile_wrap"><input type="file" ngf-drop="" ngf-select="" ngf-change="setFile($files)" ng-if="isEditing()"> <img ng-src="{{module.files[0] || \'/assets/images/icons/image.png\'}}" style="width: 100%" ng-if="!module.files[0].file_id"> <img ng-src="{{module.files[0].versions[\'standard\'].absoluteUrl || \'/assets/images/icons/image.png\'}}" style="width: 100%" ng-if="module.files[0].file_id"></div><p contenteditable="{{isEditing()}}" ng-model="module.content" class="module_additionalinfo" ng-blur="module.save(page)" ng-change="realtime()"></p>'),$templateCache.put("app/components/module/interview.html",'<p contenteditable="{{isEditing()}}" ng-model="module.title" class="module_question" ng-blur="module.save(page)" ng-change="realtime()"></p><p contenteditable="{{isEditing()}}" ng-model="module.content" class="module_answer" ng-blur="module.save(page)" ng-change="realtime()"></p>'),$templateCache.put("app/components/module/issuu.html",'<div class="iframe_embed_responsive"><iframe ng-src="{{\'//e.issuu.com/embed.html#\' + module.files[0]}}" ng-if="module.files[0]" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" allowfullscreen=""></iframe></div><div class="issuelink" ng-if="isEditing()">Link: issuu.com/chamaeleon/docs/?e=<input type="text" ng-model="module.files[0]" ng-blur="module.save()" ng-change="realtime()"></div>'),$templateCache.put("app/components/module/link.html",'<div class="link"><div ng-if="isEditing()" ng-repeat-start="link in module.files" class="row"><mac-autocomplete mac-autocomplete-source="searchByTitle" mac-autocomplete-on-select="selectLink(selected, link)" mac-autocomplete-delay="200" mac-placeholder="\'Suche nach Titel\'" ng-model="searchcontent" class="large-12 columns"><span ng-show="item.type !== \'external\'"><img ng-src="{{item.getPreview(\'small\')}}" alt="{{item.title}}" style="height: 75px"> <b>{{item.title}}</b></span> <span ng-show="item.type === \'external\'"><img ng-src="{{item.og.ogImage.url}}" alt="{{item.og.ogTitle || item.src}}" ng-show="item.og.ogImage" style="width: auto; height: auto; max-width: 125px; max-height: 75px;"> <b>{{item.og.ogTitle || item.src}}</b></span></mac-autocomplete></div><article class="item collection page" ng-repeat-end=""><a ng-href="{{baseUrl + \'/\' + link.modelName.toLowerCase() + \'/\' + link.src}}" ng-if="link.type === \'internal\'"><div ng-show="link.src" style="border:1px solid lightgray !important; border-radius:2px;"><img ng-src="{{link._item.getPreview(\'small\')}}" class="hide-for-small" alt="{{link._item.title}}"><h2>{{link._item.title}}</h2><p class="excerp teasertext">{{link._item.config.excerp}}</p><div></div></div></a> <a ng-href="{{link.src}}" ng-if="link.type === \'external\'" target="_blank"><img ng-src="{{link.og.ogImage.url}}" alt="{{link.og.ogTitle || link.src}}" ng-if="link.og.ogImage"><h2>{{link.og.ogTitle || link.src}}</h2><p class="excerp teasertext" ng-if="link.og.ogDescription">{{link.og.ogDescription}}</p></a> <button class="remove" ng-click="deleteFile(link)" ng-if="isEditing()">Verlinkung entfernen.</button></article><div ng-if="isEditing()"><a class="addanother internal" ng-click="module.files.push({ type: \'internal\', src: unedefined, modelName: undefined })"><i class="fi-plus" style="margin-right:5px"></i> Medienportal-Verknüpfung hinzufügen</a></div></div>'),$templateCache.put("app/components/module/quote.html",'<blockquote contenteditable="{{isEditing()}}" ng-model="module.content" class="module_quote" ng-blur="module.save(page)" ng-change="realtime()"></blockquote>'),$templateCache.put("app/components/module/soundcloudaudio.html",'<iframe class="iframe" width="100%" scrolling="no" frameborder="no" ng-if="module.files[0]" ng-src="{{\'https://w.soundcloud.com/player/?url=\' + module.files[0] + \'&amp;auto_play=false&amp;auto_advance=false&amp;buying=false&amp;liking=true&amp;download=true&amp;sharing=true&amp;show_artwork=false&amp;show_comments=false&amp;show_playcount=true&amp;show_user=false&amp;hide_related=false&amp;start_track=0&amp;callback=true\'}}"></iframe><input type="file" ngf-select="" ngf-change="module.setFile($files, page)" ng-if="isEditing()"><p contenteditable="{{isEditing()}}" ng-model="module.content" class="module_additionalinfo" ng-blur="module.save(page)" ng-change="realtime()"></p>'),$templateCache.put("app/components/module/subhead.html",'<h2 contenteditable="{{isEditing()}}" ng-model="module.content" class="module_subhead" ng-blur="module.save(page)" ng-change="realtime()"></h2>'),$templateCache.put("app/components/module/text.html",'<p contenteditable="{{isEditing()}}" ng-model="module.content" class="module_text" ng-blur="module.save(page)" ng-change="realtime()"></p>'),$templateCache.put("app/components/module/vidlyvideo.html",'<span ng-if="isEditing()">status: {{module.state}}</span><div class="vidly video" id="module_{{module.id}}"><video controls="" style="display:block" auto-resize-video="" in-view="playVideo($inviewpart)"><source ng-src="{{\'//d1dvvsd95n8302.cloudfront.net\' + version.relativeUrl}}" type="{{getMimeType(version.mimetype || (\'video/\' + version.name))}}" ng-repeat="version in module.files[0].versions" ng-if="version.name !== \'original\' && module.files[0].file_id"><source ng-src="{{file.cloudfront_url}}" type="{{getMimeType(file.mime_type)}}" ng-repeat="file in module.files[0].files" ng-if="!module.files[0].file_id"></video></div><input type="file" ngf-select="" ngf-change="module.setFile($files, page)" ng-if="isEditing()"><p contenteditable="{{isEditing()}}" ng-model="module.content" class="module_additionalinfo" ng-blur="module.save(page)" ng-change="realtime()"></p>'),$templateCache.put("app/components/navbar/navbar.html",'<nav class="top-bar row" ng-controller="NavbarCtrl"><ul class="title-area"><li class="name"><h1><a href="https://github.com/Swiip/generator-gulp-angular">Gulp & Angular</a></h1></li></ul><section class="top-bar-section"><ul class="right"><li class="active"><a ng-href="#">Home</a></li><li><a ng-href="#">About</a></li><li><a ng-href="#">Contact</a></li></ul><ul class="left"><li><a ng-href="#">Current date: {{ date | date:\'yyyy-MM-dd\' }}</a></li></ul></section></nav>'),$templateCache.put("app/components/sharebox/sharebox.html",'<div><button ng-click="likeItem()" ng-if="!didLikeItem()" class="like"><i class="fi-heart"></i>Empfehlen</button> <button ng-click="likeItem()" ng-if="didLikeItem()" class="active"><i class="fi-heart"></i><i class="fi-x"></i>gefällt mir<span>&nbsp;nicht mehr</span></button> <button class="likes">{{item.likes.length || \'0\'}}</button></div><div class="liking_users"><img ng-src="{{user.getImage()}}" alt="defaultavatar" title="{{user.name}}" class="profile_picture" ng-repeat="user in likingUsers() | limitTo: 6 track by $index"></div>'),$templateCache.put("app/components/user_selector/user_selector.html",'<section class="userselector"><ul class="userlist"><li ng-repeat="friend in chosenUsers"><div ng-if="friend.author_type == \'panda\'" class="user author"><img ng-src="{{userCollection[friend.author_id].getImage()}}"> {{userCollection[friend.author_id].name}}<span>&nbsp;·&nbsp;</span><span ng-click="unchose(friend, $event)" ng-if="chosenUsers.length > 1">entfernen</span></div><div ng-if="friend.author_type == \'custom\'" class="user author">{{friend.author_id}}<span>&nbsp;·&nbsp;</span><span ng-click="unchose(friend, $event)">entfernen</span></div></li></ul><mac-autocomplete mac-autocomplete-source="searchName" mac-autocomplete-on-select="chose(selected, link)" mac-autocomplete-delay="200" mac-placeholder="\'Name der Person eintippen, um angemeldete Person hinzuzufügen ...\'" ng-model="searchtext" class="large-12 columns" style="margin-top:10px;"><span><img ng-src="{{item.getImage(\'small\')}}" alt="{{item.first_name}} {{item.last_name}}" style="height: 75px"> <b>{{item.first_name}} {{item.last_name}}</b></span></mac-autocomplete><p style="text-align: center">- oder -</p><form ng-submit="chose(newUserName, $event)"><input type="text" ng-model="newUserName" placeholder="Unangemeldete Person hinzufügen" style="display: block; width: 100%;"></form></section>'),$templateCache.put("app/components/userbar/userbar.html",'<div ng-if="userbar.cache.current_user.isLoggedIn()" class="userbar_inner"><button ng-click="userbar.cache.current_user.edit_mode = !userbar.cache.current_user.edit_mode" ng-class="{active: userbar.cache.current_user.edit_mode, edit_button: true}" class="hide-for-small" ng-if="userbar.showEditButton()" style="float:right;"><i class="fi-pencil"></i> Seite bearbeiten</button><ul class="breacrumb" ng-show="userbar.isShowStatusBreadcrumb()"><li ng-class="userbar.breadcrumbClassForStatus(\'READY\')" ng-click="userbar.setStatus(\'READY\')">Freigeben<span class="check"><i class="fi-check"></i></span></li><li ng-class="userbar.breadcrumbClassForStatus(\'CONTROLLED\')" ng-click="userbar.setStatus(\'CONTROLLED\')">Kontrolliert<span class="check"><i class="fi-check"></i></span></li><li ng-class="userbar.breadcrumbClassForStatus(\'PUBLISHED\')" ng-click="userbar.setStatus(\'PUBLISHED\')">Sichtbar<span class="check"><i class="fi-check"></i></span></li></ul></div>'),$templateCache.put("app/components/boxes/activity/activity.html",'<div class="box activity"><h3>Neuste Aktivitäten</h3><div class="recent_activity"><article ng-repeat="activity in activities_array() | orderBy:\'created_at\':true | limitTo:10" ng-class="classes(activity)"><a ng-href="{{url(activity)}}"><p ng-if="activity.type == \'greeting\'"><img class="profilbild" ng-src="{{profile_pic(activity)}}" ng-if="profile_pic(activity)"> <span class="namec">{{user_name(activity)}}</span> sagt: {{activity.content}}</p><p ng-if="activity.type == \'comment\'"><img class="profilbild" ng-src="{{profile_pic(activity)}}" ng-if="profile_pic(activity)"> <span class="namec">{{user_name(activity)}}</span> hat {{page_title(activity)}} kommentiert: {{activity.content}}</p><p ng-if="activity.type == \'like\'"><img class="profilbild" ng-src="{{profile_pic(activity)}}" ng-if="profile_pic(activity)"> <span class="namec">{{user_name(activity)}}</span> gefällt {{page_title(activity)}}</p></a></article></div><span class="fadeout"><span></span></span></div>'),$templateCache.put("app/components/boxes/events/events.html",'<div class="box hints" ng-show="!loading"><div class="events" ng-if="!error"><h3>Nächste Termine</h3><p ng-repeat="event in events | orderBy:\'start\' | limitTo:eventsLimit"><span>{{event.start.format(\'DD.MM.\')}}</span> {{event.summary}}</p><p ng-if="loadedEvents.length < 1"><i>Es stehen keine Termine an</i></p></div><div ng-if="error">Es ist ein Fehler aufgetreten. Bitte versuche es später erneut.</div></div>'),$templateCache.put("app/components/boxes/trivia/trivia.html",'<div class="box hints"><div ng-if="!error"><h3>Wusstest du schon ...</h3><p ng-show="activeTrivia()">{{activeTrivia().content}}</p><div ng-if="error">Es ist ein Fehler aufgetreten. Bitte versuche es später erneut.</div></div></div>'),$templateCache.put("app/components/boxes/user_list/user_list.html",'<div class="box extra"><h3>Autor</h3><p ng-repeat="user in pandaUsers track by $index" class="info"><img ng-src="{{user.getImage()}}" ng-if="user.getImage()" title="{{user.name}}" class="profilbild"> <span class="namec">{{user.name}}</span><br>{{user.description}}</p></div>'),$templateCache.put("app/components/boxes/vplan/vplan.html",'<div class="box plan" ng-if="!error"><div ng-hide="user.klass" class="error"><div class="wrapper"><p style="margin-bottom: 8px;">Stelle hier deine Klasse ein und lasse dir deinen Vertretungsplan für den nächsten Tag anzeigen:</p><form ng-submit="setKlass()"><select ng-model="klass.first" required="true" ng-options="klass for klass in [5, 6, 7, 8, 9, 10, 11, 12]"></select><select ng-model="klass.second" ng-required="klass.first != 11 && klass.first != 11" ng-show="klass.first && (klass.first != 11 && klass.first != 11)" ng-options="klass for klass in [1, 2, 3, 4, 5, 6]"></select><input type="submit" value="weiter"></form></div><div class="wrapper" style="border-top:1px dotted lightgray;"><p style="color: #57ad68;"><i style="margin-right:5px;" class="fi-pencil"></i> Du kannst die Klasse nachträglich in deinem Profil ändern.</p></div></div><div ng-if="user.klass"><p id="date">Infos für <b>{{vp.kopf.titel[0]}}</b>:</p><div class="wrapper"><b>Fehlende Lehrer</b><p>{{vp.kopf.kopfinfo[0].abwesendl[0]}}</p><section ng-if="vp.aktionen.length > 0"><b>Änderungen</b><p ng-repeat="aktion in vp.aktionen"><span ng-hide="user.klass == aktion.klasse[0]">{{aktion.klasse[0]}}:</span> <span ng-if="aktion.stunde[0]">in der {{aktion.stunde[0]}}.</span> <span ng-if="aktion.fach[0]">{{aktion.fach[0]}}</span> <span ng-if="aktion.lehrer[0]">mit {{aktion.lehrer[0]}}</span> <span ng-if="aktion.info[0]">{{aktion.info[0]}}</span> <span ng-if="aktion.raum[0]">in Raum {{aktion.raum[0]}}</span></p></section><section ng-if="vp.fuss"><b>Sonstige Informationen:</b><p>{{vp.fuss}}</p></section></div></div></div><div class="box plan" ng-if="error"><h3 style="border-bottom:1px solid lightgray;padding-bottom:15px;font-size: 10px;font-weight: 300;padding: 7px 0px 7px 15px;letter-spacing: 1px;">Vertretungsplan</h3><div class="wrapper"><b>Ein Fehler ist beim Herunterladen des Vertretungsplans aufgetaucht.</b><p class="error">{{error}}</p></div></div>')
}]);